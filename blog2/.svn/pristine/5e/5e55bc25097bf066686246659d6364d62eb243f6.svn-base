littlevgl lvgl 最新版 v7.4 移植 littlevgl 最新 已经 更 新到 v 网上 大多数 移植 教程 的 版本 比较 老 很多 特性 没有 界面 也 不够 酷 炫 原子 最近 更新 的 littlevgl 教程 则是 基于 v 版本 的 基本上 搬 过来 全是 报错 无法 参考 新旧 版本 一致 还是 有 很大 区别 的 这里 介绍 下 最新 版本 的 移植 要点 针对 嵌入式 linux 的 移植 当然 最 最新 的 版 本是 v 源码 可以 在 github 下载 关于 lvgl 的 官 网 及 介绍 在 移植 比较简单 主要 区 别是 几个 接口 跟 老 版本 的 不一样 了 不过 最终 都是 实现 dispflush 显示 驱动 接口 即可 接口 原型 新版本 的 是 这样 的 voiddispflush 移植 说明 新建 个 工程 文件夹 我 这 取 名叫 test 然后 在 test 文件 夹下 新建 个 lvgl 文件夹 把 下 载到 的 源码 中 的 文件夹 整个 拷贝 出来 放进去 把 lvconftemplateh 拷贝 出 来到 工程 的 文件 夹下 重 命名为 lvconfh 编辑 下 根据 实际情况 改下 相关 的 配置 在 工程 的 文件 夹下 建 个 lvdrivers 文件夹 用于 实现 的 驱动 文件 void fbdevpathordwr if fbfd perror returnprintf ioctl perror ioctl perror returnprintf char mmap if int fbp perror returnprintf if fbpnull xlt returnif ylt returnif xgtvinfoxres returnif ygtvinfoyres uinttfbp uintt yactyyltactyy for xactxxltactxx location xvinfoxoffset yvinfoyoffset uinttfbp uintt yactyyltactyy for xactxxltactxx location xvinfoxoffset yvinfoyoffset uinttfbp uintt yactyyltactyy for xactxxltactxx location xvinfoxoffset yvinfoyoffset unsignedlong uintptrt rect lvflushready dispdrv if fbpnull xlt returnif ylt returnif xgtvinfoxres returnif ygtvinfoyres uinttfbp uintt fbpfor xactxxltactxx for yactyyltactyy location xvinfoxoffset yvinfoyoffset uinttfbp uintt fbpfor xactxxltactxx for yactyyltactyy location xvinfoxoffset yvinfoyoffset uinttfbp uintt fbpfor xactxxltactxx for yactyyltactyy location xvinfoxoffset yvinfoyoffset unsignedlong uintptrt rect if fbpnull xlt returnif ylt returnif xgtvinfoxres returnif ygtvinfoyres uinttfbp uintt yactyyltactyy for xactxxltactxx location xvinfoxoffset yvinfoyoffset uinttfbp uintt yactyyltactyy for xactxxltactxx location xvinfoxoffset yvinfoyoffset uinttfbp uintt yactyyltactyy for xactxxltactxx location xvinfoxoffset yvinfoyoffset unsignedlong uintptrt rect 附上 一个 小 测试 void intmain void ampdispdrv ampdispdrv lvscract null lvlabelsettext lvobjalign ticklessmode democreate while lvtickinc lvtaskhandler usleep return 如何 运行 直接 make 即可 生成 可执行文件 附 makefile 文件 chainroot crosscompile gcccxx crosscompile gas crosscompile asar crosscompile arld crosscompile ldranlib crosscompile ranlibobjdump crosscompile objdumpobjcopy crosscompile objcopystrip crosscompile strip 编译 主程序 shellfindnamec objc patsubstco srcc srcs srcc srcc objs objc wildcardc dir notdir src objs patsubstc objdir o dir callmakesubdir binary binary objs echogenerating cc o binary objs ldflags ldscript echook objdir oc cc c cflags incs ltocleanrmf objdir asrcss objext cobjs csrcsc objext mainobj mainsrcc objext srcs asrcs csrcs mainsrc objs aobjs cobjs cc cflags aobjs cobjs mainobj cc o bin mainobj aobjs cobjs ldflags cleanrmf bin aobjs cobjs mainobj 