设计 模式 组合 模式 设计 模式 组合 模式 问题 引出 看 一个 学校 院系 展示 需求 编写程序 展示 一个 学校 院系 结构 需 求是 这样 要在 一个 页面 中 展示出 学校 的 院系 组成 一个 学校 有 多个 学院 一个 学院 有 多个 系 如图 传统 方式 解决 传统 方案 解决 学校 院系 展示 类 图 传统 方案 解决 学校 院系 展示 存在 的 问题 分析 将 学院 看做 是 学校 的 子类 系 是 学院 的 子类 这样 实际上 是 站在 组织 大小 来 进行 分 层次 的 实际上 我们 的 要 求是 在 一个 页面 中 展示出 学校 的 院系 组成 一个 学校 有 多个 学院 一个 学院 有 多个 系 因此 这种 方案 不能 很好 实现 的 管理 的 操作 比 如对 学 院系 的 添加 删除 遍历 等 解决方案 把 学校 院系 都 看做 是 组织 结构 他们 之间 没有 继承 的 关系 而是 一个 树形 结构 可以 更好 的 实现 管理 操作 gt 组合 模式 组合 模式 组合 模式 又叫 部分 整体 模式 它 创 建了 对象 组 的 树形 结构 将 对象 组合成 树状 结构 以 表示 整体 部分 的 层次 关系 组合 模式 依据 树形 结构 来 组合 对象 用来 表示 部分 以及 整体 层次 这种 类型 的 设计 模式 属于 结构 型 模式 组合 模式 使得 用户 对 单个 对象 和 组合 对象 的 访问 具有 一致性 即 组合 能让 客户 以 一致 的 方式 处理 个别 对象 以及 组合 对象 组合 模式 的 原理 类 图 组合 模式 解决 的 问题 组合 模式 解决 这样 的 问题 当 我们 的 要 处理 的 对象 可以 生成 一颗 树形 结构 而 我们 要对 树上 的 节点 和 叶子 进行 操作 时 它 能够 提供 一致 的 方式 而 不用 考虑 它是 节点 还是 叶子 对应 的 示意图 组合 模式 解决 学校 院系 展示 的 应用 实例 默认 实现 默认 实现 stringname stringdes thisdesdes 子类 都 需要 实现 super namedes getname for publiccollege super namedes getname for super namedes add 和 remove 就 不用 再写 因为 是 叶子 结点 getname stringargs 从 大 到 小 创建 对象 清华大学 中国 顶级 大学 计算机 学院 顶级 计算机 文学院 文史 类专业 collegeadd newdepartment 计算机技术 专 硕 collegeadd newdepartment 计算机 科学 与 技术 学 硕 collegeadd newdepartment 中国文学 传统文化 collegeadd newdepartment 外国文学 外来文化 universityadd college universityadd college universityprint 组合 模式 在 jdk 集合 的 源码 分析 java 的 集合 类 hashmap 就使 用了 组合 模式 组合 模式 的 注意事项 和 细节 简化 客户端 操作 客户端 只需要 面对 一致 的 对象 而 不用 考虑 整体 部分 或者 节点 叶子 的 问题 具有 较强 的 扩展性 当 我们 要 更改 组合 对象 时 我们 只需要 调整 内部 的 层次 关系 客户端 不用 做出 任何 改动 方便 创 建出 复杂 的 层次 结构 客户端 不用 理会 组合 里面 的 组成 细节 容易 添加 节点 或者 叶子 从而 创 建出 复杂 的 树形 结构 需要 遍历 组织机构 或者 处理 的 对象 具有 树形 结构 时 非常 适合 使用 组合 模式 要求 较高 的 抽象性 如果 节点 和 叶子 有 很多 差异性 的话 比如 很多 方法 和 属性 都不 一样 不适合 使用 组合 模式 