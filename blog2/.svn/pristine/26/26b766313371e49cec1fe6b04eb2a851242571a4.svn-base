用 javascript 写 贪吃蛇 案例 html 部分 贪吃蛇 部分 部分 工具 对象 就 一个 不需要 创建 构造 函数 function vartools 写 一个 方法 获取 随机数 minmax returnmathfloor mathrandom maxmin min 暴露 tools 给 foodjs 部分 所有 js 文件 中 书写 代码 都是 全局 作用 域 自 调用 函数 开启 新 的 作用 域 可以 避免 命名 冲突 function function 对象 蛇 食物 游戏 对象 控制 游戏 逻辑 页 面上 显示 的 元素 创建 食物 对象 属性 坐标 大小 颜色 方法 rendrt 随机 创建 一个 食物 对象 并 输 出到 map 上 创建 食物 的 构造 函数 functionfood options 写 render 方法 map 这个 map 表示 父 容器 删除 之前 创建 的 元素 remove 创建 div mapappendchild div elementspush div thisheight 设置 div 的 样式 for 删除 页 面上 的 div 从 最后 一项 开始 删 直到 i 为止 elementsi 删除 数组 中 的 元素 第一个 参数 表示 从 哪个 元素 开始 删除 第二个 元素 表示 删除 几个 元素 elementssplice i 为了 使 外部 函数 可以 调用 food 构造 函数 可以 通过 window 但是 window 是 可以 shenglue 的 windowfoodfood map varfoodnewfood foodrender map snakejs 部分 蛇 对象 属性 蛇 节 大小 初始 时 是 三节 蛇头 红色 移动 方向 蛇 的 身体 数组 包括 蛇 的 头部 和 身体 第一个 位置 是 蛇头 方法 渲染 将 蛇 渲染 到 map 上 function 自 调用 函数 开启 一个 新 的 局部 作用 域 防止 命名 冲突 记录 之前 创建 的 蛇 functionsnake options 第一 部分 是 蛇头 蛇 具有 的 方法 map 删除 之前 创建 的 蛇 remove 把 每一个 蛇 节 渲染 到 地 图上 for 取出 蛇 节 中 记录 蛇 节 的 大小 和 位置 每一个 蛇 节 显示出来 div mapappendchild div 记录 当前 蛇 节 elementspush div 注意 要 设置 div 的 位置 必 须要 设置 div 的 position 使其 脱离 文档 流 蛇 节 私有 成员 functionremove 把 记录 的 蛇 删除 删除 数组 的 每一项 不能 从前 往后 for 删除 elementsi 删除 数组 中 的 元素 elementssplice i 控制 蛇 移动 的 方法 当前 蛇 节 到上 一个 蛇 节 的 位置 foodmap for 控制 蛇头 的 移动 判断 蛇头 移动 的 方向 thisdirection 当 蛇 遇到 食物 的 时候 做出 相应 的 处理 变化 蛇 身 变长 食物 消失 再 重新 随机 生成 一个 食物 蛇头 的 坐标 headx 表示 前面 距离 左边 有 几个 蛇 节 的 宽度 让 蛇 增加 一节 获取 蛇 的 最后 一节 随机 在 地 图上 重新 生成 食物 foodrender map 暴露 构造 函 数给 外部 gamejs 部分 游戏 对象 属性 食物 蛇 map 将 食物 与 蛇 渲染 到 蛇 上面 方法 start 开始 游戏 function varthat 用于 记录 游戏 对象 构造 函数 functiongame map thisfoodnewfood 值 记录 游戏 对象 然后 在 自 调用 函数 的 任何 位置 都可以 调用 将 蛇 与 食物 渲染 到 地图 上去 thisfoodrender thismap thissnakerender thismap thissnakemove thissnakerender thismap thissnakemove thissnakerender thismap thisfoodrender thismap thissnakemove thissnakemove 让 蛇 移动 起来 runsnake 通过 键盘 能 控制 蛇 移动 的 方向 bindkey 吃到 食物 的 时候 在 蛇 的 move 方法 中 调用 此 方法 开始 游戏 的 逻辑 让 蛇 移动 起来 通过 键盘 能 控制 蛇 移动 的 方向 当 蛇 遇到 食物 的 时候 做出 相应 的 处 理当 蛇 到 边界 的 时候 游戏 结束 开始 游戏 的 逻辑 私有 函数 function 让 蛇 移动 一次 在 定时器 的 function 中 this 指向 window 对象 所以 在这里 不 能用 thisfoodthismap thissnakerender thismap 需 要将 蛇 渲染 到 指定 的 容器 中去 当 蛇 到 边界 的 时候 游戏 结束 获取 蛇头 的 坐标 横向 能够 容纳 多少个 蛇 节 snakewidth 表示 蛇 节 的 宽度 alert gameover clearinterval timerid if alert gameover clearinterval timerid bind that functionbindkey 注册 事件 的 方式 第一种 第二种 方式 keydownfunction e consolelog ekeycode 左上 右下 switch ekeycode that false 当 false 时 是 事件 冒泡 true 时 是 事件 捕获 windowgamegame mainjs 部分 程序 的 入口 获取 地图 function map vargamenewgame map gamestart 效果 展示 