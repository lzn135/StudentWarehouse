数据结构 学习 笔记 入门 必看 建议 收藏 终身 受益 的 个 网站 史上 最全 建议 收藏 卑微 的 小丑 总有 一个 可以 帮助 你 目录 第一章 数据结构 绪论 什么 是 程序逻辑 结构 amp 物理 结构 的 区别 用法 顺序 存储 amp 链式 存储 的 区别 用法 第二章 算法 定义 特性 算法 时间 效率 度量 时间 复杂度 amp 空间 复杂度 的 区别 用法 第三章 线性表 定义 顺序 存储 结构 amp 链式 存储 结构 的 区别 和 用法 第四章 栈 与 队列 什么 是 栈 栈 顶 top 栈 底 bottom 空 栈 顺序 栈 amp 链 栈 顺序 栈 链 栈 两者 示意图 如下 所示 顺序 栈 amp 链 栈 的 异同 a 同时间 复杂度 b 异 空间 性能 栈 的 内部 实现 原理 递归 定义 条件 斐 波 那 契 数列 fibonacci 栈 的 数学 表达式 的 求值 队列 queue 定义 对头 队 尾 第五章 数组 和 广义 表 第六章 串 字符串 定义 串 的 逻辑 结构 串 的 存储 结构 串 的 顺序 存储 结构 串 的 链式 存储 结构 第七章 树 定义 特点 根 节点 子树 子 节点 线性 结构 amp 树结构 的 区别 用法 二叉树 定义 特点 五种 基本 形态 五种 特性 理解 二叉树 的 四种 遍历 方式 前序 遍历 中 序 遍历 后序 遍历 层 序 遍历 赫夫曼编码 a 定义 a 路径 和 路径 长度 b 结点 的 权 及 带 权 路径 长度 c 树 的 带 权 路径 长度 补充 数据结构 哈 夫 曼 huffman 树 哈 夫 曼 编码 第八章 图 graph 定义 线性表 amp 树 amp 图 的 数据 元素 名称 有无 结点 内部 之间 的 关系 的 区别 图 的 五种 种类 无 向 图 有 向 图 简单 图 完 全无 向 图 有 向 完全 图 权 定义 图形化 解释 环 定义 图形化 解释 特性 a 连通 b 简单 路径 c 强 连通 图 d 强 连通 分量 e 生成 树 f 有 向 树 g 森林 图 的 两种 遍历 深度 优先 遍历 广度 优先 遍历 的 区别 用法 最小 生成 树 连通 网 的 两种 算法 区别 和 用法 普 里 姆 prim 算法 克鲁斯 卡尔 kruskal 算法 aov 网 拓扑 序列 对 aov 网 进行 拓扑 排序 的 基本思路 是 aoe 网 始点 或 源点 b 终点 或 汇 点 c 路径 长度 d 关键 路径 e 关键 活动 第九章 动态内存 管理 第十章 查找 查找 表 searchtable 关键字 key 键值 关键码 关键字 primarykey 次 关键字 secondarykey 查找 定义 静态 查找 表 amp 动态 查找 表 的 区别 用法 顺序 查找 线性 查找 折半 查找 二分 查找 有序 表 查找 插 值 查找 斐 波 那 契 查找 索引 顺序 表 查找 分块 查找 索引 定义 按照 结构 分类 三种 线性 索引 amp 两种 表 稠密 索引 分块 索引 倒排 索引 多重 表 倒 排表 二叉排序树 二叉 查找 树 定义 目的 存储 方式 a 定义 b 执行 插入 或 删除 操作 时 c 查找 操作 时 d 查找 次数 最少 e 查找 次数 最多 f 二叉排序树 的 形状 g 解决 二叉排序树 的 形状 问题 h 深度 i 时间 复杂度 j 平衡 二叉树 avl 树 平衡 二叉树 平衡 因子 bfbalancefactor 平衡 二叉树 最小 不平衡 子树 平衡 二叉树 实现 原理 多路 查找 树 分析 定义 四中 常见 的 多路 查找 树 树 树 b 树 b 树 的 区别 用法 散 列 技术 定义 散 列表 哈希 表 hashtable 散 列 地址 散 列 函数 设计 原则 a 计算 简单 b 散 列 地址 分布 均匀 构造 散 列 函数 的 六种 方法 直接 定址法 数字 分析法 平方 取 中法 折叠 法 除 留 余数 法 随机数 法 处理 散 列 冲突 的 四种 方法 开放 定址法 再 散 列 函数 法 链 地址 法 公共 溢出 区 法 散 列表 性能 分析 a 散 列 函数 是否 均匀 b 处理 冲突 的 方法 c 散 列表 的 装填 因子 第 十 一章 内部 排序 定义 多个 关键 的 排序 最终 都可以 转 化为 单个 关键字 的 排序 排序 的 稳定性 内 排序 amp 外 排序 内 排序 外 排序 影响 内 排序 的 三个 方面 时间 性能 a 比较 b 移动 辅助 空间 算法 的 复杂性 c 语 言中 的 十四种 内部 排序 算法 第 十二章 外部 排序 外部 排序 定义 外部 排序 的 基本思路 举例 外部 排序 算法 定义 外部 排序 算法 由 两个 阶段 构成 路 平衡 归并 举例 路 归并 多路 平衡 归并 排序 胜者 树 败者 树 算法 引入 败者 树 实现 内部 归并 胜者 树 败者 树 败者 树 内部 归并 的 具体 实现 置换 选择 排序 算法 引入 图解 操作过程 置换 选择 排序 算法 的 具体 实现 最佳 归并 树 思考 举例 参考 虚 段 的 归并 树 引入 如何 判断 是否 需要 增加 虚 段 以及 增加 多少 虚 段 十三 文件 参考 文件 大话 数据结构 课本 数据结构 课本 c 语言版 严 蔚 敏 吴 伟 民 扫描 版 数据结构 与 算法 分析 课本 参考 书籍 wordppt 版本 地址 链接 提 取码 y 参考 视频 地址 c 语言 描述 数据结构 和 算法 小 甲鱼 集 推荐 学习 推荐 青岛大学 王 卓 数据结构 与 算法 基础 个 小时 集 推荐 学习 推荐 什么 是 数据结构 是 数据 之间 存在 一种 或 多种 特定 关系 的 数据 元素 集 合为 编写出 一个 好 的 程序 必须 分析 待处理 对象 的 特性 及 各 处理 对象 之间 存在 的 关系 这也 就是 研究 数据结构 的 意义 所在 知识 结构图 第一章 数据结构 绪论 什么 是 程序 程序 数据结构 算法 逻辑 结构 amp 物理 结构 的 区别 用法 顺序 存储 amp 链式 存储 的 区别 用法 第二章 算法 定义 算法 是 解决 特定 问题 求解 步骤 的 描述 在 计算机 中表 现为 指令 的 有限 序列 并且 每条 指令 表示 一个 或 多个 操作 简而言之 算法 是 描述 解决问题 的 方法 特性 输入输出 有穷性 确定性 和 可行性 好 的 算法 应该 具有 正确性 可读性 健壮性 高效率 和 低 存储量 的 特征 算法 时间 效率 度量 可以 忽略 加法 常数 o n o n 与 最高 次 项 相乘 的 常数 可 忽略 o n o n 最高 次 项 的 指数 大 的 函数 随着 n 的 增长 结果 也 会 变得 增 长得 更快 o n gto n 判断 一个 算法 的 时间 效率 时 函数 中 常数 和 其他 次 要项 常常 可以 忽略 而 更应该 关注 主项 最 高阶 项 的 阶 数 o n o nn o n gto n 时间 复杂度 amp 空间 复杂度 的 区别 用法 第三章 线性表 定义 零个 或 多个 数据 元素 的 有限 序列 顺序 存储 结构 amp 链式 存储 结构 的 区别 和 用法 第四章 栈 与 队列 什么 是 栈 是 限定 仅在 表 尾 栈 顶 进行 插入 和 删除 操作 的 线性表 栈 又 称为 后进先出 lastinfirstout 的 线性表 简称 lifo 结构 栈 顶 top 我们 把 允许 插入 和 删除 的 一端 称为 栈 顶 栈 底 bottom 另一端 称为 栈 底 空 栈 不含 任何 任何 数据 元素 的 栈 称为 空 栈 顺序 栈 amp 链 栈 栈 是 线性表 的 特例 其 具备 先进后出 filo 特性 顺序 栈 可以 使用 线性表 的 顺序 存储 结构 即 数组 实现 栈 将之 称之为 顺序 栈 链 栈 可以 使用 单 链表 结构 实现 栈 将之 称之为 链 栈 两者 示意图 如下 所示 顺序 栈 amp 链 栈 的 异同 a 同时间 复杂度 顺序 栈 和 链 栈 的 时间 复杂度 均为 b 异 空间 性能 a 顺序 栈 顺序 栈 需要 事先 确定 一个 固定 的 长度 数组 长度 可能 存在 内存空间 浪费 问题 但它 的 优势 是 存取 时 定位 很 方便 b 链 栈 要求 每个 元素 都要 配套 一个 指向 下个 结点 的 指针 域 增大 了 内存 开销 但 好处 是 栈 的 长度 无限 因此 如果 栈 的 使用过程中 元素 变化 不可 预料 有时 很小 有时 很大 那么 最好 使用 链 栈 反之 如果 它 的 变化 在 可控 范围内 则 建议 使用 顺序 栈 栈 的 内部 实现 原理 栈 的 内部 实现 原理 其实 就是 数组 或 链表 的 操作 而 之所以 引入 栈 这个 概念 是为了 将 程序设计 问题 模型 化用 高层 的 模块 指导 特定 行为 栈 的 先进后出 特性 划 分了 不同 关注 层次 使得 思考 范围 缩小 更加 聚焦 于 我们 致力 解决 的 问题 核心 简 化了 程序设计 的 问题 递归 定义 在 运行 的 过程中 调用 自己 每个 递归 定义 必须 至少有 一个 条件 使 得当 满足 条件 时 递归 不再 进行 条件 子 问题 须 与 原始 问 题为 同样 的 事 且 更为 简单 不能 无限制 地 调用 本身 须有 个 出口 化简 为 非 递归 状况 处理 斐 波 那 契 数列 fibonacci 指的是 这样 一个 数列 即 当前 位置 的 值 为 前面 两项 之和 用 数学 表达式 表达 如下 如果 我们 直接 将 按 上面 的 公式 用 代码 进行 翻译 如下 所示 intfbi constintn n retelseif n retelsefor iiltni 但是 如果 我们 使用 递归 方式 实现 则会 更加 简洁 intfbi constintn if nlt n fbi n 使用 递归 简洁 之余 还 更加 契合 其 数学公式 的 定义 栈 的 数学 表达式 的 求值 其 原理 是 通过 将 中缀 表达式 即 标准 的 四则运算 表达式 以 特定 操作 进 行进 栈 出 栈 操作 得到 一个 对应 的 后缀 表达式 也 称为 逆 波兰 表示 然后 将该 后缀 表达式 再次 通过 特定 操作 进行 出 栈 入 栈 操作 即可 得到 运算 结果 队列 queue 定义 是 只允许 在 一端 进行 插入 操作 而在 另一端 进行 删除 操作 的 线性表 队列 是 一种 先进先出 firstinfirstout 的 线性表 对头 允许 删除 的 一端 称为 对头 队 尾 允许 插入 的 一端 称为 队 尾 线性表 有 顺序 存储 和 链式 存储栈 是 线性表 所以有 这两种 存储 方式 同样 队列 作为 一种 特殊 的 线性表 也 同样 存在 这两种 存储 方式 第五章 数组 和 广义 表 学习 地址 第六章 串 字符串 定义 串 string 是 由 零个 或 多个 字符 组成 的 有限 序列 又 名叫 字符 串串 的 逻辑 结构 串 的 逻辑 结构 和 线性表 很 相似 不同之处 在于 串 针对 的 是 字符集 也 就是 串 中 的 元素 都是 字符 因此 对于 串 的 基本 操作 与 线性表 是 有 很大 差别 的 线性表 更 关注 的 是 单个 元素 的 操作 比如 查找 一个 元素 插入 或 删除 一个 元素 但 串 中 更多 的 是 查找 子 串 位置 得到 指定 位置 子 串 替换 子 串 等 操作 串 的 存储 结构 串 的 存储 结构 与 线性表 相同 分为 两种 串 的 顺序 存储 结构 串 的 顺序 存储 结构 是 用 一组 地址 连续 的 存储单元 来 存储 串 中 的 字符 序列 一般 是 用 定长 数组 来 定义 由 于是 定长 数组 因此 就会 存在 一个 预 定义 的 最 大串 长度 一般 可以 将 实际 的 串 长度 值 保存 在 数组 下标 位置 也 可以 放在 数组 最后 一个 下标 位置 也 有些 语言 使 用在 串 值 后面 加 一个 不 计入 串 长度 的 结束 标记 符 比 如来 表示 串 值得 终结 这样 就 无需 使用 数字 进行 记录 串 的 链式 存储 结构 对于 串 的 链式 存储 结构 与 线性表 是 相似 的 但由于 串 结构 的 特殊性 结构 中 的 每个 元素 数据 都是 一个 字符 如果 也 简单 地 将 每个 链 结点 存储 一个 字符 就会 存在 很大 的 空间 浪费 因此 一个 结点 可以 考虑 存放 多个 字符 如果 最后 一个 结点 未被 占满 时 可以 使用 或 其他 非 串 值 字符 补全 串 的 链式 存储 结构 除了 在 链接 串 串 与 串 操作 时有 一定 的 方便 之外 总的来说 不如 顺序 存储 灵活 性能 也 不如 顺序 存储 结构 好 第七章 树 定义 树 是 个 结点 的 有限 集 当时 称为 空 树 树 其实 也是 一种 递归 的 实现 即 树 的 定义 之中 还用 到了 树 的 概念 特点 根 节点 子树 子 节点 在 任意 一棵 非 空 树 中 且 仅有 一个 特定 的 结点 根 结点 root 当时 其余 结点 可分为 个 互不 相交 的 有限 集 其中 每一个 集合 本身 又是 一棵树 并且 称为 根 的 子树 subtree 其 图示 如下 所示 根 结点 大于 时 根 结点 是 唯一 的 不可能 同时 存在 多个 根结 点子 结点 大于 时 子树 的 个数 没有 限制 但 它们 一 定是 互不 相交 的 下图 所示 的 结构 就不 符合 树 的 定义 因为 它们 都有 相交 的 子树 线性 结构 amp 树结构 的 区别 用法 单独 使用 顺序 存储 结构 即 数组 无法 很好 地 实现 树 的 存储 概念 不过 如果 充分利用 顺序 存储 和 链式 存储 结构 的 特点 则 完全可以 实现 对数 的 存储 结构 的 表示 二叉树 定义 二叉树 binarytree 是 个 结点 的 有限 集合 该 集合 或者 为 空集 称为 空 二叉树 或者 由 一个 根 结点 和 两棵 互不 相交 的 分别 称为 根 结点 的 左 子树 和 右 子树 的 二叉树 组成 特点 a 每个 结点 最多 只能 有 两棵 子树 b 左 子树 和 右 子树 是 有 顺序 的 次序 不能 任意 颠倒 c 即使 树 中 某 结点 只有 一棵 子树 也要 区分 它是 左 子树 还是 右 子树 五种 基本 形态 a 空 二叉树 b 只有 一个 跟 结点 c 根 结点 只有 左 子树 d 根 结点 只有 右 子树 e 根 结点 既有 左 子树 又有 右 子树 五种 特性 理解 a 在 二叉树 的 第 层 上至 多有 个 结点 比如 第一层 是 根 结点 只有 一个 第二层 有 两个 根 结点 的 左 子树 和 右 子树 b 深度 为 的 二叉树 至多 有 个 结点 比如 深度 为 则 至多 只有 个 结点 即 根 结点 深度 为 则 至多 只有 个 结点 根 结点 根 结点 的 左 子树 根 结点 的 右 子树 c 对 任何 一棵 二叉树 如果 其 叶子 结点 点数 为 度 即 子 结 点数 为 的 结 点数 为 则 d 具有 个 结点 的 完全 二叉树 的 深度 为 表示 不大于 的 最大 整数 e 如果 对 一棵树 有 个 结点 的 完全 二叉树 其 深度 为 的 结 点按 层 序 编号 从 第 层 到 第 层 每层 从左到右 对 任一 结点 有 a 如果 则 结点 是 二叉树 的 根 无 双亲 如果 则 其 双亲 是 结点 b 如果 则 结点 无 左 孩子 结点 为 叶子 结点 否则 其 左 孩子 是 结点 c 如果 则 结点 无 右 孩子 否则 其 右 孩子 是 结点 前面 提及 到 顺序 存储 对数 这种 一对 多 的 关系 结构 实现 起来 是 比较 困难 的 但是 对于 二叉树 由于 它 的 特殊性 使 得用 顺序 存储 结构 也 可以 实现 二叉树 的 四种 遍历 方式 前序 遍历 中 序 遍历 后序 遍历 层 序 遍历 赫夫曼编码 树 森林 看似 复杂 其实 它们 都可以 转 化为 简单 的 二叉树 来 处理 这样 就 使得 面对 树 和 森林 的 数据结构 时 编码 实现 成 为了 可能 最基本 的 压缩 编码方法 赫夫曼编码 a 定义 给定 n 个 权 值 作为 n 个 叶子 结点 构造 一棵 二叉树 若 树 的 带 权 路径 长度 达到 最 小则 这棵 树 被称为 哈 夫 曼 树 a 路径 和 路径 长度 定义 在 一棵树 中 从一 个 结点 往下 可以 达到 的 孩子 或 孙子 结点 之间 的 通路 称为 路径 通路 中 分支 的 数目 称为 路径 长度 若 规定 根 结点 的 层数 为 则从 根结 点到 第 l 层 结点 的 路径 长度 为 l 例子 和 的 路径 长度 是 和 的 路径 长度 是 和 的 路径 长度 是 b 结点 的 权 及 带 权 路径 长度 定义 若将 树 中 结点 赋 给 一个 有着 某种 含义 的 数值 则 这个 数值 称为 该 结点 的 权 结点 的 带 权 路径 长度 为 从 根结 点到 该 结点 之间 的 路径 长度 与 该 结点 的 权 的 乘积 例子 节点 的 路径 长度 是 它 的 带 权 路径 长度 路径 长度 权 c 树 的 带 权 路径 长度 定义 树 的 带 权 路径 长度 规 定为 所有 叶子 结点 的 带 权 路径 长度 之和 记为 wpl 例子 示例 中 树 的 wpl 比较 下面 两棵 树上 面的 两棵树 都是 以为 叶子 节点 的 树 左边 的 树 wpl 右边 的 树 wpl 左边 的 树 wplgt 右边 的 树 的 wpl 你 也 可以 计算 除 上面 两种 示例 之外 的 情况 但 实际上 右边 的 树 就是 对应 的 哈 夫 曼 树 补充 数据结构 哈 夫 曼 huffman 树 哈 夫 曼 编码 第八章 图 graph 定义 由 顶点 的 有穷 非 空集合 和 顶点 之间 边 的 集合 组成 通常 表示 为 其中 表示 一个 图 是 图中 的 顶点 的 集合 是 图中 边 的 集合 a 在 线性表 中 数据 元素 之间 是 被 串 起来 的 仅有 线性关系 每个 数据 元素 只有 一个 直接 前驱 和 一个 直接 后 驱 b 在 树形 结构 中 数据 元素 之间 有着 明显 的 层次 关系 并且 每 一层 上 的 数据 元素 可能 和 下一层 中 多个 元素 相关 但 只能 和 上 一层 中一 个 元素 相关 c 图 是 一种 较 线性表 和 树 更加 复杂 的 数据结构 在 图形 结构 中 结点 之间 的 关系 可 以是 任意 的 图中 任意 两个 数据 元素 之间 都 可能 相关 线性表 amp 树 amp 图 的 数据 元素 名称 有无 结点 内部 之间 的 关系 的 区别 图 的 五种 种类 无 向 图 有 向 图 简单 图 完 全无 向 图 有 向 完全 图 权 定义 有些 图 的 边 或 弧 具有 与它 相关 的 数字 这种 与 图 的 边 或 弧 相关 的 数 叫做 权 weight 这些 权 可以 表示 从一 个 顶 点到 另一个 顶点 的 距离 或 耗费 这种 带 权 的 图 通常 称为 网 network 图形化 解释 图 就是 一张 带 权 的 图 即 标识 中国 四大 城市 的 直线 距离 的 网 此 图中 的 权 就是 两地 的 距离 图 结构 中 路径 的 长度 是 路径 上 的 边 或 弧 的 数据 第一个 顶点 到最后 一个 顶点 相同 的 路径 称为 回环 或 环 cycle 序列 中 顶点 不重 复 出现 的 路径 称为 简单 路径 环 定义 除了 第一个 顶点 和 最后 一个 顶点 之外 其余 顶点 不重 复 出现 的 回路 称为 简单 回路 或 简单 环 图形化 解释 下图 所示 两个 图 粗线 都 构成 环 左侧 的 环 只有 第一个 顶点 和 最后 一个 顶点 都是 b 其余 顶点 没有 重复 出现 因此 其 是 一个 简单 环 而 右侧 的 环 由于 顶点 c 的 重复 因此 它就 不是 简单 环 了 特性 a 连通 图中 顶点 间 存在 路径 两 顶点 存在 路径 则 说明 是 连通 的 b 简单 路径 如果 路径 最终 回到 起 始点 则 成为 环 当中 不 重复 叫 简单 路径 c 强 连通 图 若 任意 两 顶点 都是 连通 的 则 图 就是 连通 图 有 向 则 称为 强 连通 图 d 强 连通 分量 图中 有 子 图 若 子 图 极大 连 通则 就是 连通 分量 有 向 的 则 称为 强 连通 分量 e 生成 树 无 向 图中 连通 且 个 顶点 条 边 叫 生成 树 f 有 向 树 有 向 图中 一 顶点 入 度 为 其余 顶点 入 度 为 的 叫 有 向 树 g 森林 一个 有 向 图 由 若干 棵 有 向 树 构成 生成 森林 由于 图 的 结构 比较复杂 任意 两个 顶点 之间 都 可能 存在 联系 因此 无法 以 数据 元素 在 内存 中 的 物理 位置 来 表示 元素 之间 的 关系 也就是说 图 不可 能用 简单 的 顺序 存储 结构 即 数组 来 表示 而 多重 链表 尽管 可以 实现 图 结构 即 以 一个 数据 域 和 多个 指针 域 组成 的 结点 表示 图中 的 一个 顶点 但是 却 存在 内存 浪费 或 操作 不便 的 问题 因此 图 存储 结构 最终 还是 得 通过 结合 顺序 存储 和 链式 存储 才能 做到 比较好 地 实现 图 的 两种 遍历 深度 优先 遍历 广度 优先 遍历 的 区别 用法 最小 生成 树 连通 网 的 两种 算法 区别 和 用法 普 里 姆 prim 算法 克鲁斯 卡尔 kruskal 算法 网 在 一个 表示 工程 的 有 向 图 中用 顶点 表示 活 动用 弧 表示 活动 之间 的 优先 关系 这样 的 有 向 图为 顶点 表示 活动 的 网 我们 成为 aov 网 网 中 的 弧 表示 活动 之间 存在 的 某种 制约 关系 同时 aov 网 中 不能 存在 回路 拓扑 序列 设 是 一个 具有 个 顶点 的 有 向 图中 的 顶点 序列 满足 若 从 顶 点到 有 一条 路径 则在 顶点 序列 中 顶点 必 在 顶点 之前 则 我们 将 这样 的 顶点 序列 称为 一个 拓扑 序列 所谓 拓扑 排序 其实 就是 对 一个 有 向 图 构造 拓扑 序列 的 过程 对 aov 网 进行 拓扑 排序 的 基本思路 是 a 从 aov 网 中 选择 一个 入 度 为 的 顶点 输出 b 然后 删去 此 顶点 c 并 删除 以此 顶点 为 尾 的 弧 d 继续 重复 此 步骤 e 直到 输出 全部 顶点 或者 aov 网 中 不存在 入 度 为 的 顶点 为止 aoe 网 在 一个 表示 工程 的 带 权 有 向 图 中用 顶点 表示 事件 用 有 向 边 表示 活 动用 边上 的 权 值 表示 活动 的 持续时间 这种 有 向 图 的 边 表示 活动 的 网 我们 称之为 aoe 网 始点 或 源点 我们 把 aoe 网 中 没有 入 边 的 顶点 称为 始点 或 源点 b 终点 或 汇 点 没有 出 边 的 顶点 称为 终点 或 汇 点 由于 一个 工程 总有 一个 开始 一个 结束 所以 正常 情况下 aoe 网 只有 一个 源点 一个 汇 点 c 路径 长度 我们 把 路径 上 各个 活动 所 持续 的 时间 之和 称为 路径 长度 d 关键 路径 从 源 点到 汇 点 具有 最大 长度 的 路径 叫 关键 路径 e 关键 活动 在 关键 路径 上 的 活动 叫 关键 活动 第九章 动态内存 管理 学习 地址 第十章 查找 查找 表 searchtable 由 同一 类型 的 数据 元素 或 记录 构成 的 集合 关键字 key 键值 是 数据 元素 中 的 某个 数据项 的 值 又 称为 键值 用它 可以 标识 一个 数据 元素 关键码 也 可以 标识 一个 记录 的 某个 数据项 字段 我们 称为 关键码 关键字 primarykey 若 此 关键字 可以 唯一 地 标识 一个 记录 则 称 此 关键字 为主 关键字 次 关键字 secondarykey 而 对于 那些 可以 识别 多个 数据 元素 或 记录 的 关键字 我们 称为 次 关键字 查找 定义 就是 根据 给定 的 某个 值 在 查找 表 中 确定 一个 其 关键字 等于 给定 值得 数据 元素 或 记录 从 逻辑 上 来说 查找 所 基于 的 数据结构 是 集合 集合 中 的 记录 之间 没有 本质 关系 可是 要想 获得 较高 的 查找 性能 我们 就不 能不 改变 数据 元素 之间 的 关系 在 存储 时 可以 将 查找 集合 组 织成 表 树 等 结构 比如 对于 静态 查找 表 来说 我们 不妨 应用 线性表 结构 来 组织 数据 这样 可以 使用 顺序 查找 算法 如果 再 对 主 关键字 排序 则 可以 应用 折半 查找 等 技术 进行 高效 的 查找 静态 查找 表 amp 动态 查找 表 的 区别 用法 顺序 查找 线性 查找 折半 查找 二分 查找 有序 表 查找 插 值 查找 斐 波 那 契 查找 索引 顺序 表 查找 分块 查找 索引 定义 就是 把 一个 关键字 与它 对应 的 记录 相关联 的 过程 关键字 记录 数据结构 的 最终 目的 就是 提高 数据 的 处理 速度 索引 是为了 加快 查找 速度 而 设计 的 一种 数据结构 一个 索引 由 若干个 索引 项 构成 每个 索引 项 至少 应 包含 关键字 和 其 对应 的 记 录在 存储器 中 的 位置 等 信息 索引 技术 是 组织 大型 数据库 以及 磁盘 文件 的 一种 重要 技术 按照 结构 分类索引 按照 结构 可以 分为 线性 索引 树形 索引 和 多级 索引 三种 线性 索引 amp 两种 表 稠密 索引 分块 索引 倒排 索引 多重 表 倒 排表 假设 查找 的 数据 集 是 普通 的 顺序 存储 那么 插入 操作 插入 到 末尾 和 删除 操作 删除 记录 后 记录 向前 移 相对 耗时 但 如果 只 把 删除 的 元素 与 最后 一个 元素 互换 然后 表 记录 数 减 一则 很 高效 的 效率 是 可以 接受 的 但是 顺序 存储 表 由于 无序 会 造成 查找 效率 很低 如果 查找 的 数据 集 是 有序 线性表 并且是 顺序 存储 的 那么 其 查找 二分 分法 插 值 法 斐 波 那 契 效率 很高 但是 由于 有序 在 插入 和 删除 操作 上 就需要 耗费 大量 的 时间 二叉排序树 二叉 查找 树 而 使用 二叉排序树 这种 存储 结构 时 就可以 实现 对 动态 查找 表 的 高效 插入 删除 和 查找 操作 定义 二叉排序树 binarysorttree 又 称为 二叉 查找 树 它 或者是 一棵 空 树 或者是 具有 下列 性质 的 二叉树 a 若 它 的 左 子树 不 空 则 左 子 树上 所有 结点 的 值 均 小于 它 的 根 结点 的 值 b 若 它 的 右 子树 不 空 则 右 子 树上 所有 结点 的 值 均 大于 它 的 根 结点 的 值 c 它 的 左右 子树 也 分别为 二叉排序树 目的 构造 一棵 二叉排序树 的 目的 其实 并不 是为了 排序 而是 为了 提高 查找 和 插入 删除 关键字 的 速度 不管怎么说 在 一个 有序 数据 集 上 的 查找 速度 总是 要 快于 无序 的 数据 集 的 而 二叉排序树 这种 非线性 的 结构 也有 利于 插入 和 删除 的 实现 存储 方式 a 定义 二叉排序树 是以 链接 的 方式 存储 b 执行 插入 或 删除 操作 时 保持 了 链接 存储 结构 在 执行 插入 或 删除 操作 时 不用 移动 元素 的 有点 只需 修改 链接 指针 插入 和 删除 的 时间 性能比 较好 c 查找 操作 时而 对于 二叉排序树 的 查找 走 的 就是 从 根结 点到 要 查找 的 结点 的 路径 其 比较 次数 等于 给定 值得 结 点在 二叉排序树 的 层数 d 查找 次数 最少 极端 情况下 查找 次数 最少 为 次 即 根 结点 就是 要 找 的 结点 e 查找 次数 最多 最多 也 不会 超过 树 的 深度 也就是说 二叉排序树 的 查找 性能 取决于 二叉排序树 的 形状 f 二叉排序树 的 形状 很可惜 的 是 二叉排序树 的 形状 是 不确定 的 想象 下 极端 的 右 斜 树 或 左 斜 树 g 解决 二叉排序树 的 形状 问题 对于 这个 问题 解决方案 就是 让 二叉排序树 左右 子树 是 比较 平衡 的 h 深度 即 其 深度 与 完全 二叉树 相同 均为 i 时间 复杂度 那么 查找 的 时间 复杂度 就为 j 平衡 二叉树 avl 树 近似 二分 查找 这种 结构 就 称为 平衡 二叉树 平衡 二叉树 或 是 一种 二叉排序树 其中 每一个 结点 的 左 子树 和 右 子树 的 高度 差 至多 等于 平衡 因子 bfbalancefactor 将 二叉 树上 结点 的 左 子树 深度 减去 右 子树 深度 的 值 称为 平衡 因子 bf 平衡 二叉 树上 所有 结点 的 平衡 因子 只 可能是 和 只要 二叉树 上有 一个 结点 的 平衡 因子 的 绝对值 大于 则 该 二叉树 就是 不平衡 的 最小 不平衡 子树 距离 插入 结点 最近 的 且 平衡 因子 的 绝对值 大于 的 结点 为 根 的 子树 我们 称为 最小 不平衡 子树 如上图 所示 当 新 插入 结点 时 距离 它 最近 的 平衡 因子 绝对值 超过 的 结点 是的 左 子树 高度 为 右 子树 高度 为 所以 从 开始 以下 的 子树 为 最小 不平衡 子树 平衡 二叉树 实现 原理 平衡 二叉树 构建 的 基本思想 就是在 构建 二叉树 排序 树 的 过程中 每当 插入 一个 结点 时 先 检查 是否 因 插入 而 破 坏了 树 的 平衡性 若是 则 找出 最小 不平衡 子树 在 保持 二叉排序树 特性 的 前提下 调整 最小 不平衡 子树 中 各 结点 之间 的 链接 关系 进行 相应 的 旋转 使 之 成为 新 的 平衡 子树 多路 查找 树 分析 对于 树 来说 一个 结点 只能 存储 一个 元素 那么 在 元素 非常 多 的 时候 就会 使得 要么 树 的 度 非常大 结点 拥有 子树 的 个数 的 最大值 要么 树 的 高度 非常大 甚至 两者 都必须 足 够大 才 行 这就 使得 内存 存取 外存 次数 非常 多 这 显然 成了 时间 效率 上 的 瓶颈 这 迫使 我们 要 打破 每一个 结点 只 存储 一个 元素 的 限制 为此 引 入了 多路 查找 树 的 概念 定义 其 每一个 结点 的 孩 子树 可以 多于 两个 且 每一个 结点 处 可以 存储 多个 元素 由于 它是 查找 树 因此 所有 元素 之间 存在 某种 特定 的 排序 关系 即 其 是 有序 的 四中 常见 的 多路 查找 树 树 树 b 树 b 树 的 区别 用法 散 列 技术 定义 是 在 记录 的 存储 位置 和它 的 关键字 之间 建立 一个 确定 的 对应 关系 使得 每个 关键字 key 对应 一个 存储 位置 查找 时 根据 这个 确定 的 对应 关系 找到 给定 值 key 的 映射 若 查找 集合 中 存在 这个 记录 则 必 定在 的 位置 上 这里 我们 把 这种 对应 关系 称为 散 列 函数 又 称为 哈希 hash 函数 散 列 技术 既是 一种 存储 方法 也是 一种 查找 方法 通过 散 列 函数 计算 关键字 散 列 地址 并按 此 散 列 地址 存储 对应 记录 查找 时 通过 同样 的 散 列 函数 计算 关键字 散 列 地址 按 此 地址 访问 对应 记录 散 列表 哈希 表 hashtable 采用 散 列 技术 将 记录 存储 在 一块 连续 的 存储空间 中 则 这块 连续 存储空间 称为 散 列表 或 哈希 表 散 列 地址 那么 关键字 对应 的 记录 存储 位置 我们 称为 散 列 地址 散 列 函数 设计 原则 a 计算 简单 散 列 函数 的 计算 时间 不应该 超过 其他 查找 技术 与 关键字 比较 的 时间 b 散 列 地址 分布 均匀 防止 散 列 冲突 最好 的 办法 就是 尽量 让 散 列 地址 均匀 地 分布 在 存储空间 中 这样 可以 保证 存储空间 的 有效 利用 并 减少 为 处理 冲突 而 耗费 的 时间 构造 散 列 函数 的 六种 方法 直接 定址法 数字 分析法 平方 取 中法 折叠 法 除 留 余数 法 随机数 法 处理 散 列 冲突 的 四种 方法 开放 定址法 再 散 列 函数 法 链 地址 法 公共 溢出 区 法 散 列表 性能 分析 a 散 列 函数 是否 均匀 散 列 函数 的 好坏 直接影响 着 出现 冲突 的 频繁 程度 由于 不同 的 散 列 函数 对 同一 组 随机 的 关键字 产生 冲突 的 可能性 是 相同 的 因此 可以 不 考虑 它对 平均 查找 长度 的 影响 b 处理 冲突 的 方法 相同 的 关键字 相同 的 散 列 函数 但 处理 冲突 的 方法 不同 会 使得 平均 查找 长度 不同 比如 线性 探测 处理 冲突 可能会 产生 堆积 显然 就 没有 二次 探测 法 好 而 链 地址 法 处理 冲突 不会 产生 任何 堆积 因而 具有 更佳 的 平均 查找 性能 c 散 列表 的 装填 因子 所谓 的 装填 因子 标志着 散 列表 的 装满 的 程度 当 填入 表 中 的 记录 越多 就 越大 产生 冲突 的 可能性 就越 大 比如 假设 散 列表 长度 是 而 填入 表 中 的 记录 个数 为 那么 此时 的 装填 因子 因此 再 填入 最后 一个 关键字 产生 冲突 的 可能性 就 非常 之大 也就是说 散 列表 的 平均 查找 长度 取决于 装填 因子 而 不是 取决于 查找 集合 中 的 记录 个数 不管 记录 个数 有 多大 我们 总 可以 选择 一个 合适 的 装填 因子 以便 将 平均 查找 长度 限 定在 一个 范围 之内 此时 我们 散 列 查找 的 时间 复杂度 就 真的 是 通常 我们 都是 将 散 列表 的 空间 设置 得 比 查找 集合 大 此时 虽然是 浪 费了 一定 的 空间 但 换来 的 是 查找 效率 的 大大 提升 总的来说 还是 非常 值得 的 第 十 一章 内部 排序 定义 排序 的 依据 是 关键字 之间 的 大小 关 即对 同一个 记录 集合 数据 集合 针对 不同 的 关键字 进行 排序 可以 得到 不同 的 序列 注 此处 的 关键字 可 以是 记录 的 主 关键字 也 可 以是 此 关键字 甚至 是 若干 数据项 的 组合 多个 关键 的 排序 最终 都可以 转 化为 单个 关键字 的 排序 比如 现在 要对 学生 的 成绩 进行 排序 排序 规 则为 按 总分 降序 排序 若 总分 分数 相同 按 主科 语 数 英 总 分数 进行 降序 排序 直接 的 思路 肯定是 先 进行 总分 排序 然后 遇到 总分 相同 的 就 进行 主科 总分 排序 但是 还可 以 使用 一个 技巧 来 实现 一次 排序 即可 完成 上述 组合 排序 问题 例如 把 总分 与 主科 总分 当成 字符串 首尾 拼 接到 一起 注意 如果 主科 成绩 不够 三位 则需 在前面 补零 比如 甲乙 两人 的 总分 都为 其中 甲 的 理科 总 分为 而 乙 的 理科 总 分为 则 甲 的 拼接 为 乙 的 拼接 为 比较 这两个 拼接 字符串 即可 直接 一次性 直到 乙 排在 甲 前面 乙 gt 甲 排序 的 稳定性 假设 且 在 排序 前 的 序列 中 领先于 如果 排序 后 则 称 所用 的 排序 方法 是 稳定 的 反之 若 可能 使得 排序 后 的 序列 中 则 称 所用 的 排序 方法 是 不稳定 的如 下图 所示 内 排序 amp 外 排序 据 在 排序 过程中 待 排序 的 记录 是否 全部 被 放置 在 内存 中 排序 分为 内 排序 和 外 排序 内 排序 是 在 排序 整个 过程中 待 排序 的 所有 记录 全部 被 放置 在 内存 中 内 排序 分为 插入排序 交换 排序 选择 排序 和 归并 排序 外 排序 是 由于 排序 的 记录 个数 太多 不能 同时 放置 在 内存 整个 排序 过程 需要 在内 外存 之间 多次 交互 数据 才能 进行 影响 内 排序 的 三个 方面 时间 性能 在内 排序 中 主要 进行 两种 操作 比较 和 移动 a 比较 是 指 关键字 之间 的 比较 这是 做 排序 最基本 的 操作 b 移动 是 指 记录 从一 个 位置 移 动到 另一个 位置 事实上 移动 可以 通过 改变 记录 的 存储 方式 来 予以 避免 高效率 的 内 排序 算法 应该是 具有 尽可能 少 的 关键字 比较 次数 和 尽可能 少 的 记录 移动 次数 辅助 空间 辅助 内存空间 是 除了 存放 待 排序 所 占用 的 存储空间 之外 执行 算法 所 需要 的 其他 存储空间 算法 的 复杂性 此处 指的是 算法 本身 的 复杂度 而 不是 指 算法 的 时间 复杂度 c 语 言中 的 十四种 内部 排序 算法 第 十二章 外部 排序 外部 排序 定义 外部 排序 指的是 大文件 的 排序 即 待 排序 的 记录 存储 在外 存储器 上 待 排序 的 文件 无法 一次 装入 内存 需要 在 内存 和 外部 存储器 之间 进行 多次 数据交换 以 达到 排序 整个 文件 的 目的 外部 排序 最 常用 的 算法 是 多路 归并 排序 即将 原文件 分解成 多个 能够 一次性 装入 内存 的 部分 分 别把 每 一部分 调入 内存 完成 排序 然后 对 已经 排序 的 子 文件 进行 多路 归并 排序 外部 排序 的 基本思路 按 可用内存 的 大小 把 外存 上 含有 n 个 记录 的 文件 分成 若干个 长度 为 l 的 子 文件 把 这些 子 文件 依次 读入 内存 并 利用 有效 的 内部 排序 方法 对 它们 进行 排序 再将 排序 后 得到 的 有序 子 文件 重新 写入 外存 对 这些 有序 子 文件 逐 趟 归并 使其 逐渐 由小到大 直至 得到 整个 有序 文件 为止 举例 假设有 一个 kb 的 文件 其中 存储 了 k 个 整数 磁盘 中 物理 块 的 大小 为 kb 将 文件 分 成组 每组 刚好 kb 首先 通过 次 内部 排序 把 组 数据 排好 序 得到 初始 的 个 归并 段 rr 每个 归并 段 有 个 整数 然后 对 这个 归并 段 使用 路 平衡 归并 排序 第 次 归并 产 生个 归并 段 rrrrr 其中 r 是 由 rrrr 中 的 数据 合并 而来 r 是 由 rrrr 中 的 数据 合并 而来 r 是 由 rrrr 中 的 数据 合并 而来 r 是 由 rrrr 中 的 数据 合并 而来 r 是 由 rr 中 的 数据 合并 而来 把 这个 归并 段 的 数据 写入 个 文件 第 次 归 并从 第 次 归并 产生 的 个 文件 中 读取 数据 合并 产 生个 归并 段 rr 其中 r 是 由 rrrr 中 的 数据 合并 而来 其中 r 是 由 r 中 的 数据 合并 而来 把 这个 归并 段 写入 个 文件 bardatbardat 第 次 归 并从 第 次 归并 产生 的 个 文件 中 读取 数据 合并 产 生个 归并 段 rr 是 由 rr 中 的 数据 合并 而来 把 这个 文件 写入 个 文件 foodat 此 即为 最终 排序 好 的 文件 外部 排序 算法 定义 外部 排序 算法 即要 借助 外部 存储器 对 数据 进行 排序 的 算法 包括 置换 平衡 归并 排序 算法 置换 选择 排序 算法 等 外部 排序 算法 的 实现 其实 就是 将 体积 大 的 数据 分割为 内存 容 得下 的 多 份 数据 然后 分别 使用 内部 排序 算法 进行 排序 最后 进行 整合 和 内部 排序 算法 不同 外部 排序 算法 的 主要 影响 因素 在于 读写 内存 的 次数 而 当 待 排序 的 文件 比 内存 的 可 使用 容量 还大 时 文件 无法 一次性 放到 内存 中 进行 排序 需要 借助于 外部 存储器 例如 硬盘 u盘 光盘 外部 排序 算法 由 两个 阶段 构成 按照 内存大小 将 大文件 分成 若干 长度 为 l 的 子 文件 l 应 小于 内存 的 可 使用 容量 然后 将 各 个子 文件 依 依次 读入 内存 使用 适当 的 内部 排序 算法 对 其 进行 排序 排好 序 的 子 文件 统 称为 归并 段 或者 顺 段 将 排好 序 的 归并 段 重新 写入 外 存为 下一 个子 文件 排序 腾出 内存空间 对 得到 的 顺 段 进行 合并 直至 得到 整个 有序 的 文件 为止 路 平衡 归并 举例 有 一个 含有 个 记录 的 文件 但是 内存 的 可 使用 容量 仅为 个 记录 毫无疑问 需要 使用 外部 排序 算法 具体 分为 两步 将 整个 文件 其 等 分为 个 临时文件 每个 文件 中含有 个 记录 然后 将 这个 文件 依次 进入 内存 采取 适当 的 内存 排序 算法 对 其中 的 记录 进行 排序 将 得到 的 有序 文件 初始 归并 段 移至 外存 对 得到 的 个 初始 归并 段 进行 如图 的 两两 归并 直至 得到 一个 完整 的 有序 文件 如图所示 有 个 初始 归并 段 到 一个 有序 文件 共进 行了 次 归并 每次 都由 m 个 归并 段 得到 m 个 归并 段 这种 归并 方式 被称为 路 平衡 归并 注意 此 例 中 采 用了 将 文件 进行 等分 的 操作 还有 不 等分 的 算法 注 意在 实际 归并 的 过程中 由于 内存容量 的 限制 不能 满足 同时 将 个 归并 段 全部 完整 的 读入 内存 进行 归并 只能 不断地 取 个 归并 段 中 的 每 一小部分 进行 归并 通过 不断地 读 数据 和 向 外存 写 数据 直至 个 归并 段 完成 归并 变为 个 大 的 有序 文件 对于 外部 排序 算法 来说 影响 整体 排序 效率 的 因素 主要 取决于 读写 外存 的 次数 即 访问 外存 的 次数 越多 算法 花费 的 时间 就 越多 效率 就越 低 计算机中 处理 数据 的 为 中央处理器 cpu 如若 需要 访问 外存 中 的 数据 只能 通过 将 数据 从 外存 导入 内存 然后 从 内存 中 获取 同时 由于 内存 读写 速度快 外存 读写 速度慢 的 差异 更加 影 响了 外部 排序 的 效率 路 归并 对于 同一个 文件 来 说对 其 进行 外部 排 序时 访问 外存 的 次数 同 归并 的 次数 成正比 即 归并 操作 的 次数 越多 访问 外存 的 次数 就 越多 图中 使用 的 是 路 平衡 归并 的 方式 举一反三 还可 以 使用 路 归并 路 归并 甚至 是 路 归并 的 方式 图为 路 归并 的 方式 对比 图 和 图 可以 看出 对于 k 路 平衡 归并 中 k 值得 选择 增加 k 可以 减少 归并 的 次数 从而 减少 外存 读写 的 次数 最终 达到 提高 算法 效率 的 目的 除此之外 一般 情况下 对于 具有 m 个 初始 归并 段 进行 k 路 平衡 归并 时 归并 的 次数 为 slogkm 其中 s 表示 归并 次数 从 公式 上 可以 判断 出 想要 达到 减少 归并 次数 从而 提高 算法 效率 的 目的 可以 从 两个 角度 实现 增加 k 路 平衡 归并 中 的 k 值 尽量 减少 初始 归并 段 的 数量 m 即 增加 每个 归并 段 的 容量 其 增加 k 值 的 想法 引申 出了 一种 外部 排序 算法 多路 平衡 归并 算法 增加 数量 m 的 想法 引申 出了 另一种 外部 排序 算法 置换 选择 排序 算法 多路 平衡 归并 排序 胜者 树 败者 树 算法 引入 但是 经过 计算 得知 如果 毫无 限度 地 增加 k 值 虽然会 减少 读写 外存 数据 的 次数 但会 增加 内部 归并 的 时间 得不偿失 为了 避免 在 增加 k 值 的 过程中 影响 内部 归并 的 效率 在 进行 k 路 归并 时 可以 使用 败者 树 来 实现 该 方法 在 增加 k 值 时 不会 影响 其 内部 归并 的 效率 败者 树 实现 内部 归并 败者 树 是 树形 选择 排序 的 一种 变形 本身 是 一棵 完全 二叉树 胜者 树 在 树形 选择 排序 一节 中 对于 无序 表 创建 的 完全 二叉树 如图所示 构建 此树 的 目的 是 选出 无序 表 中 的 最小值 这棵 树 与 败者 树 正好 相 反是 一棵 胜者 树 因为 树 中 每个 非 终端 结点 除 叶子 结点 之外 的 其它 结 点中 的 值 都 表示 的 是 左右 孩子 相比 较后 的 较小 值 谁 最小 即为 胜者 例如 叶子 结点 和 相 对比 由于 更小 所 以其 双亲 结 点中 的 值 保留 的 是 胜者 然后 用去 继续 同 上层 去 比较 一直 比较 到 树 的 根 结点 败者 树 而 败者 树 恰好相反 其 双亲 结点 存储 的 是 左右 孩子 比较 之后 的 失败者 而 胜利者 则 继续 同 其它 的 胜者 去 比较 胜者 树 和 败者 树 的 区别 就是 胜者 树 中 的 非 终端 结 点中 存储 的 是 胜利 的 一方 败者 树 中 的 非 终端 结点 存储 的 是 失败 的 一方 而在 比较 过程中 都是 拿 胜者 去 比较 如图所示 为 一棵 路 归并 的 败者 树 其中 bb 为 树 的 叶子 结点 分别为 个 归并 段 中 存储 的 记录 的 关键字 ls 为 一维 数组 表示 的 是非 终端 结点 其中 存储 的 数值 表示 第几 归并 段 例如 b 为 第 个 归并 段 ls 中 存储 的 为 最终 的 胜者 表示 当前 第 归并 段 中 的 关键字 最小 当 最终 胜者 判断 完成后 只需要 更新 叶子 结点 b 的 值 即 导入 关键字 然后 让 该 结点 不断 同 其 双亲 结点 所 表示 的 关键字 进行 比较 败者 留在 双亲 结 点中 胜者 继续 向上 比较 注意 为了 防止 在 归并 过程中 某个 归并 段 变为 空 处理 的 办法 为 可以 在 每个 归并 段 最后 附加 一个 关键字 为 最大值 的 记录 这样 当 某一 时刻 选出 的 冠军 为 最大值 时 表明 个 归并 段 已 全部 归并 完成 因为 只要 还有 记录 最终 的 胜者 就不 可能是 附加 的 最大值 败者 树 内部 归并 的 具体 实现 表示 非 终端 结点 由 于是 完全 二叉树 所以 可以 使用 一维 数组 来 表示 表示 败者 树 的 叶子 结点 aa 为 个 初始 归并 段 用于 模拟 从 初始 归并 段 中 读入 记录 时 使用 intttttt 沿 从 叶子 结点 bs 到 根 结点 ls 的 路径 调整 败者 树 voidadjust losertreelsints intt sk while tgt 判断 每一个 叶子 结点 同 其 双亲 结 点中 记录 的 败者 的 值 相比较 调整 败者 的 值 其中 s 一直 表示 的 都是 胜者 if bskeygtblstkey 最 终将 胜者 的 值 赋 给 lslss 创建 败者 树 losertreels bkkeyminkey 设置 ls 数组 中 败者 的 初始值 for intiiltki lsik 对于 每一个 叶子 结点 调整 败者 树 中非 终端 结 点中 记录 败者 的 值 for intikigti adjust lsi 模拟 从 外存 向 内存 读入 初始 归并 段 中 的 每 一小部分 voidinput inti switch i caseif tlt tlt tlt tlt tlt 败者 树 的 建立 及 内部 归并 voidkmerge losertreels 模拟 从 外存 中 的 个 初始 归并 段 中 向 内存 调取 数据 for intiiltki input i 创建 败者 树 createlosertree ls 最终 的 胜者 存储 在 is 中 当 其 值 为 maxkey 时 证明 个 临时文件 归并 结束 while blskeymaxkey 输出 过程 模拟 向 外存 写 的 操作 printf dblskey 继续 读入 后续 的 记录 input ls 根据 新 读入 的 记录 的 关键字 的 值 重新 调整 败者 树 找出 最终 的 胜者 adjust lsls intmain ls return 运行 结果 置换 选择 排序 算法 引入 上 一节 介绍 了 增加 k 路 归并 排序 中 的 k 值 来 提高 外部 排序 效率 的 方法 而 除此之外 还有 另外 一条路 可 走 即 减少 初始 归并 段 的 个数 也 就是 本章 第一节 中 提到 的 减小 m 的 值 m 的 求值 方法 为 mnln 表示 为 外部 文件 中 的 记录 数 l 表示 初始 归并 段 中 包含 的 记录 数 如果 要想 减小 m 的 值 在 外部 文件 总 的 记录 数 n 值 一定 的 情况下 只能 增加 每个 归并 段 中所 包含 的 记录 数 l 而 对于 初始 归并 段 的 形成 就不能 再 采 用上 一章 所 介绍 的 内部 排序 的 算法 因为 所有 的 内部 排序 算法 正常 运行 的 前提 是 所有 的 记录 都 存在于 内存 中 而 内存 的 可 使用 空间 是 一定 的 如果 增加 l 的 值 内存 是 盛 不下 的 图解 例如 已知 初始 文件 中 总共有 个 记录 假设 内存 工作 区 最多 可 容纳 个 记录 按照 之前 的 选择 排序 算法 最少 也 只能 分为 个 初始 归并 段 而 如果 使用 置换 选择 排序 可以 实 现将 个 记录 分为 个 初始 归并 段 如图所示 操作过程 置换 选择 排序 算法 的 具体 操作过程 为首 先从 初始 文件 中 输入 个 记 录到 内存 工作 区 中 从 内存 工作 区 中选 出 关键字 最小 的 记录 将其 记为 minimax 记录 然后 将 minimax 记录 输 出到 归并 段 文件 中 此时 内存 工作 区 中 还 剩余 个 记录 若 初始 文件 不为 空 则从 初始 文件 中 输入 下一个 记 录到 内存 工作 区 中 从 内存 工作 区 中 的 所 有比 minimax 值 大 的 记录 中 选出 值 最小 的 关键字 的 记录 作为 新 的 minimax 记录 重复 过程 直至 在 内存 工作 区 中选 不 出新 的 minimax 记录 为止 由此 就得 到了 一个 初始 归并 段 重复 直至 内存 工 作为 空 由此 就可以 得到 全部 的 初始 归并 段 拿 图中 的 初始 文件 为 例 首先 输入 前个 记 录到 内存 工作 区 其中 关键字 最小 的 为 所以 选 其为 minimax 记录 同时 将其 输 出到 归并 段 文件 中 如 下图 所示 此时 初始 文件 不为 空 所以 从中 输入 下一个 记 录到 内存 工作 区 中 然后 从 内存 工作 区 中 的 比大 的 记录 中 选择 一个 最小值 作为 新 的 minimax 值 输 出到 归并 段 文件 中 如 下图 所示 初始 文件 还 不为 空 所以 继续 输入 到 内存 工作 区 中 从 内存 工作 区 中 的 所有 关键字 比大 的 记录 中 选择 一个 最小值 作为 新 的 minimax 值 输 出到 归并 段 文件 中 如 下图 所示 如此 重复性 进行 直至 选 不出 minimax 值 为止 如 下图 所示 当选 不出 minimax 值 时 表示 一个 归并 段 已经 生成 则 开始 下一个 归并 段 的 创建 创建 过程 同 第一个 归并 段 一样 在 上述 创建 初始段 文件 的 过程中 需要 不断地 在 内存 工作 区 中 选择 新 的 minimax 记录 即 选择 不小于 旧 的 minimax 记录 的 最小 值此 过程 需要 利用 败者 树 来 实现 同上 一节 所 用到 的 败者 树 不同 的 是 在 不断 选择 新 的 minimax 记录 时 为了 防止 新 加入 的 关键字 值 小 的 的 影响 每个 叶子 结点 附加 一个 序号 位 当 进行 关键字 的 比较 时 先 比较 序号 序号 小 的 为 胜者 序号 相同 的 关键字 值 小 的 为 胜者 置换 选择 排序 算法 的 具体 实现 归并 段 结束 标志 definew 内存 工作 区 可 容纳 的 记录 个数 definen 设 文件 中含有 的 记录 的 数量 定义 关键字 类型 为 整型 记录 类型 关键字 项 败者 树 是 完全 二叉树 且 不含 叶子 可采用 顺序 存储 结构 记录 keytypekey 从 记录 中 抽取 的 关键字 intrnum 所属 归并 段 的 段 号 从 waq 起到 败者 树 的 根 比较 选择 minimax 记录 并由 q 指示 它 所在 的 归并 段 voidselect tminimax intpstlst 为 q 的 双亲 节点 p 作为 中介 for t wq plsttgtttplst 段 号 小者 或者 段 号 相等 且 关键字 更小 的 为 胜者 if sqqlstq 指示 新 的 胜利者 lstslsq 最后 的 冠军 输入 w 个 记 录到 内存 工作 区 wa 建 得 败者 树 ls 选出 关键字 最小 的 记录 并由 s 指示 其 在 wa 中 的 位置 intifor iiltwi iwigti fread ampwairecsizeof redtype fi 输入 一个 记录 waikeywaireckey 提取 关键字 wairnum 其 段 号为 selectminimax lswai 调整 败者 树 求得 一个 初始 归并 段 fi 为 输入 文件 指针 fo 为 输出 文件 指针 voidgetrun 选得 的 minimax 记录 属 当 前段 时 while walsrnumrc qlsq 指示 minimax 记 录在 wa 中 的 位置 minimaxwaqkey 将 刚 选得 的 minimax 记录 写入 输出 文件 fwrite ampwaqrecsizeof redtype fo 如果 输入 文件 结束 则 虚设 一条 记录 属 rmax 段 if feof fi 输入 文件 非 空 时 从 输入 文件 读入 下一 记录 fread ampwaqrecsizeof redtype fi waqkeywaqreckey 提取 关键字 if waqkeyltminimax 新 读入 的 记录 比上 一轮 的 最小 关键字 还 小则 它 属下 一段 新 读入 的 记录 大 则 属 当 前段 waqrnumrc 选择 新 的 minimax 记录 selectminimax lswaq 在 败者 树 ls 和 内存 工作 区 wa 上 用 置换 选择 排序 求 初始 归并 段 初建 败者 树 constructloser lswafi rcrmaxrc 指示 当前 生成 的 初始 归并 段 的 段 号 rmax 指示 wa 中 关键字 所属 初始 归并 段 的 最 大段 号 while rcltrmax rcrmax 标志 输入 文件 的 置换 选择 排序 已 完成 求得 一个 初始 归并 段 getrun fwrite ampjsizeof redtype fo 将 段 结束 标志 写入 输出 文件 rcwalsrnum 设置 下一 段 的 段 号 voidprint redtypet printf dtkey intmain 输入输出 文件 losertreels 败者 树 workareawa 内存 工作 区 intikfofopen oriwb 准备 对 ori 文本文件 进行 写 操作 将 数组 a 写入 大文件 orifwrite asizeof redtype nfo fclose fo 关闭 指针 fo 表示 的 文件 fifopen orirb 准备 对 ori 文本文件 进行 读 操作 printf 文件 中 的 待 排序 记录 为 n for iiltni 依次 将 文件 ori 的 数据 读入 并 赋值 给 bfread ampbsizeof redtype fi print b printf n rewind fi 使 fi 的 指针 重新 返回 大文件 ori 的 起始 位置 以便 重新 读入 内存 产生 有序 的 子 文件 fofopen outwb 用 置换 选择 排序 求 初始 归并 段 lswafifo fclose fo fclose fi fifopen outrb printf 初始 归并 段 各为 n dokfread ampbsizeof redtype fi 读 fi 指针 指向 的 文件 并将 读 的 记录 赋值 给 b 整个 操作 成功 与否 的 结果 赋值 给 kif k if bkeymaxkey 当 其 值 等于 最大值 时 表明 当前 初始 归并 段 已经 完成 printf nn continueprint b while k return 运行 结果 为 文件 中 的 待 排序 记录 为 初始 归并 段 各为 最佳 归并 树 思考 本节 带领 大家 思考 一个 问题 无论是 通过 等分 还是 置换 选择 排序 得到 的 归并 段 如何 设置 它们 的 归并 顺序 可以 使得 对 外存 的 访问 次数 降到 最低 举例 参考 例如 现有 通过 置换 选择 排序 算法 所 得到 的 个 初始 归并 段 其 长度 分别为 在对 其 采用 路 平衡 归并 的 方式 时 可能 出现 如图所示 的 情况 提示 图中 的 叶子 结点 表示 初始 归并 段 各自 包含 记录 的 长度 用 结点 的 权 重来 表示 非 终端 结点 表示 归并 后 的 临时文件 假设在 进行 平衡 归并 时 操作 每个 记录 都 需要 单独 进行 一次 对 外存 的 读写 那么 图中 的 归并 过程 需要 对 外存 进行 读 或者 写 的 次数 为 图中 涉及 到了 两次 归并 对 外存 的 读 和 写 各 进行 次 从 计算结果 上 看 对于 图中 的 叉 树 来讲 其 操作 外存 的 次数 恰好是 树 的 带 权 路径 长度 的 倍 对于 如何 减少 访问 外存 的 次数 的 问题 就等 同于 考虑 如何 使 k 路 归并 所 构成 的 k 叉 树 的 带 权 路径 长度 最短 若想 使 树 的 带 权 路径 长度 最短 就是 构造 赫 夫 曼 树 只要 其 带 权 路径 长度 最短 亦 可以 称为 赫 夫 曼 树 若 对 上述 个 初始 归并 段 构造 一棵 赫 夫 曼 树 作为 归并 树 如图所示 依照 图 所示 其 对 外存 的 读写 次数 为 通过 以 构建 赫 夫 曼 树 的 方式 构建 归并 树 使其 对 读写 外存 的 次数 降至 最低 k 路 平衡 归并 需要 选取 合适 的 k 值 构建 赫 夫 曼 树 作为 归并 树 所以 称 此 归并 树 为 最佳 归并 树 虚 段 的 归并 树 引入 上述 图 中所 构建 的 为 一颗 真正 的 叉 树 树 中 各 结点 的 度 不是 就是 而 若 个 初始 归并 段 改为 个 在做 路 平衡 归并 的 时候 就需要 有 一个 结点 的 度 为 对于 具体 设置 哪个 结点 的 度 为 为了 使 总 的 带 权 路径 长度 最短 正确 的 选择 方法 是 附加 一个 权 值 为 的 结点 称为 虚 段 例如 图中 若 去掉 权 值 为 的 结点 其 附加 虚 段 的 最佳 归并 树 如图所示 注意 虚 段 的 设置 只是 为了 方便 构建 赫 夫 曼 树 在 构建 完成后 虚 段 自动 去掉 即可 如何 判断 是否 需要 增加 虚 段 以及 增加 多少 虚 段 在 一般 情况下 对于 k 路 平衡 归并 来说 若 m mod k 则不 需要 增加 虚 段 否 则需 附加 k m mod k 个 虚 段 为了 提高 整个 外部 排序 的 效率 本章 分 别从 以上 两个方面 对 外部 排序 进行了 优化 在 实 现将 初始 文件 分为 m 个 初始 归并 段 时 为了 尽量 减小 m 的 值 采用 置换 选择 排序 算法 可 实 现将 整个 初始 文件 分为 数量 较少 的 长度 不等 的 初始 归并 段 同时 在 将 初始 归并 段 归 并为 有序 完整 文件 的 过程中 为了 尽量 减少 读写 外存 的 次数 采用 构建 最佳 归并 树 的 方式 对 初始 归并 段 进行 归并 而 归并 的 具体 实现 方法 是 采用 败者 树 的 方式 十三 文件 