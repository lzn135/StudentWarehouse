cocoscreator 发展趋势 与 感悟 先 分享 一个 故事 爱丽丝 镜中 世界 奇遇记 里 讲到 爱丽丝 遇 见了 红桃 皇后 红桃 皇后 牵着 她 的 手 往前 跑 但是 不管 她们 跑得 多快 一直 跑到 精疲力尽 最后 还是 停留在 原地 爱丽丝 说 要是 在 我们 国家 像 这样 奔跑 一 定会 跑到 一个 新 的 地方 红桃 皇后 不屑 地 说 那 你们 是 慢吞吞 的 国家 在 我们 这个 世界 你 要想 待在 原地 就得 使出 全身 力量 拼命 跑 转眼之间 就 要到 年底 了 回首 这一 年 shawn 使用 cocoscreator 引擎 开发 游戏 项目 已经 快 一年 了 依 仗着 之前 cocosdjs 经验 老本 目前 在 creator 平台 上 过渡 的 还算 顺利 自从 月 日 的 cocos 沙龙 期间 认识了 不少 cocos 的 高手 引擎 组 的 大 咔 们 了解 到 更多 的 creator 发展 趋 试探 讨了 游戏 开发 中 的 问题 结合 当下 自己 的 工作情况 又有 了 不少 的 思考 和 感悟 一 creator 重磅 来袭 creator 最大 的 亮点 是 jsbjsb 的 本质 是 底层 javascript 引擎 的 更新换代 回想 过去 shawn 是 在 年月 开始 接触 cocosdjs 直到现在 的 creator 版本 spidermonkey 为 cocos 服役 超 过了 年 现在 终于 要 谢幕 了 jsbjsb 迎来 的 是 两大 超级 明 星级 v 与 与 ios 使用 与 android 使用 vjs 引擎 的 变化 对 cocos 项目 的 影响 在 native 上 js 层 的 运算 性能 有 翻倍 提 升在 native 上有 更 丰富 的 调试 方法 更精 准 定位 问题 的 手段 我 觉得 这一点 对 程序员 很重 要 因为 找 问题 比 改正 问题 花费 更多 的 时间 有 了 先进 的 调试 手段 有利于 加速 bug 的 定位 native 与 h 环境 的 js 引擎 环境 更加 的 一 至 了 在 开发 体验 上 更加 接近 旧 的 cocos 项目 如果 之前 编 写了 jsb 绑定 相关 的 代码 要 升级到 jsb 需要 重新 编写 绑定 代码 在此 献上 官方 出口 的 jsb 绑定 教程 二 assetbundle 隐形 的 翅膀 在 cocos 沙龙 上 assetsbundle 虽然 只有 三行 文字 的 介绍 但 了解 到 这一 未来 特性 的 第一 瞬间 就被 它 吸引 了 随后 让 我 想起 一两 前年 国内 各大 引擎 的 runtime 运行时 当年 国内 三大 游戏 引擎 纷纷 将 runtime 置入 腾讯 qq 浏览器 号称 超级 app 的 到来 原生 游戏 也 能 点开 即 玩 那时 感觉 完全是 进 入了 h 的 春天 我 当时 的 项目 做的 都不好 有人 转 ud 或 lua 我 转了 一圈 还是 决心 留在 cocosdjs 的 阵营 后来 不知道 为什么 runtime 没怎么 火 的 起来 反而是 h 势头 越来越 猛 把 话题 扯 远了 还是 回到 assetsbundle 上来 我 觉得 assetsbundle 会不会 更加 模糊 原生 游戏 与 h 游戏 两者 都是 将 代码 和 资源 放到 远程 服务器 动态 加载 运行 而且 其中 还有 一句 关键 跨 项目 联动 不同 项目 共享 assetsbundle 资源 那 不是 可以 将 游戏 内容 转变成 一种 云 服务 呢 大家 共享 如果 assetsbundle 真的 能将 资源 粒度 控制 的 非常 精确 那 原生 游戏 也 具备 h 的 特性 同时 还有 h 不具备 的 流畅 体验 那 问题 又 来了 那 cocos 原生 游戏 是否 不再 用为 热 更新 烦恼 了 呢 想到 这些 小 心脏 有点 受不了 赶 快写 两行 代码 压 压惊 所有 的 cocos 游戏 都 成了 超级 app 假想 一下 会不会 出现 一种 游戏 sdk 就是 制作 一个 sdk 里面 集 成了 当 app 接 入了 这个 sdk 后 这个 sdk 会 从 远程 获取 游戏 代码 和 资源 assetbundle 会不会 像 一双 隐形 的 翅膀 带着 我们 飞翔 带来 更多 的 希望 三 d 与 d 在 沙龙 上 cocos 引擎 jare 大神 在 ppt 中 还 分享 了 一个 cocos 的 高亮 特性 请看 下图 引入 材质 系统 shawn 做 游戏 的 时间 不长 可在 cocos 中 只 听说过 纹理 从来没有过 材质 的 概念 纹理 与 材质 是什么 关系 虽然 没吃过 猪肉 但 还是 见过 猪 跑 家里 的 游戏机 还是 有 两台 在 d 游 戏中 还是 听说过 的 材质 但是 没有 清晰 的 概念 为此 我 在 知 乎 上 搜索 了 一翻 作者 周 华 纹理 即 纹路 每个 物体 表面上 不同 的 样子 譬如说 木头 的 木纹 状 贴图 是 图 最 简单 的 形式 是 ps 之类 的 软件 做出来 的 一张 图 这些 图 在 d 中 用来 贴到 物体 的 表面 用来 表现 物体 的 纹理 材质 主 要是 用来 表现 物体 对光 的 交互 反射 折射 等 性质 的 譬如 金属 对光 的 反射 和 毛毯 对光 的 反射 性质 完全 不一样 那么 对 d 程序 来说 这样 的 差别 就 通过 材质 这个 属性 来 计算出 不同 的 颜色 通过 上面 的 解释 一下子 就 明白 了 感情 是 要在 d 引擎 中 引入 光照 功能 实质 是 将 d 游戏 的 特性 引入 d 中 再回 过头 看看 标题 重写 渲染 层 这是 在为 cocosd 铺路 的 节奏 吗 四 javascript 与 typescript 在 使用 creator 做 项目 之初 我 就 一直 坚持 使用 javascriptes 语法 不仅 代码 更加 简洁 而且 这是 未来 发展 的 方向 jsb 带 来了 新 的 js 引擎 对 新 javascript 新 语法 的 支持 更是 不言而喻 新旧 javascript 语法 混合 但在 短期内 新旧 js 语法 将 会在 项 目中 混合 使用 代码 风格 的 统一 上会 出现分歧 有些 守旧 的人 看不懂 新 语法 不愿意 使用 而 有些人 喜欢 冒险 的人 则 鄙视 旧 语法 不过 目前 通过 creator 的 内置 的 bable 编译器 抹 平了 语法 上 的 问题 输出 的 代码 最终 影响 不大 总的说来 接受 和 学习 新一代 的 js 语法 是 大势所趋 就从 提高 开发 效率 和 代码 质量 都是 值得 的 不过 习惯 不是 那么 容易 被 改变 的如 果有 心想 想在 项目 中 使用 新 的 语法 统一 代码 风格 eslint 是 一个 极佳 的 工具 可以 尝试 用用 typescript 让 人 心动 这一 年 使用 js 做 creator 项目 也有 不少 体验 感悟 特别是 观察到 刚 入行 的 新手 不管是 js 语言 本身 还是 ide 对 js 的 支持 都 成为 新手 成长 速度 较大 的 障碍 creator 从 开始 支持 typescript 语言 shawn 之前 也 学习 过 一阵 但 没有 在 项 目中 实战 过 自从 在 cocos 论坛 上 看到 有 网友 晒 出 用 ts 写 代码 的 视频 心里 有 痒痒 的如 果有 兴趣 可通过 下面 链接 了解 说不定 会 让 你 爱上 写 代 程序 我 认为 ts 至少 可以 帮我 解决 js 下面 两个 问题解决 在 ide 工具 中 的 代码 提示 问题 js 代码 在 ide 中 的 提示 较弱 这是 新手入门 时 很大 一个 槛 一个 组件 有 那些 属性 方法 需要 强行 记忆 还 容易 写错字 ts 动静 结合 在 编码 时 的 智能 提示 相当 精确 同时 对 老手 也 能 提高 代码 生产 速度 解决 数据类型 问题 js 在 数据 定义 参数 传递 时 没有 类型 限制 ts 则 像 java 这类 静态 语言 上有 强制 的 数据类型 匹配 这 可以 减少 在运 行时 属性 不存在 对象 字段 写错字 的 问题 ts 是 js 的 超 集 而且 在 creator 中 可以 js 与 ts 混用 可以 尝试 在 新 的 底层 代码 中用 ts 上层 代码 不管是 用 js 还是 ts 都可以 在 ide 中 提供 确 精 的 智能 提示 从而 提高 开发 效率 再由 星星之火 蔓延到 整个 项目 最好 是 能让 项目 让 团队 能 火 起来 五 团队 与 项目 我 遇到 的 大多数 团队 美术 与 策划 几乎 都不 愿意 去 用 游戏 引擎 会 熟练 使用 引擎 去 编辑 ui 的 并不多 对于 美术 人员 来说 编辑 动画 比 编辑 ui 更 容易 ui 界面 的 生产 问题 我 所 体验到 的 项目 工作流 还没有 达到 上图 所示 中 的 那样 美好 境界 美术 拼接 ui 程序员 完成 组件 代码 的 挂接 我 理想 的 情况 是 将 用户 界面 中 的 ue 和 布局 部分 交由 策划 做 第一轮 将 界面 的 美化 赋 图 精确 位置 等 交由 美术 做 第二 道 加工 最 后由 程序 做 节点 的 层 节 调整 命名 等 需 要与 代码 交互 相关 的 操作 要做到 这些 需要 整个 团队 具有 极强 的 协同 能力 如果 协作 的 不好 可能 还 不如 交由 程序员 来 完成 可怜 的 程序 猿 们 还是 有些 不甘心 团队 中 如果能 培养 一名 会 游戏 ui 编辑 的 美术 或 策划 能将 ui 与 程序 建立 链 接在 程序 开始 一个 功能 前 将 场景 和 预制件 提前 准备好 这将 极 大地 为 程序员 们 节省时间 也 为 是 项目 节 省出 时间 很多 时候 我们 是为了 完成任务 而 工作 大多 并没有 思 考过 各种 资源 组合 的 可能性 有时候 慢 一点 反思 一下 说不定 会 找到 更优 的 解法 资源管理 问题 我 一直 认为 游戏 项 目中 的 资源管理 是 重中之重 整合 策划 美术 程序 输出 的 资源 是 游戏 团队 人员 每天 要做 的 事情 如 何能 高效 地 整合 游戏 开发 中 的 这 三 驾 马车 是 值得 深入研究 的 课题 策划 文档 配置 美术 图片 动画 程序代码 工具 在 我 的 游戏 开发 体验 中 我 觉得 程序 应该 主动 利用 代码 和 工具 为 项目 流程 增加 自动化 处理 将 人工 重复劳动 从中 解放出来 策划 产品 经理 应该 站在 更高 的 层次 发现 流程 中 的 痛 点 想办法 优化 流程 减少 部门 之间 的 沟通 成本 六 结语 不论是 cocos 的 升级 与 发展 还是 jsts 语言 上 的 进化 再到 项目 和 团队 都让 我 感受到 当下 世界 发展 之 快 所有 的 事物 都用 尽全力 去 奔跑 正如 开篇 故事 中 红桃 皇后 所说 的 在 我们 这个 世界 你 要想 待在 原地 就得 使出 全身 力量 拼命 奔跑 欢迎 关注 奎 特 尔 星球 微 信 公众 号 有 代码 有 教程 有 视频 有 故事 一 起来 玩吧 