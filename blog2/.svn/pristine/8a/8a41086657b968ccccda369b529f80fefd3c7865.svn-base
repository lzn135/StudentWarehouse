低效 编码 一个 responsebody 注解 没 加 让 我 这个 菜鸟 原形毕露 您好 我 是 码 农 飞 哥 感谢您 阅读 本文 如果 此文 对 您 有所 帮助 请 毫不犹豫 的 一键 三连 吧 小伙伴 们 有 啥 想看 的 想问 的 欢迎 积极 留言 告诉我 喔 今天是 月 日 太阳 依然 比我 起 的 更早 一些 点 半 闹铃 准时 响起来 一把 将我 从 黄粱美梦 中 拉回 到了 现实 中 来 我 猛地 从 床上 弹起来 枕边 没人 害 可怜 人儿 急匆匆 洗漱 完 挂 上工 牌 背起 小米 双肩包 穿上 那件 心爱 的 格子 衫 就 开启 了 一天 的 搬 砖 之旅 文章 目录 开心 编码 苦苦 寻找 思考 升华 为啥 页面 报了 的 错误 但是 控制台 没有 错误 日志 呢 为啥 不加 responsebody 注解 接口 会报 的 错误 呢 总结 参考 开心 编码 事情 是 这样 的 我 在用 springboot 框架 搭建 的 项目 上 写了 一个 新增 用户 的 接口 接口 地址 是 vusertest 代码 如下 所示 demo 版 非生产 代码 简单 到 不能 再 简单 的 一个 接口 像 这样 的 接口 我 都 记不清 自己 已经 写了 多少个 了 新增 用户 的 接口 requestmapping vusertest userusernewuser usersetusername username usersetpassword password returnuser 接口 写好 之后 我 没有 多想 就 启动 项目 开始 调试 代码 我 熟练 的 在 chrome 浏览器 上 输 入了 这个 地址 然后 点击 回车 没想到 的 是 页 面上 提示 了 一个 的 错误 这是 怎么回事 呢 我 这 接口 地址 没 有错 呀 为啥 找不到 接口 呢 奇 了 怪了 我 火急火燎 的 跑到 控制台 看看 有没有 错误 日志 让 我 很 失望 啥 错误 都没有 输出 过滤器 也 准确 的 把 我 的 输入 的 请求 地址 打印 出 来了 苦苦 寻找 为啥 页面 报了 的 错误 而 控制台 没有 任何 错误 输出 呢 实在是 有点 诡异 问 同事 嘛 又不 好意思 自己 好歹 是 个 高级 开发 工程师 的 问题 都 搞不定 实在是 说不过去 三十六计 走 为 上 看看 其他 的 正常 的 接口 是 怎么 写 的 然后 我 找 到了 这样 一个 接口 这个 接口 是 可以 正常 访问 的 vusertestupdate useruser user 哦哦哦 我 突然 恍然大悟 原来是 没有 在 接 口上 添加 responsebody 注解 我 印象中 这个 注解 可以 将 返回 的 对象 序列 化成 json 字符串 并 放在 响应 体 中 但是 跟 接口 地址 又有 啥 关系 呢 抱着 试试看 的 态度 我 在 接 口上 加 上了 responsebody 注解 代码 就不 列 举了 太 简单 了 不好意思 列举 再次 访问 这个 地址 接口 可以 正常 返回 数据 了 当然 如果 该类 下 所有 的 接口 都是 返回 applicationjson 格式 数据 的 接口 则 可以 直接 将 类 上 的 controller 注解 替换成 restcontroller 注解 restcontroller 注解 是 一个 组合 注解 是 由 controller 注解 和 responsebody 注解 组成 思考 升华 至此 问题是 解决 了 但是 心中 的 小 问号 还 萦绕在 心头 为啥 页面 报了 的 错误 但是 控制台 没有 错误 日志 呢 为啥 不加 responsebody 注解 接口 会报 的 错误 呢 知道 的 小伙伴 可以 在 下方 评论 留言 哦 并且 直接 略过 下面 的 内容 因为 你们 太 牛 逼了 有 问题 咱们 就 解决问题 而 不是 解决 提出问题 的人 喔 哈哈哈哈 为啥 页面 报了 的 错误 但是 控制台 没有 错误 日志 呢 为啥 出现 了 的 异常 但是 控制台 没有 错误 的 日志 输出 呢 这个 就很 奇 怪了 这个 问题是 我们 首先 需要 解决 的 不然 不知道 具体 的 错误 是 啥 就 很难 定位 到 问题 根据 已经 掌握 springmvc 的 知识 我们 在 页面 输入 一个 url 之后 请求 首先 会到 然后 会 根据 url 去 handelmapping 中找到 能 处 理该 请求 的 handler 如果 找不到 的话 则会 报错 的 错误 所以 猜测 springboot 抛出 的 是 这个 异常 现在 的 问题 就是 为啥 这个 没 输出 呢 一番 百度 之后 我 发现 只需 要在 配置文件 applicationyml 中 添加 如下 配置 即可 springmvc 允许 抛出 禁用 资源 映射 加上 这两个 配置 之后 在 访问 接口 的话 控制台 就会 打 印出 如下 的 错误 日志 我们 看到 在 查找 mapping 时 url 就 变 成了 vuservusertest 不是 我们 期待 的 vusertest 说明 加上 禁用 资源 映射 之后 可以 输出 中 的 类 配置 默认 资源 映射 地址 是 即使 你 的 地址 错误 也 会 匹 配到 这个 静态 资源 映射 地址 就不会 进入 nohandlerfound 方法 自然 不会 抛出 了 异常 终于 暴露出 来了 接下来 就是 处理 异常 了 为啥 不加 responsebody 注解 接口 会报 的 错误 呢 要想 回答 这个 问题 还是 要 回到 responsebody 注解 的 作用 上面 一番 苦苦 的 搜索 之后 我 终于 发现了 答案 responsebody 注解 的 作用 就是 将 controller 返回 的 对象 通过 适当 的 转 换为 指定 的 格式 写入 到 response 对象 的 body 数据 区 中 返回 给 前端 页面 如果 没 有加 这个 注解 只有 requestmapping 这个 注解 的话 则 返回值 通常 解析 为 跳转 路径 控制器 返回 的 时候 路径 会 变为 在当 前 路径 的 上一级 路径 上 追加 路径 然后 返回 的 过程 找不到 对应 的 视图 导致 的 错误 这 只是 理论 实际上 是不是 这 样子 的 呢 还需要 我们 验证 一下 不加 responsebody 则 默认 会 返回 一个 视图 如 下图 所示 返回 一个 名为 的 视图 requestmapping vusertest 即 会 访问 static 目 录下 的 helloworldhtml 页面 访问 结果是 页面 可以 正常 的 跳转 说明 不 加上 responsebody 注解 确实 会 默认 返回 一个 视图 这是 正常 的 能 找到 页面 的 视图 如果 返回 一个 不存在 的 视图 会 怎样 呢 requestmapping vusertest returncode 打印 出来 的 路径 是 vusercode 即 vusertest 的 上级 路径 vusercode 说明 上面 的 理论 解释 是 没有问题 的 总结 本文 从 实际 开发 中一 个 很小 的 问题 入手 层层 分析 问题 的 根源 知其然 更要 知 其 所以然 总之 一句话 总结 responsebody 注解 的 作用 就是 将 返回 的 结果 通过 转 换为 指定 格式 并 放在 响应 体 中 没有 它 的话 springboot 会 默认 返回 一个 视图 参考 responsebody 注解 解决 springboot 配置 不能 捕获 问题 