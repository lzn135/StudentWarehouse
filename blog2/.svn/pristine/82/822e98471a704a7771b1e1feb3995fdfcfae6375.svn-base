一文 把 java 反射 说的 明明白白 清清楚楚 记 得点 赞 关注 距离 架构师 的 小 目标 又进 一步 目录 反射 的 概念 概念 获取 字节 码 文件 对象 的 方式 元 数据 的 概念 获取 class 对象 的 方式 反射 如何 获取 元 数据 并 访问 访问 权限 获取 方法 访问 静态 方法 访问 类 方法 获取 字段 读取 字段 的 值 获取 实现 的 接口 获取 构造 函数 创建 实例 获取 继承 的 父 类 获取 注解 反射 实例 总结 今天 有时间 没 加班 回家 来 好 好写 一篇 文章 反射 是 java 里 比较 高级 的 概 念了 一般 在 书 的 后半 部分 反射 也是 写 框架 的 必备 技能 反射 很 重要 现在 仍然 记得 刚 毕业 的 一 两年 一直 没有 搞懂 反射 是什么 今天 就 讲讲 反射 希望 这篇 文章 能 帮 有 同样 疑惑 的 你 解开 疑团 废话 不 多说 让我们 开始 吧 反射 的 概念 概念 反射 指在 运行 状态 中 对于 任意 一个 类 都能够 知道 这个 类 的 所有 属性 和 方法 对 任意 一个 对象 都能 调 用它 的 任意 一个 方法 这种 动态 获取 信息 以及 动态 调用 对象 方法 的 功能 叫做 java 语言 的 反射 机制 反射 很强 大有 优点 也有 缺点 优点 灵活性 高 因为 反射 属于 动态 编译 即 只有 到 运行时 才 动态 创建 amp 获取 对象 实例 缺点 执行 效率 低 获取 字节 码 文件 对象 的 方式 元 数据 的 概念 元 数据 metadata 元 数据 是 指 用来 描述 类 的 数据 就是 class 的 代码 数据 所有 的 class 文件 加 载到 虚拟机 之后 都 会被 构 建成 class 对象 class 对象 描述 了 一个 类 都有 哪些 东西 大家 都 知道 的 实现 的 接口 继承 的 抽象类 成员 变量 类 变量 成员 方法 类 方法 静态 方法 等 这个 class 对象 就是 元 数据 class 类 代表 一个 类 field 类 代表 类 的 成员 变量 成员 变量 也 称为 类 的 属性 method 类 代表 类 的 方法 constructor 类 代表 类 的 构造 方法 获取 class 对象 的 方式 通过 对象 获得 因为 任何 对象 都必须 和 class 对象 关联 通过 类 对象 直接 获得 通过 类 加载 器 获得 因为 类 加载 器 读取 class 文件 会 返回 class 对象 即将 用来 反射 的 对象 随便 定义 的 一个 对象 只是 为了 演示 香菜 publicclassnpc 静态 私有 成员 变量 共有 成员 变量 无 参 构造 函数 publicnpc 有 参 构造 函数 publicnpc intnpctype stringname thisnamename 静态 方法 stringword helloword 获取 反射 class 的 三种 方式 香菜 stringargs 第一种 方式 获取 class 对象 npcnpcnewnpc 这一 new 产生 一个 npc 对象 一个 class 对象 获取 class 对象 npcclazzgetname 第二种 方式 获取 class 对象 判断 第一种 方式 获取 的 class 对象 和 第二种 方式 获取 的 是否 是 同一个 第三种 方式 获取 class 对象 注意 此 字符串 必须 是 真实 路径 就是 带 包 名 的 类 路径 包 名 类 名 判断 三种 方式 是否 获取 的 是 同一个 class 对象 catch 反射 如何 获取 元 数据 并 访问 访问 权限 反射 机制 的 默认 行为 受限于 java 的 访问 控制 可通过 setaccessible 绕过 控制 设置 对象 数组 可 访问 标志 获取 方法 访问 静态 方法 stringargs 妖 神 凰 女 第一个 参数 是 方 法名 第二个 参数 是 函数 的 参数 class 对象 因为 存在 重载 的 可能性 用 参数 类型 区分 sayhelloinvoke npcworld 访问 类 方法 npcnpcnewnpc 妖 神 凰 女 npcgetname 第一个 参数 是 方 法名 第二个 参数 是 函数 的 参数 class 对象 因为 存在 重载 的 可能性 用 参数 类型 区分 sayhelloinvoke npcworld npcgetname 获取 字段 读取 字段 的 值 npcnpcnewnpc 妖 神 凰 女 获取 字段 并 设置 可 访问 name true fieldget npc 获取 实现 的 接口 获取 构造 函数 创建 实例 npcnpc npc 妖 神 npcgetname 获取 继承 的 父 类 获取 注解 运行时 注解 for getname 反射 实例 获 取到 元 数据 不是 最终 的 目的 我们 最终 的 目的 是 想在 运行时 去 调用 访问 类 说了 太多 还是 举个 例子 大家 都 知道 spring 的 ioc 怎么 实现 的 呐 过程 spring 在 项目 启动 的 时间 通过 读取 xml 中 配置 的 bean 的 路径 然后 通过 classforname 读取 class 到 类 加载 器 然后 通过 反射 创建 所有 的 bean 实例 并 保 存到 容器 中 启动 容器 之后 在 项 目中 可以 直接 获取 bean 对象 我们 来 大概 实现 这一 过程 因为 xml 的 读取 比较 麻烦 直接 用 property 来 代替 了 大家 体会 一下 思想 就可以 了 香菜 stringargs 读取 配置 beansproperties propertyload in 反射 创建 对象 for objectkeykeyset 获取 类 的 全 路径 stringclassstr string propertyget key 加载 class 到 虚拟机 classstr 获取 缺省 的 构造 函数 创建 实例 containerput string keyo 获取 实例 npcnpc npc containerget npc npcnull catch exceptione 总 结在 使用 java 反射 机制 时 主要 步骤 包括 获取 目标 类型 的 class 对象 通过 class 对象 分别 获取 constructor 类 对象 method 类 对象 或者 field 类 对象 通过 constructor 类 对象 method 类 对象 ampfield 类 对象 分别 获取 类 的 构造 函数 方法 amp 属性 的 具体 信息 并 进行 后续 操作 有疑问 的 可以 留言 我们 一起 讨论 没有问题 的 也 可以 留言 我们 交个 朋友 打字 不容易 点 赞 转发 关注 三连 谢谢 大家 对了 关注 我 公众 号 香菜 聊 游戏 有 更多 福利 哦 