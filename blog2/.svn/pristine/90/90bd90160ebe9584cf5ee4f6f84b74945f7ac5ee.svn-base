canvas 学习 系列 二 canvas 的 坐标 系统 上 一章 内容 中 我们 对 canvas 元素 有 了 一个 初步 的 认识 在 接下来 的 章节 中 我们 会 慢慢 学习 canvas 中 图形 的 绘制 但是在 绘制 之前 我们 先来 看看 canvas 中 的 坐标 系统 因为 这样 我们 才能 知道 绘制 的 图形 放在 什么 位置 比如 我们 要在 canvas 画布 的 这个 位置 绘制 一个 圆 看到 这个 要求 顿时 就 懵 逼了 在 什么地方 至于 为什么 会 懵 逼 呢 是因为 我们 不知道 canvas 的 坐标 系统 那么 我们 就 赶紧 来 了解 canvas 中 的 坐标 系统 吧 在 了解 canvas 坐标 系统 之前 我们 先来 看看 其他 的 坐标 系统 窗口 坐标 系统 窗口 坐标 是 我们 在 web 页面 中 用到 的 坐标 系统 与 我们 数学 中 的 直角坐标 系统 有所不同 通常 窗口 坐标 系统 的 原 点在 屏幕 一般 指 浏览器 的 左上角 直角坐标 系统 直角坐标 系统 中 原点 沿 x 轴向 右 方向 为 正值 反 之为 负值 原点 沿 y 轴向 上 方向 为 正值 反 之为 负值 窗口 坐标 系统 窗口 坐标 系统 与 直角坐标 系统 都 含有 x 轴 y 轴 两 轴 的 交点 为 坐标 原点 原点 沿 x 轴向 右 方向 为 正值 不同 的 是 原点 沿 y 轴 方向 向 下为 正值 当然 窗口 坐标 系统 也是 负值 的 只是 有些 时候 会 跑到 屏幕 范围 之外 另 我们 没有 看到 canvas 坐标 系统 在 canvas 绘图 环境 对象 中有 一个 与 d 绘图 环境 对应 的 d 绘图 环境 叫做 webgl 所以 canvas 坐标 系统 中 包含 d 绘图 环境 不过 我们 现在 只 说 d 绘图 环境 在 d 绘图 环境 中 的 坐标 系统 默认 情况下 是 与 窗口 坐标 系统 相同 它以 canvas 的 左上角 为 坐标 原点 沿 x 轴 向右 为 正值 沿 y 轴向 下为 正值 其中 canvas 坐标 的 单位 都是 px 然而 canvas 的 坐标系 并不是 固定 的 我们 可以 对坐 标 系统 进行 评议 放缩 及 旋转 我们 成为 坐标 变换 平移 translate 缩放 scale 旋转 rotate 自定义 变换 方式 坐标 系统 的 变换 是 canvas 中 非常 基本 的 功能 在这里 我们 不做 过多 的 阐述 后面 我们 会 详细 讲解 坐标 系统 的 变换 窗口 坐标 换为 canvas 坐标 html 应用程序 是以 事件 来 驱动 的 浏览器 通过 事件 对象 传 递给 监听器 的 坐标 是 窗口 坐标 开发者 需要 知道 发生 事件 的 点 相对于 canvas 的 位置 而 不是 相对于 浏览器 中 的 位置 所以 必须 进行 转换 转换 方法 坐标 转换 canvasxy 获取 canvas 元素 的 边界 框 returnx xcanvasboxleft 对 canvas 元素 大小 与 绘图 表面 大小 不一致 时 进行 缩放 y ycanvasboxtop 转换 方法 利用 属性 canvasxy 利用 上述 所说 窗口 坐标 转换 canvas 坐标 的 方法 我们 可以 绘制 一个 鼠标 辅助线 的 例子 loadloadcanvas canvas if d 添加 鼠标 移动 事件 e drawlines 绘制 辅助线 xy contextmoveto x contextlineto contextstroke contextmoveto y contextlineto contextstroke parseint x parseint y contextfilltext text 坐标 转换 canvasxy 获取 canvas 元素 的 边界 框 returnx xcanvasboxleft 对 canvas 元素 大小 与 绘图 表面 大小 不一致 时 进行 缩放 y ycanvasboxtop 方法 canvasxy 绘制 一个 简单 的 坐标轴 虽然 我们 还没有 学习 canvas 中 图 行 的 绘制 这里 只是 简单 的 展示 一个 例子 后面 我们 会 慢慢 学习 canvas 中 图形 的 绘制 你 就 觉得 绘制 会 如此 的 简单 坐标轴 canvas alert 当前 浏览器 不支持 canvas d 绘制 坐标轴 的 方法 cxt 绘制 x 轴 cxtmoveto xy cxtlineto wy cxtstroke 绘制 数字 while dxltw textydx textydx 绘制 y 轴 cxtmoveto xy cxtlineto xh cxtstroke 绘制 数字 while dylth textxdy textxdydrawaxis context 总 结在 我们 绘制 图形 之前 必 须要 搞清楚 canvas 的 坐标 系统 这样 才能 知道 我们 具体 要在 哪里 绘制 图形 canvas 的 d 环境 绘图 坐标 系统 原点 位于 canvas 元素 的 左上角 顶点 处 沿 x 轴 向右 为 正值 沿 y 轴向 下为 正值 与 我们 数学 中 的 直角 坐标系 是 不同 的 但是 与 我们 的 窗口 坐标系 web 页面 的 坐标 是 相同 的 canvas 的 坐标 系统 不是 一直 不变 的 我们 可以 通过 坐标 变 换来 改变 后面 章节 我们 会 单独 说到 对 canvas 绘制 图形 感兴趣 的 同学 请 持续 关注 后续 更新 如有 不对 的 地方 也 请 指出 并 多多 交流 转 载于 