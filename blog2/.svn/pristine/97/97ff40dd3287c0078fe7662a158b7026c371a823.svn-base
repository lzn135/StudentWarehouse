mybatis-puls 插件 使用 mybatisplus 打开 mybatisplus 官 网 推荐 插件 mybatisx 快速 开发 插件 很好 的 跳转 安装 方法 打开 idea 进入 输入 mybatisx 搜索 并 安装 简介 mybatisplus 简称 mp 是 一个 mybatis 的 增强 工具 在 mybatis 的 基础上 只 做 增强 不做 改 变为 简化 开发 提高 效率 而生 我们 的 愿 景 是 成为 mybatis 最好 的 搭档 就像 魂斗罗 中 的 pp 基 友 搭配 效率 翻倍 特性 无 侵入 只 做 增强 不做 改变 引入 它不 会对 现有 工程 产生影响 如丝 般 顺滑 损耗 小 启动 即 会 自动 注入 基本 curd 性能 基本无 损耗 直接 面向对象 操作 强大 的 crud 操作 内置 通用 mapper 通用 service 仅仅 通过 少量 配置 即可 实现 单 表 大部分 crud 操作 更有 强大 的 条件 构造 器 满足 各类 使用 需求 支持 lambda 形式 调用 通过 lambda 表达式 方便 的 编写 各类 查询 条件 无需 再 担心 字段 写错 支持 主键 自动 生成 支持 多达 种 主键 策略 内含 分布式 唯一 id 生成器 sequence 可 自由 配置 完美 解决 主键 问题 支持 activerecord 模式 支持 activerecord 形式 调用 实体类 只需 继承 model 类 即可 进行 强大 的 crud 操作 支持 自定义 全局 通用 操作 支持 全局 通用 方法 注入 内置 代码 生成器 采用 代码 或者 maven 插件 可 快速 生成 层 代码 支持 模板 引擎 更有 超 多 自定义 配置 等 您来 使用 内置 分页 插件 基于 mybatis 物理 分页 开发者 无需 关心 具体操作 配置 好 插件 之后 写 分页 等同于 普通 list 查询 分页 插件 支持 多种 数据库 支持 等 多种 数据库 内置 性能 分析 插件 可 输出 sql 语句 以 及其 执行时间 建议 开发 测试 时 启用 该 功能 能 快速 揪出 慢 查询 内置 全局 拦截 插件 提供 全 表 deleteupdate 操作 智能 分析 阻断 也 可 自定义 拦截 规则 预防 误操作 支持 数据库 达 梦 数据库 虚 谷 数据库 人 大金 仓 数据库 南 大 通用 数据库 快速 入门 地址 使用 第三方 组件 导入 对应 的 依赖 研究 依赖 如何 配置 代码 如何 编写 提高 扩展 技术 能力 步骤 创建 数据库 mybatisplus 创建 user 表 idbigint notnullcomment 主键 idnamevarchar 姓名 ageint 年龄 emailvarchar 邮箱 primarykey id insertintouser idnameageemail values 真实 开发 中 version 乐观 锁 deleted 逻辑 删除 编写 项目 初始化 项目 使用 springboot 初始化 导入 依赖 说明 我们 使 用了 mybatisplus 可以 节省 我们 大量 的 代码 不要 同时 导入 mybatis 和 mybatisplus 会 冲突 的 数据库 连接 风格 前台 不会 保存 缓存 上传 图片 配置 静态 资源配置 传统 方式 pojodao 连接 mybatis 配置 mapperxml 文件 使 用了 mybatisplus 之后 接口 在 对应 的 mapper 上面 继承 基本 的 类 代表 持久 层 所有 的 crud 操作 都 已经 编写 完 成了 你 不需要 像 以前 的 配置 一大堆 文件 了 注意 点 我们 需 要在 主 启动 类 上去 描述 我妈妈 的 包下 的 所有 接口 mapperscan comxxxmapper 测试 类 中 继承 了 basemapper 所有 的 方法 都来 自己 父 类 我们 也 可以 编写 自己 的 扩展 方法 参数 是 一个 wrapper 条件 构造 器 这里 我们 先 不用 null 查询 全部 用户 null usersforeach 配置 日 志在 yml 配置 日志 配置 日志 我们 执行 的 代码 可以 看到 执行 的 代码 罗 虎虎 ltrow 罗 虎 ltrow 罗 虎 ltrow 罗 虎 ltrow 罗 虎 ltrow 罗 虎虎 虎虎 idusernamemoney testtable idusernamemoney crud 扩展 插入 操作 inset 插入 测试 插入 userusernewuser usersetname 熊 usersetage usersetemail qqcom user insert user idnameageemail values gtparameters long 熊 string integer qqcom string idname 熊 ageemailqqcom 数据库 插入 的 id 的 默认值 为 全局 的 唯一 id 主键 生成 策略 默认 是 idworker 全局 唯一 id 分布式 系统 唯一 id 生成 雪花 算法 snowflake 是 twitter 开源 的 分布式 id 生成 算法 结果是 一个 long 型 的 id 其 核心 思想 是 使用 bit 作为 毫 秒数 bit 作为 机器 的 id 个 bit 是 数据中心 个 bit 的 机器 idbit 作为 毫 秒内 的 流水号 意味着 每个 节 点在 每 毫秒 可以 产 生个 id 最后 还有 一个 符号 位 永远是 可以 保证 几乎 全球 唯一 主键 自 增 我们 需要 配置 主键 自 增 实体类 字段 上 tableid typeidtypeauto 数据库 字段 一定 要是 自 增 测试 直 接在 实体类 上 对应 的 id 上 打上 注解 tableid typeidtypeauto privatelongid 其他 的 自动 生成 数据库 id 自 增 none 未 设置 主键 input 手动 输入 idworker 默认 的 全局 唯一 iduuid 全局 唯一 idworker 字符串 表示 法 更新 操作 测试 更新 userusernewuser 通过 条件 自动 拼接 动态 sqlusersetid l usersetname 罗 虎 usersetage 注意 updatebyid 但是 参数 是 一个 对象 user i 罗 虎 string integer long ltupdates 所有 的 sql 都是 自动 帮你 动态 配置 的 自动 填充 创建 时间 修改 时间 这 些个 操作 一遍 都是 自动化 完成 的 我们 不 希望 手动 更新 先 添加 注解 字段 添加 填充 内容 tablefield 然后 编写 处理器 来 处理 component 一定 不要 忘记 把 处理器 加到 ioc 容器 中 插 入时 的 填充 策略 loginfo startinsertfill metaobject metaobject 更新 时 的 填充 策略 loginfo startupdatefill metaobject 乐观 锁 乐观 锁 故名 思 意 十分 乐观 它 总是 认为 不会 出现问题 无论 干什么 不去 上锁 如果 出现 了 问题 再次 更新 值 测试 悲观 锁 故名 思 意 十分 悲观 它 总是 认为 总是 出现问题 无论 干什么 都会 上锁 再去 操作 乐观 锁 实现 方式 取出 记录 时 获取 当前 version 更新 时 带上 这个 version 执行 更新 时 如果 version 不对 就 更新 失败 乐观 锁 先 查询 获得 版本号 熊 线程 抢先 完成 这个 时候 version 会 导致 a 修改 失败 熊 先在 数据库 添加 一个 version 字段 设置 默认值 为 在 实体类 上 加 注解 versionversion 乐观 锁 version 注解 配置 version 插件 事务管理 注册 乐观 锁 插件 测试 代码 就 查询 用户 信息 l 修改 用户 信息 usersetname huhu usersetemail qqcom 执行 更新 操作 user 测试 乐观 锁 失败 多线程 下 线程 l usersetname huhu usersetemail qqcom 模拟 另外 一个 线程 执 行了 插队 操作 l usersetname usersetemail qqcom user user 如果 没有 乐观 锁 就会 覆盖 插队 线程 的 值 查询 操作 测试 查询 l user 测试 批量 查询 arraysaslist usersforeach 按 条件 查询 之一 使用 map 操作 自定义 要 查询 mapput name 熊 mapput age map usersforeach 分页 查询 原始 的 limit 进行 分页 pagehelper 第三方 插件 mp 其实 也 内置 了 分页 插件 配置 拦截器 组件 即可 分页 插件 或者是 这样 写 springboot 方式 设置 请求 的 页面 大于 最大 页 后 操作 true 调 回到 首页 false 继续 请求 默认 false 设置 最大 单 页 限制 数量 默认 条 不受 限制 开启 count 的 join 优化 只 针对 部分 true 直接 使用 page 对象 即可 测试 分页 查询 参数 一 当前页 参数 二 页面 大小 使 用了 分页 插件 之后 所有 的 分页 操作 也 变得 简单 的 pagenull pagegetrecords foreach 当前 页数 pagegettotal 总共有 多 少调 数据 删除 操作 测试 删除 l 通过 id 批量 删除 arraysaslist ll 通过 map 删除 mapput name 熊 map 一般 删除 都是 逻辑 删除 逻辑 删除 很少 有用 物理 删除 的 物理 删除 从 数据库 中 直接 移除 逻辑 删除 再 数据库 中 没有 被 移除 而是 通过 一个 变量 来 让 他 失效 数据库 加个 字段 设置 默认值 为 我 给 的 字段 是 deleted 在 实体类 加个 注解 tablelogic 逻辑 删除 在 yml 写 配置 类 逻辑 删除 配置 全局 逻辑 删除 的 实体 字段名 since 配置 后 可以 忽略 不 配置 步骤 逻辑 已 删除 值 默 认为 逻辑 未 删除 值 默 认为 然后 测试 代码 测试 删除 l 测试 查询 l user 条件 构造 器 十分重要 wrapper 我们 写 一些 复杂 的 sql 就可 以使 用它 来 替代 简单 写 几个 自己 查看 学习 查询 name 不为 空 的 用户 并且 邮箱 不为 空 的 用户 年龄 大于 等于 name isnotnull email ge age wrapper foreach 和 我们 刚才 学习 的 map 对比 一下 代码 生成 工具 都给 我 自己 去 编写 完成 autogenerator 是 mybatisplus 的 代码 生成器 通过 autogenerator 可以 快速 生成 等 各个 模块 的 代码 极大 的 提 升了 开发 效率 到 依赖 我 没有 试出来 你们 可以 试一下 配置 策略 true 是否 支持 ar 模式 configsetauthor 熊 作者 生成 路 劲 true 文件 覆盖 configsetidtype idtypeauto 主键 策略 sservice 去 service 的 i 前缀 true true 数据源 设置 dssetdbtype dbtypemysql dssetdrivername dsseturl dssetusername root dssetpassword root 策略 配置 true 开启 大写 表 的 前缀 stsetinclude user stsetnaming 数据库 表 映 射到 实体类 的 命名 策略 true 自动 lombok 包 名 策略 pcsetparent com pcsetentity entity pcsetmapper mapper pcsetservice service pcsetcontroller controller pcsetxml mapper 整合 配置 config ds mpgsetstrategy st pc mpgexecute 执行 官方 链接 可以 查看 这一 片 我 自己 弄 autogenerator 到 不 上 自己 试一下 