pyhon 疫情 大数 据分析 一 腾讯 实时 数据 爬 取 matplotlib 和 seaborn 可视化 分析 全国 各地区 某省 各城市 新增 趋势 思来想去 虽然 很忙 但 还是 挤时间 针对 这次 肺炎 疫情 写个 python 大数 据分析 系列 博客 包括 网络 爬虫 可视化 分析 gis 地图 显示 情感 分析 舆情 分析 主题 挖掘 威胁 情报 溯源 知识 图谱 预测 预警 及 ai 和 nlp 应用 等 希望 该 系列 线上 远程教学 对 您 有所 帮助 也 希望 早点 战胜 病毒 武汉 加油 湖北 加油 全国 加油 待到 疫情 结束 樱花 盛开 这座 英雄 的 城市 等 你们 来 第一 篇文章 将 分享 腾讯 疫情 实时 数据 抓取 获取 全国各地 和 贵州省 各地区 的 实时 数据 并将 数据 存储 至 本地 最后 调用 maplotlib 和 seaborn 绘制 中国 各地区 贵州省 各城市 新增 人数 的 图形 希望 这篇 可视化 分析 文章 对 您 有所 帮助 也 非常感谢 参考文献 中 老师 的 分享 一起 加油 战胜 疫情 如果 您有 想 学习 的 知识 或 建议 可以 给 作者 留言 代码 下载 地址 下载 地址 文章 目录 一 python 实时 数据 爬 取 二 matplotlib 绘制 全国 各地区 柱状 图三 数据 存储 及 seaborn 绘制 全国 各地区 柱状图 四 seaborn 绘制 全国 各地区 对比 柱状图 五 seaborn 绘制 疫情 趋势 图 及 湖北 省内外 对比 图 六 seaborn 绘制 其他 图形 及 分析 七 贵州省 可视化 分析 八 总结 同时 推荐 前面 作者 另外 五个 python 系列 文章 从 年 开始 作者 主要 写了 三个 python 系列 文章 分 别是 基础知识 网络 爬虫 和数 据分析 年 陆续 增加了 python 图像识别 和 python 人工智能 专栏 python 基础知识 系列 python 基础知识 学习 与 提升 python 网络 爬虫 系列 python 爬虫 之 数据 分析 系列 知识 图谱 web 数据 挖掘 及 nlppython 图像识别 系列 python 图像 处理 及 图像识别 python 人工智能 系列 python 人工智能 及 知识 图谱 实战 一 python 实时 数据 爬 取 我们 的 目标 网站 是 腾讯 新闻网 实时 数据 其 原理 主 要是 通过 requests 获取 json 请求 从而 得到 各省 各市 的 疫情 数据 这里 推荐 三篇 原理 文章 也 强烈推荐 大家 阅读 许 老师 天元 浪子 的 博客 爬虫 目标 网站 推荐 参考 文章 python 实战 抓 肺炎 疫情 实时 数据 画 ncov 疫情 地图 许 老师 用 python 抓 新型 冠状病毒 肺炎 疫情 数据 绘制 全国 疫情 分布图 shineych 老师 python 开发者 日 爬虫 框架 的 技术 实现 与 模块 应用 的 经验 分享 许 老师 第一步 分析 网站 通过 浏览器 审查 元素 查看 源代码 及 网络 反馈 的 消息 如 下图 所示 对应 的 响应 信息 如下 所示 第二步 发送 请求 并 获取 json 数据 通过 分析 url 地址 请求 方法 参数 及 响应 格式 可以 获取 json 数据 注意 url 需要 增加 一个时间 戳 下面 代码 展示 了 获取 数据 的 键值 及 个 省份 codingutf 第一步 抓取 数据 参考 文章 许 老师 博客 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num itemnameend 不 换行 elseprint n 换行 输出 结果 如 下图 所示 其 顺序 按照 确诊 人数 排序 第三步 获取 湖北省 疫情 数据 接着 通过 numchildren 获取 湖北省 的 疫情 数据 代码 如下 codingutf 第一步 抓取 数据 参考 文章 许 老师 博客 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num itemnameend 不 换行 elseprint n 换行 显示 湖北省 数据 data 同样 的 方法 可以 获取 各 省份 的 数据 比如 numchildren 表示 广东省 疫情 数据 我们 设置 循环 就能 获取 所有 数据 其 数据 包括 当日 数据 today 和 累计 数据 totalconfirm 表示 确诊 suspect 表示 疑似 dead 表示 死亡 heal 表示 治愈 我们 将 所 抓取 的 数据 和 真实 的 数据 进行 对比 武汉 截止 月 日 下午 点 新增 确诊 人数 累计 确诊 发 现是 完全一致 的 name 武汉 第四步 获取 各省 确诊 人数 注意 初始化 每个 省份 人数 为 然后 循环 累加 该省 所有 城市 的 确诊 人数 调用 获取 各城市 的 确诊 数据 codingutf 第一步 抓取 数据 参考 文章 许 老师 博客 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num itemnameend 不 换行 elseprint n 换行 显示 湖北省 数据 item elseprint n 解析 数据 确诊 疑似 死亡 治愈 itemname print totaldata 湖北 广东 河南 浙江 湖南 澳门 西藏 输出 结果 如 下图 所示 接下来 我们 分享 可视化 画图 二 matplotlib 绘制 全国 各地区 柱状图 首先 我们 调用 matplotlib 绘制 全国 各地区 的 确诊 人数 柱状图 帮助 大家 回忆 其 基本 用法 totaldata 为 字典 变量 键值 对 比如 湖北 广东 codingutf 第一步 抓取 数据 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num itemnameend 不 换行 elseprint n 换行 显示 湖北省 数据 item elseprint n 解析 数据 确诊 疑似 死亡 治愈 itemname print totaldata 湖北 广东 河南 浙江 湖南 澳门 西藏 第二步 绘制 柱状图 用来 正常 显示 中文 标签 用来 正常 显示 负号 获取 数据 print names print nums 绘图 pltfigure figsize pltbar 设置 标题 pltxlabel 地区 pltylabel 人数 plttitle 全国 疫情 确诊 数 对比 图 pltxticks list names 显示 数字 forabinzip list names list nums plttext pltshow 输出 结果 如 下图 所示 那么 如果 我 想 获取 累计 确诊 人数 新增 确诊 人数 死亡 人数 和 治愈 人数 并 进行 可视化 展示 怎么办 呢 只需要 简单 替换 参数 即可 确诊 人数 疑似 人数 死亡 人数 治愈 人数 新增 确诊 人数 codingutf 第一步 抓取 数据 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num itemnameend 不 换行 elseprint n 换行 显示 湖北省 数据 item elseprint n 解析 确诊 数据 itemname print totaldata 湖北 广东 河南 浙江 湖南 澳门 西藏 解析 疑似 数据 itemname print 解析 死亡 数据 itemname print totaldeaddata 解析 治愈 数据 itemname print totalhealdata 解析 新增 确诊 数据 itemname todayprint totalnewdata 第二步 绘制 柱状图 figsize 用来 正常 显示 中文 标签 用来 正常 显示 负号 绘制 确诊 数据 ppltsubplot 获取 数据 print names print nums print totaldata pltbar 设置 标题 pltylabel 确诊 人数 rotation pltxticks list names rotationsize 显示 数字 forabinzip list names list nums plttext pltsca p 绘制 新增 确诊 数据 ppltsubplot print names print nums pltbar pltylabel 新增 确诊 人数 rotation pltxticks list names rotationsize 显示 数字 forabinzip list names list nums plttext pltsca p 绘制 死亡 数据 ppltsubplot print names print nums pltbar pltxlabel 地区 pltylabel 死亡 人数 rotation pltxticks list names rotationsize forabinzip list names list nums plttext pltsca p 绘制 治愈 数据 ppltsubplot print names print nums pltbar pltxlabel 地区 pltylabel 治愈 人数 rotation pltxticks list names rotationsize forabinzip list names list nums plttext pltsca p pltshow 输出 如 下图 所示 但是 matplotlib 画图 不太 美观 接下来 分享 seaborn 可视化 三 数据 存储 及 seaborn 绘制 全国 各地区 柱状图 seaborn 是 在 matplotlib 的 基础上 进行了 更 高级 的 api 封装 从而 使得 作图 更加 容易 在 大多数 情况下 使用 seaborn 能 做出 很 具有 吸引力 的 图 而 使用 matplotlib 就能 制作 具有 更多 特色 的 图 安装 文件 写入 codingutf 第一步 抓取 数据 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num itemnameend 不 换行 elseprint n 换行 显示 湖北省 数据 item elseprint n 解析 确诊 数据 itemname print totaldata 湖北 广东 河南 浙江 湖南 澳门 西藏 解析 疑似 数据 itemname print 解析 死亡 数据 itemname print totaldeaddata 解析 治愈 数据 itemname print totalhealdata 解析 新增 确诊 数据 itemname todayprint totalnewdata 第二步 存储 数据 至 csv 文件 nameslist totaldatakeys 省份 名称 numlist totaldatavalues 确诊 数据 numlist 疑似 数据 全为 numlist 死亡 数据 numlist 治愈 数据 numlist 新增 确诊 病例 print names print num print num print num print num print num 获取 当前 日期 命名 allcsv ntimestrftime ymd allcsvfwopen nwencodingutf fwwrite iwhileiltlen names fwwrite namesistr numi str numi str numi str numi n iielseprint overwritefile fwclose 存储 成功 之后 如 下图 所示 对应 腾讯 的 数据 如 下图 所示 seaborn 绘制 柱状图 codingutf 第三步 调用 seaborn 绘制 柱状图 读取 数据 ntimestrftime ymd n 设置 窗口 print dataprovince 设置 绘图 风格 及 字体 snssetstyle 绘制 柱状图 gsnsbarplot hls 在 柱状 图上 显示 数字 iforindexbinzip list dataprovince list dataconfirm gtext ii 设置 axes 的 标题 axsettitle 全国 疫情 最新 情况 设置 坐标轴 文字 方向 rotation 设置 坐标轴 刻度 的 字体大小 axtickparams axisxlabelsize axtickparams axisylabelsize pltshow 显示 结果 如 下图 所示 四 seaborn 绘制 全国 各地区 对比 柱状图 如果 需要 显示 多个 数据 对比 则需 要 使用 下面 的 代码 由于 seaborn 能够 进行 按 类别 分组 绘图 我们 需 要将 抓取 的 数据 存储 为 如 下图 所示 的 文件 才 能将 数据 绘制 在 同一 张 图中 codingutf 第一步 抓取 数据 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num itemnameend 不 换行 elseprint n 换行 显示 湖北省 数据 item elseprint n 解析 确诊 数据 itemname print totaldata 湖北 广东 河南 浙江 湖南 澳门 西藏 解析 疑似 数据 itemname print 解析 死亡 数据 itemname print totaldeaddata 解析 治愈 数据 itemname print totalhealdata 解析 新增 确诊 数据 itemname todayprint totalnewdata 第二步 存储 数据 至 csv 文件 nameslist totaldatakeys 省份 名称 numlist totaldatavalues 确诊 数据 numlist 疑似 数据 全为 numlist 死亡 数据 numlist 治愈 数据 numlist 新增 确诊 病例 print names print num print num print num print num print num 获取 当前 日期 命名 allcsv ntimestrftime ymd alldbcsvfwopen nwencodingutf fwwrite iwhileiltlen names fwwrite numi n fwwrite namesideadstr numi n fwwrite namesihealstr numi n fwwrite numi n iielseprint overwritefile fwclose 第三步 调用 seaborn 绘制 柱状图 读取 数据 ntimestrftime ymd n 设置 窗口 print dataprovince 设置 绘图 风格 及 字体 snssetstyle 绘制 柱状图 gsnsbarplot hls 设置 axes 的 标题 axsettitle 全国 疫情 最新 情况 设置 坐标轴 文字 方向 rotation 设置 坐标轴 刻度 的 字体大小 axtickparams axisxlabelsize axtickparams axisylabelsize pltshow 此时 绘制 如 下图 所示 但是 当 数据 很 小时 其 柱状图 无法 很好 地 显示 建议 采用 以下 方法 处理 归一化 处理 湖北 省外 和 湖北 省内 对比 codingutf 第三步 调用 seaborn 绘制 柱状图 读取 数据 ntimestrftime ymd n 设置 窗口 print dataprovince 设置 绘图 风格 及 字体 snssetstyle 绘制 柱状图 gsnsbarplot hls 设置 axes 的 标题 axsettitle 全国 疫情 最新 情况 设置 坐标轴 文字 方向 rotation 设置 坐标轴 刻度 的 字体大小 axtickparams axisxlabelsize axtickparams axisylabelsize pltshow 替换成 新增 确诊 病例 的 对比 图 如下 所示 五 seaborn 绘制 疫情 趋势 图 及 湖北 省内外 对比 图 湖北 省内外 对比 图 在做 数据 分析 过程中 我们 通常 需要 对 数据 进行 预处理 或 加工 下面 将 数据 划 分为 湖北 省内 和 湖北 省外 再 绘制 对应 的 对比 图 codingutf 第三步 调用 seaborn 绘制 柱状图 读取 数据 datapdreadcsv alldbnocsv 设置 窗口 print dataprovince 设置 绘图 风格 及 字体 snssetstyle 绘制 柱状图 gsnsbarplot hls 设置 axes 的 标题 axsettitle 全国 疫情 最新 情况 设置 坐标轴 文字 方向 设置 坐标轴 刻度 的 字体大小 axtickparams axisxlabelsize axtickparams axisylabelsize pltshow 输出 结果 如 下图 所示 疫情 趋势 图 该 部分 代码 是 在 许 老师 的 文章 基础上 修改 codingutf 参考 文章 许 老师 博客 抓取 腾讯 疫情 实时 json 数据 defcatchdaily timetime datajsonloads requestsget urlurl json data datasort keylambdaxxdate datelistlist 日期 confirmlistlist 确诊 suspectlistlist 疑似 deadlistlist 死亡 heallistlist 治愈 datelistappend ss monthday ymd int itemconfirm int itemsuspect deadlistappend int itemdead heallistappend int itemheal 绘制 每日 确诊 和 死亡 数据 defplotdaily 获取 数据 pltfigure ncov 疫情 统计图表 plttitle ncov 疫情 曲线 fontsize 用来 正常 显示 中文 标签 用来 正常 显示 负号 pltplot 确诊 pltplot pltplot 疑似 pltplot pltplot 死亡 pltplot pltplot 治愈 pltplot pltgca md 格式化 时间轴 标注 pltgcf autofmtxdate 优化 标注 自动 倾斜 pltgrid linestyle 显示 网格 pltlegend locbest 显示 图例 pltsavefig ncov 疫情 曲线 png 保存为 文件 pltshow 输出 结果 如 下图 所示 疑似 人数 开始 下降 武汉 加油 中国 必胜 六 seaborn 绘制 其他 图形 及 分析 作者 这里 仅 补充 绘图 语法 更多 分析 结果 死亡 数 治愈 数 请 读者 进行 同时 读者 可以 增加 数据量 全国 所有 城市 的 数据 可能 绘制 的 图形 更为 丰满 参考 作者 前文 知识 图谱 实战篇 二 jsonseaborn 可视化 展示 电影 实体 kde 图 snsjointplot codingutf 第四步 调用 seaborn 绘制 其他 图形 读取 数据 datapdreadcsv allcsv 用来 正常 显示 中文 标签 用来 正常 显示 负号 设置 窗口 print dataprovince 设置 axes 的 标题 axsettitle 全国 疫情 最新 情况 设置 坐标轴 刻度 的 字体大小 axtickparams axisxlabelsize axtickparams axisylabelsize 设置 绘图 风格 及 字体 snssetstyle 六角形 snsjointplot kde 图 snsjointplot 散点图 kde 图 g snsjointplot plotjoint pltshow 显示 如 下图 所示 六角形 snsjointplot 散点图 snsjointplot 回归 图 snsjointplot 散点图 kde 图 g snsjointplot plotjoint 七 贵州省 可视化 分析 接着 我们 抓取 某一个 省 的 数据 比如 贵州省 codingutf 第一步 抓取 数据 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num 获取 贵州 下标 itemnameend 不 换行 ifitemnamein 贵州 print print itemnamek breakkkprint 换行 显示 贵州省 数据 item elseprint n 输出 结果 如 下图 所示 添加 解析 数据 和 存储 文件 完整 代码 如下 codingutf 第一步 抓取 数据 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num 获取 贵州 下标 itemnameend 不 换行 ifitemnamein 贵州 print print itemnamek breakkkprint 换行 显示 贵州省 数据 item elseprint n 第二步 解析 数据 解析 确诊 数据 itemname 确诊 人数 print totaldata 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 解析 疑似 数据 itemname 疑似 人数 print 解析 死亡 数据 itemname 死亡 人数 print totaldeaddata 解析 治愈 数据 itemname 治愈 人数 print totalhealdata 解析 新增 确诊 数据 itemname 新增 确诊 人数 print totalnewdata 第三步 存储 数据 至 csv 文件 nameslist totaldatakeys 省份 名称 numlist totaldatavalues 确诊 数据 numlist 疑似 数据 全为 numlist 死亡 数据 numlist 治愈 数据 numlist 新增 确诊 病例 print names print num print num print num print num print num 获取 当前 日期 命名 gzcsv ntimestrftime ymd gzcsvfwopen nwencodingutf fwwrite iwhileiltlen names fwwrite namesistr numi str numi str numi str numi n iielseprint overwritefile fwclose 完整 输出 内容 如下 所示 dictkeys 湖北 广东 河南 浙江 湖南 安徽 江西 江苏 重庆 山东 四川 黑龙江 北京 上海 福建 河北 陕西 广西 海南 云南 贵州 贵州 name 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 确诊 人数 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 疑似 人数 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 死亡 人数 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 治愈 人数 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 新增 确诊 人数 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 最后 采用 seaborn 绘制 图形 如下 所示 codingutf 第一步 抓取 数据 抓取 腾讯 疫情 实时 json 数据 timetime datajsonloads requestsget urlurl json data print data print datakeys 统计 省份 信息 个 省份 湖北 广东 河南 浙江 湖南 安徽 len num 获取 贵州 下标 itemnameend 不 换行 ifitemnamein 贵州 print print itemnamek breakkkprint 换行 显示 贵州省 数据 item elseprint n 第二步 解析 数据 解析 确诊 数据 itemname 确诊 人数 print totaldata 贵阳 遵义 毕节 黔南州 六盘水 铜仁 黔东南州 黔西南州 安顺 解析 疑似 数据 itemname 疑似 人数 print 解析 死亡 数据 itemname 死亡 人数 print totaldeaddata 解析 治愈 数据 itemname 治愈 人数 print totalhealdata 解析 新增 确诊 数据 itemname 新增 确诊 人数 print totalnewdata 第三步 存储 数据 至 csv 文件 nameslist totaldatakeys 省份 名称 numlist totaldatavalues 确诊 数据 numlist 疑似 数据 全为 numlist 死亡 数据 numlist 治愈 数据 numlist 新增 确诊 病例 print names print num print num print num print num print num 获取 当前 日期 命名 gzcsv ntimestrftime ymd gzdbcsvfwopen nwencodingutf fwwrite iwhileiltlen names fwwrite numi n fwwrite namesideadstr numi n fwwrite namesihealstr numi n fwwrite numi n iielseprint overwritefile fwclose 第四步 调用 seaborn 绘制 柱状图 读取 数据 ntimestrftime ymd n 设置 窗口 print dataprovince 设置 绘图 风格 及 字体 snssetstyle 绘制 柱状图 gsnsbarplot hls 设置 axes 的 标题 axsettitle 贵州 月 日 疫情 最新 情况 设置 坐标轴 文字 方向 rotation 设置 坐标轴 刻度 的 字体大小 axtickparams axisxlabelsize axtickparams axisylabelsize pltshow 贵州省 月 日 疫情 显示 结果 如下 所示 八 总结 写到 这里 第一篇 疫情 分析 的 文章 就 讲解 完毕 希望 对 您 有所 帮助 主要 包括 两部分 内容 实时 数据 爬 取 可视化 分析 后续 还会 分享 gis 地图 显示 情感 分析 舆情 分析 主题 挖掘 威胁 情报 溯源 知识 图谱 预测 预警 及 ai 和 nlp 应用 等 如果 文章 对 您 有所 帮助 将是 我 写作 的 最大 动力 同时 向 钟 院士 致敬 向 一线 工作者 致敬 侠之大者 为国为民 咱们 中国人 一生 的 最高 追求 为 天地 立 心 为 生民 立 命为 往 圣 继 绝学 为 万世 开 太平 以 一人 之 力系 万民 康乐 以 一身 犯 险 保 大业 安全 他们 真是 做 到了 武汉 加油 中国 加油 byeastmount 晚 上点 夜 于 贵阳 参考文献 实战 抓 肺炎 疫情 实时 数据 画 ncov 疫情 地图 许 老师 用 python 抓 新型 冠状病毒 肺炎 疫情 数据 绘制 全国 疫情 分布图 shineych 老师 python 开发者 日 爬虫 框架 的 技术 实现 与 模块 应用 的 经验 分享 许 老师 知识 图谱 实战篇 二 jsonseaborn 可视化 展示 电影 实体 