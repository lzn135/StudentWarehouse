group by 中子 查询 order by 排序 失效 问题 分析 戳 蓝字 topcoder 关注 我们 哦 通过 sql 分组 查询 数据 时 一般 通过 groupby 来 完成 groupby 默认 取 相同 的 分组 列 一列 或者 多 列 中 第一个 数据 如果 想 获取 sql 分组 中 id 最大 的 记录 我们 可能 想到 的 sql 如下 name 列 作为 分组 astgroupbyname 不过 执行 该 sql 发现 并不能 达到 我们 的 目的 输出 数据 如 下表 数据 如下 astgroupbyname 输出 结果 如下 idnamenamename 这是 为什么 呢 因为 mysql 之后 版本 对 排序 的 sql 解析 做了 优 化子 查询 中 的 排序 是 会被 忽略 的 所以 上面 的 orderbyiddesc 未 起到 作用 如 果子 语句 中 排序 不做 优化 那不 就可以 了 么 查阅 资料 发现 可以 在 子 语句 中 加上 limit 来 避免 这种 优化 加上 limit 相当于 临时 表 限定 了 取值 范围 不会 进行 优化 如果是 全 表 的话 就被 优化 掉了 加上 astgroupbyname 输出 结果 如下 idnamenamename 除了 上述 这种 直接 通过 groupby 分组 得到 id 最大 记录 之外 还 可以 通过 分组 获 取到 最大 记录 id 然后 通过 id 获取 对应 记录 这里 的 id 只 要是 记录 的 关键 key 即可 通过 分组 获取 关键 key 然后再 获取 对应 记录 selectmax id 输出 结果 如下 idnamenamename 其实 除了 groupby 获取 分组 最后 一个 记录 之外 还 可以 通过 关联 子 查询 方式 来 实现 selectmax id orderbyname 输出 结果 如下 idnamenamename 通过 以上 groupby 和 关联 子 查询 两种 方式 的 实现 获取 分组 的 最后 一条 记录 要么 直接 通过 分组 直 接来 获取 要么 先 获 取到 记录 关键 key 然后 通过 关键 key 获取 对应 的 记录 即可 如果 小伙伴 还知道 更多 的 实现 方式 欢迎 留言 讨论 推荐 阅读 阿里 开源 的 线程 间 上下文 传递 解决方案 线程 池 如何 传递 线程 上下文 信息 一起 聊 聊个 线程 依次 打印 的 故事 欢迎 小伙伴 关注 topcoder 阅读 更多 精彩 好文 