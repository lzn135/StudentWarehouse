2019年 18家 大厂 java 面试题 整 理了 350 道 分布式 微 服务 高 并发 性能 调 优 框架 源码 前言 年 还有 不到 个月 的 时间 就 结束 了 这一 你 你 收获 了 多少 前段时间 一直 有 粉丝 问我 有没有 今年 一些 大厂 java 面试题 总结 最新 抽时间 整 理了 一些 分享 给 大家 大家 一起 共享 学习 一 性能 调 优 系列 tomcat 性能 调 优 jvm 参数 调 优 xmsltsizegt 表示 jvm 初始化 堆 的 大小 一 xmxltsizegt 表示 jvm 堆 的 最大值 这两个 值 的 大小 一般 根据需要 进行 设置 当 应用程序 需要 的 内存 超出 堆 的 最大值 时 虚拟机 就会 提示 内存 溢出 并且 导致 应用服务 崩溃 因此 般 建议 堆 的 最大值 设置 为 可用内存 的 最大值 的 在 catalinabat 中 设置 javaptsxmsmxmxm 表示 初始化 内 存为 mb 可以 使用 的 最大 内存 mbjvm 性能 调 优 java 类 加载 过程 java 类 加载 需要 经历 一 下个 过程 加载 加载 是 类 加载 的 第一个 过程 在 这个 阶段 将 完成 一下 三件 事情 通过 一个 类 的 全 限 定名 获取 该类 的 二进制 流 将该 二进制 流 中 的 静态 存储 结构 转 化为 方法 去 运行时 数据结构 在 内存 中 生成 该类 的 class 对象 作为 该类 的 数据 访问 入口 验证 验证 的 目的 是为了 确保 class 文件 的 字 节流 中 的 信息 不回 危害到 虚拟机 在 该 阶段 主要 完成 以下 四钟 验证 文件 格式 验证 验证 字 节流 是否 符合 class 文件 的 规范 如 主次 版本号 是否 在 当前 虚拟机 范围内 常量 池中 的 常量 是否 有 不被 支持 的 类型 元 数据 验证 对 字节 码 描述 的 信息 进行 语义 分析 如 这个 类 是否 有 父 类 是否 集 成了 不被 继承 的 类 等 字节 码 验证 是 整个 验证 过程 中最 复杂 的 一个 阶段 通过 验证 数据流 和 控制 流 的 分析 确定 程序 语义 是否 正确 主要 针对 方 法体 的 验证 如 方法 中 的 类型 转换 是否 正确 跳转 指令 是否 正确 等 符号 引用 验证 这个 动作 在后 面的 解析 过程中 发生 主要 是为了 确保 解析 动作 能 正确 执行 mysql 性能 调 优 复制 基本原理 流程 主 binlog 线程 记 录下 所有 改 变了 数据库 数据 的 语句 放进 master 上 的 binlog 中 从 io 线程 在 使用 startslave 之后 负责 从 master 上 拉 取 binlog 内容 放进 自己 的 relaylog 中 从 sql 执行 线程 执行 relaylog 中 的 语句 mysql 复制 的 线程 有 几个 及 之间 的 关联 mysql 的 复制 是 基于 如 下个 线程 的 交互 多线程 复制 里面 应该是 类 线程 master 上面 的 binlogdump 线程 该 线程 负责 将 master 的 binlogevent 传到 slaveslave 上面 的 io 线程 该 线程 负责 接收 master 传过来 的 binlog 并 写入 relaylogslave 上面 的 sql 线程 该 线程 负责 读取 relaylog 并 执行 如果是 多线程 复制 无论是 库 级别 的 假 多线程 还是 mariadb 或者 的 真正 的 多线程 复制 sql 线程 只 做 coordinator 只 负责 把 relaylog 中 的 binlog 读出来 然后 交给 worker 线程 woker 线程 负责 具体 binlogevent 的 执行 二 微 服务 系列 springcloud 面试 什么 是 流 应用程序 启动器 是 基于 springboot 的 spring 集成 应用程序 提供 与 外部 系统 的 集成 springcloudtask 一个 生命周期 短暂 的 微 服务 框架 用于 快速 构建 执行 有限 数据处理 的 应用程序 使用 springcloud 有 什么 优势 使用 springboot 开发 分布 式微 服务 时 我们 面临 以下 问题 与 分布式 系统 相关 的 复杂性 这种 开销 包括 网络 问题 延迟 开销 带宽 问题 安全问题 服务 发现 服务 发现 工具 管理 群 集中 的 流程 和 服务 如何 查找 和 互相 交谈 它 涉及 一个 服务 目 录在 该 目录 中 注册 服务 然后 能够 查找 并 连 接到 该 目录 中 的 服务 冗余 分布式 系统 中 的 冗余 问题 负载平衡 负载平衡 改善 跨 多个 计算 资源 的 工作 负荷 诸如 计算机 计算机 集群 网络 链 路 中央处理 单元 或 磁盘驱动器 的 分布 性能 问题 由于 各种 运营 开销 导致 的 性能 问题 部署 复杂性 devops 技能 的 要求 springboot 面试 什么 是 springboot 多年来 随着 新功能 的 增加 spring 变得 越来越 复杂 页面 我们 就会 看到 可以 在 我们 的 应用程序 中 使用 的 所有 spring 项目 的 不同 功能 如果 必须 启动 一个 新 的 spring 项目 我们 必须 添加 构建 路径 或 添加 maven 依赖 关系 配置 应用程序 服务器 添加 spring 配置 因此 开始 一个 新 的 spring 项目 需要 很多 努力 因为 我们 现在 必须 从头开始 做 所有 事情 springboot 是 解决 这个 问题 的 方法 springboot 已经 建立在 现有 spring 框架 之上 使用 spring 启动 我们 避免了 之前 我们 必须 做的 所有 样板 代码 和 配置 因此 springboot 可以 帮助 我们 以 最少 的 工作量 更加 健壮 地 使用 现有 的 spring 功能 springboot 有 哪些 优点 springboot 的 优点 有 减少 开发 测试 时间 和 努力 使用 javaconfig 有助于 避免 使用 xml 避免 大量 的 maven 导入 和 各种 版本 冲突 提供 意见 发展 方法 通过 提供 默认值 快速 开始 开发 没有 单独 的 web 服务器 需要 这 意味着 你 不再 需要 启动 tomcatglassfish 或 其他 任何东西 需要 更少 的 配置 因为 没有 webxml 文件 只需 添加 用 configuration 注释 的 类 然后 添加 用 bean 注释 的 方法 spring 将 自动 加载 对象 并 像 以前 一样 对 其 进行 管理 您 甚至 可以 将 autowired 添加到 bean 方法 中 以使 spring 自动 装入 需要 的 依赖 关系 中 基于 环境 的 配置 使用 这些 属性 您 可以 将 您 正在 使用 的 环境 传递 到 应用程序 在 加载 主 应用程序 属性 文件 后 spring 将在 中 加载 后续 的 应用程序 属性 文件 dubbo 面试 dubbo 支持 哪些 协议 每种 协议 的 应用 场景 优缺点 dubbo 单 一长 连接 和 nio 异步 通讯 适合 大 并发 小 数据量 的 服务 调用 以及 消费者 远大于 提供者 传输 协议 tcp 异步 hessian 序列化 rmi 采用 jdk 标准 的 rmi 协议 实现 传输 参数 和 返回 参数 对象 需要 实现 serializable 接口 使用 java 标准 序列化 机制 使用 阻塞 式 短 连接 传输 数据包 大小 混合 消费者 和 提供者 个数 差不多 可传 文件 传输 协议 tcp 多个 短 连接 tcp 协议 传输 同步 传输 适用 常规 的 远程 服务 调用 和 rmi 互 操作 在 依赖 低版本 的 包 java 序列化 存在 安全漏洞 webservice 基于 webservice 的 远程 调用 协议 集成 cxf 实现 提供 和 原生 webservice 的 互 操作 多个 短 连接 基于 http 传输 同步 传输 适用 系统集成 和 跨 语言 调用 http 基于 http 表单 提交 的 远程 调用 协议 使用 spring 的 httpinvoke 实现 多个 短 连接 传输 协议 http 传入 参数 大小 混合 提供者 个数 多于 消费者 需 要给 应用程序 和 浏览器 js 调用 hessian 集成 hessian 服务 基于 http 通讯 采用 servlet 暴露 服务 dubbo 内嵌 jetty 作为 服务器 时 默认 实现 提供 与 hession 服务 互 操作 多个 短 连接 同步 http 传输 hessian 序列化 传入 参数 较大 提供者 大于 消费者 提供者 压力 较大 可传 文件 memcache 基于 memcached 实现 的 rpc 协议 redis 基于 redis 实现 的 rpc 协议 三 并发 编程 系列 synchronized 原理 synchronized 和 reentrantlock 的 区别 synchronized 是 和 ifelseforwhile 一样 的 关键字 reentrantlock 是 类 这是 二者 的 本质区别 既然 reentrantlock 是 类 那么 它就 提供 了 比 synchronized 更多 更 灵活 的 特性 可以 被 继承 可以 有 方法 可以 有 各种各样 的 类 变量 reentrantlock 比 synchronized 的 扩展性 体现在 几点 上 reentrantlock 可 以对 获取 锁 的 等待时间 进行 设置 这样 就 避免了 死锁 reentrantlock 可以 获取 各种 锁 的 信息 reentrantlock 可以 灵活 地 实现 多路 通知 另外 二者 的 锁 机制 其实 也是 不一样 的 reentrantlock 底层 调用 的 是 unsafe 的 park 方法 加锁 synchronized 操作 的 应该是 对象 头中 markword 这点 我 不能 确定 aqs 框架 什么 是 aqsaqs 是 的 简称 它是 一个 java 提高 的 底层 同步 工具 类 用 一个 int 类型 的 变量 表示 同步 状态 并 提供 了 一系列 的 cas 操作 来 管理 这个 同步 状态 aqs 是 一个 用来 构建 锁 和 同步器 的 框架 使用 aqs 能 简单 且 高效 地 构 造出 应用 广泛 的 大量 的 同步器 比如 我们 提到 的 其他 的 诸如 等等 皆是 基于 aqs 的 aqs 支持 两种 同步 方式 独占 式 共享 式 这样 方便 使用者 实现 不同 类型 的 同步 组件 独占 式 如 reentrantlock 共享 式 如 组合式 的如 总之 aqs 为 使用 提供 了 底层 支撑 如何 组装 实现 使用者 可以 自由发挥 java 线程 池 如果 你 提交 任务 时 线程 池 队列 已满 这时 会 发生 什么 这里 区分 一下 如果 使用 的 是 无界 队列 也 就是 无界 队列 的话 没关系 继续 添加 任务 到 阻塞 队列 中 等待 执行 因为 可以 近乎 认为是 一个 无穷大 的 队列 可以 无限 存放 任务 如果 使用 的 是 有界 队列 比如 任务 首先 会被 添加到 中 满了 会 根据 maximumpoolsize 的 值 增加 线程 数量 如果 增加了 线程 数量 还是 处理 不过来 继续 满 那么 则会 使用 拒绝 策略 处理 满了 的 任务 默认 是 abortpolicy 四 开源 框架 系列 spring 面试 什么 是 spring 框架 spring 框架 有 哪些 主要 模块 spring 框架 是 一个 为 java 应用程序 开发 提供 综合 广泛 的 基础性 支持 的 java 平台 spring 帮助 开发者 解决 了 开发 中 基础性 的 问题 使得 开发人员 可以 专注 于 应用程序 的 开发 spring 框架 本身 也是 按照 设计 模式 精心 打造 的 这 使得 我们 可以 在 开发 环境 中 安 心地 地 集成 spring 框架 不必 担心 spring 是 如何 在 后台 工作 的 springmvc 面试 什么 是 是 spring 的 一个 模块 基于 mvc 的 一个 框架 无需 中间 整合 层 来 整合 springmvc 的 优点 它是 基于 组件 技术 的 全部 的 应用 对象 无论 控制器 和 视图 还是 业务 对象 之类 的 都是 java 组件 并且 和 spring 提供 的 其他 基础 结构 紧密 集成 不依 赖于 servletapi 目标 虽是 如此 但是在 实现 的 时候 确 实是 依赖于 servlet 的 可以 任意 使用 各种 视图 技术 而 不仅仅 局限于 jsp 支持 各种 请求 资源 的 映射 策略 它 应是 易于 扩展 的 springmvc 工作 原理 客户端 发送 请求 到 查询 handlermapping 找到 处理 请求 的 调用 业务 逻辑 后 返回 查询 modelandview 找到 指定 视图 视图 将 结果 返 回到 客户端 mybatis 面试 谈谈 你 对 mybatis 的 理解 mybatis 是 一个 半 orm 对象 关系 映射 框架 它 内部 封 装了 jdbc 开发 时 只需要 关注 sql 语句 本身 不需 要花费 精力 去 处理 加载 驱动 创建 连接 创建 statement 等 繁杂 的 过程 程序员 直接 编写 原生态 sql 可以 严格控制 sql 执行 性能 灵活 度 高 mybatis 可以 使用 xml 或 注解 来 配置 和 映射 原生 信息 将 pojo 映射 成 数据库 中 的 记录 避免了 几乎 所有 的 jdbc 代码 和 手动 设置 参数 以及 获取 结果 集 通过 xml 文件 或 注解 的 方式 将要 执行 的 各种 statement 配置 起来 并 通过 java 对象 和 statement 中 sql 的 动态 参数 进行 映射 生成 最终 执行 的 sql 语句 最 后由 mybatis 框架 执行 sql 并将 结果 映射 为 java 对象 并 返回 从 执行 sql 到 返回 result 的 过程 五 分布式 专题 分布式 限流 面试 谈 下 你 对 zookeeper 的 认识 zookeeper 是 一个 分布式 的 开放源码 的 分布式 应用程序 协调 服务 它是 一个 为 分布式 应用 提供 一致性 服务 的 软件 提供 的 功能 包括 配置 维护 域名服务 分布式 同步 组 服务 等 zookeeper 的 目标 就是 封 装好 复杂 易 出错 的 关键 服务 将 简单 易用 的 接口 和 性能 高效 功能 稳定 的 系统 提供给 用户 zookeeper 都有 哪些 功能 集群 管理 监控 节点 存活 状态 运行 请求 等 主 节点 选举 主 节点 挂 掉了 之后 可以 从 备用 的 节点 开始 新一轮 选 主 主 节点 选举 说的 就是 这个 选举 的 过程 使用 zookeeper 可以 协助 完成 这个 过程 分布式 锁 zookeeper 提供 两种 锁 独占 锁 共享 锁 独占 锁 即 一次 只能 有 一个 线程 使用 资源共享 锁 是 读 锁 共享 读写 互斥 即可以 有 多 线 线程 同时 读 同一个 资源 如果 要 使用 写 锁 也 只能 有 一个 线程 使用 zookeeper 可以 对 分布式 锁 进行 控制 命名 服务 在 分布式 系统 中 通过 使用 命名 服务 客户端 应用 能够 根据 指定 名字 来 获取 资源 或 服务 的 地址 提供者 等 信息 分布式 通讯 面试 rabbitmq 中 的 broker 是 指 什么 cluster 又是 指 什么 broker 是 指 一个 或 多个 erlangnode 的 逻辑 分组 且 node 上 运行 着 rabbitmq 应用程序 cluster 是 在 broker 的 基础 之上 增加了 node 之间 共享 元 数据 的 约束 什么 是 元 数据 元 数据 分为 哪些 类型 包括 哪些 内容 与 cluster 相关 的 元 数据 有 哪些 元 数据 是 如何 保存 的 元 数据 在 cluster 中 是 如何 分布 的 在 非 cluster 模式 下元 数据 主要 分为 queue 元 数据 queue 名字 和 属性 等 exchange 元 数据 exchange 名字 类型 和 属性 等 binding 元 数据 存放 路由 关系 的 查找 表 vhost 元 数据 vhost 范围内 针对 前 三者 的 名字 空间 约束 和 安全 属性 设置 在 cluster 模式 下 还 包括 cluster 中 node 位置 信息 和 node 关系 信息 元 数据 按照 erlangnode 的 类型 确 定是 仅 保存 于 ram 中 还是 同时 保 存在 ram 和 disk 上元 数据 在 cluster 中 是 全 node 分布 的 分布式数据库 面试 哨兵 sentinel 和 复制 服务器 毫无 征兆 的 罢工 是 个 麻烦事 如何 保证 备份 的 机器 是 原始 服务器 的 完整 备份 呢 这时候 就需要 哨兵 和 复制 sentinel 可以 管理 多个 redis 服务器 它 提供 了 监控 提醒 以及 自动 的 故障 转移 的 功能 replication 则是 负责 让 一个 redis 服务器 可以 配备 多个 备份 的 服务器 redis 也是 利用 这两个 功 能来 保证 redis 的 高 可用 的 事务 很多 情况下 我们 需要 一次 执行 不止 一个 命令 而且 需要 其 同时 成功 或者 失败 redis 对 事务 的 支持 也是 源自 于 这 部分 需求 即 支持 一次性 按 顺序 执行 多个 命令 的 能力 并 保证其 原子 性 资料 太多 一共 多 页 pdf 就不 一一 展示 了 欢迎 大家 关注 我 的 公 种 浩 程序员 追风 文章 都会 在里面 更新 整理 的 资料 也 会 放在 里面 最后 领取 资料 的 朋友们 记得 帮 作者 点 赞 转发 哟 感谢 支持 