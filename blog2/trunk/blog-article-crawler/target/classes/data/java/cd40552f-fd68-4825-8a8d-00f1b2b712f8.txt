基于 javascript 的 幸运 大转盘 引言 幸运 大转 盘在 很多 网 站上 app 都有 出现 之前 的话 一直 也没有 去 琢磨 自从 把 canvas 学了 一遍 后 什么 都想 自己 做一个 这 不就 写了 个 幸运 大转盘 玩玩 欢迎 大家 来 指导 交流 页面 效果 实现 思路 绘制 外围 的 大转盘 就是 绘制 两个 圆 然后 填 充好 颜色 第 个 圆 稍 小些 绘制 个 扇形 因 一个 圆 度 分 成份 故 每份 度 根据 度数 计算出 开始 角度 结束 角度 即可 绘制 出个 连续 放置 的 扇形 分别 配置 不同 的 颜色 在 每个 扇形 的 位置 分别 绘制 奖项 卡 也是 根据 角度 来 计算 然后 把 对应 的 图片 绘 上去 在 大转盘 中心 绘制 指针 图片 同时 绘制 一个 跟 图片大小 接近 的 圆 白色 填充 鼠标 的 移入 和 点击 事件 就 靠 这个 圆 来 控制在 大转盘 外围 绘制 修饰 小 灯 即 根据 角度 来 绘制 多个 小圆 点击 转盘 中心 的 指针 转动 转盘 改变 各个 元素 的 绘制 开始 角度 结束 角度 即可 停止 转动 后 判断 指针 在 谁 的 角度 范围内 判断 中奖 情况 开始 绘制 注意 圆 绘制 和 图片 绘制 的 构造 函数 放到 utiljs 中了 这里 就 不放 代码 了 之前 很多 实例 都有 这些 代码 下载 源码 也 可以 看到 绘制 外围 的 大转盘 有 两个 圆 组成 最 外面 的 大圆 和 半径 小 的 圆 都是 填充 的 绘制 外围 的 轮盘 最 外围 的 大圆 cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 ry 半径 startangle 开始 角度 endanglemathpi 结束 角度 cilcle 半径 稍小 的 圆 xx 圆心 x 坐标 yy 圆心 x 坐标 ry 半径 startangle 开始 角度 endanglemathpi 结束 角度 cilcle 此时 绘制 的 效果 绘制 选项卡 由 一个 圆 度 分 成份 每份 度 然后 计算 开始 角度 结束 角度 绘制 扇形 并且 种颜色 填充 来回 切换 这种 颜色 variilti i xx 圆心 x 坐标 yy 圆心 x 坐标 ry 半径 开始 角度 结束 角度 cilcle thiscardarrpush cilcle 此时 绘制 效果 绘制 选项卡 对应 的 图片 每次 旋 转度 放置 图片 跟 绘制 奖项 卡 差不多 需要 注意 的 时候 绘制 图片 的 时候 xy 均 要做 适量 的 偏移 代码 中 的 disxdisy 绘制 选项 图片 图片 位置 数组 这是 根据 加载 图片 存储 的 下标 来写 的 for variilti img img 绘制 指针 绘制 一个 小圆 跟 图片大小 差不多 用来 判断 鼠标 移入 指针 事件 和 鼠标 点击 指针 事件 绘制图 片时 xy 的 渲染 位置 要做 一些 偏移 不在 圆心 位置 因为 图片 的 绘制 和 圆 的 绘制 有 一些 差别 绘制 指针 xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 pointercilcle img 绘制 外围 修饰 的 小圆 装饰灯 variilti xx 圆心 x 坐标 yy 圆心 x 坐标 rr 半径 disxx 方向 偏移 startangle 开始 角度 endanglemathpi 结束 角度 cilcle cilcle 页面 的 绘制 已经 完 成了 看起来 还 不错 呢 接下来 加入 鼠标 事件 鼠标 移动 事件 判断 是 鼠标 的 位置 是否 处于 指针 位置 的 小圆 范围内 如果在 鼠标 就 变成 手 的 形状 否则 鼠标 就 普通 的 形状 鼠标 移动 事件 e varposgetoffset e 获取 鼠标 位置 pos 鼠标 捕捉 if iscatch 改为 手 状 形态 鼠标 点击 事件 开启 定时 任务 每次 以 度 的 角度 来 旋转 随机 一个 范围 的 角度 默认 旋转 圈圈 之后 再 旋转 刚才 随机 出来 的 角度 待 随机 的 角度 旋转 到位 后 停止 旋转 然后 判断 中奖 情况 判断 指针 的 角度 在 哪个 奖项 卡 的 开始 和 结束 角度 内 则 确定 中奖 情况 转动 that item 角度 旋转 itemangleif 因为 到 度 是 时候 就会 重置 为 if thattimmer 达到 最大 角度 则 重置 角度 if itemanglelt flag each item 角度 旋转 itemangle 达到 最大 角度 则 重置 角度 if itemanglelt each itemi 角度 旋转 itemangle 达到 最大 角度 则 重置 角度 if itemanglelt thisrender if thattimecount 进入 捕获 阶段 中奖 捕获 中奖 捕获 角度 item resultresult settimeout function alert result 代码 就 完 成了 源码 下载方式 少量 积分 下载 代码 方式 关注 下方 公众 号 回复 下载 代码 更多 源码 基于 canvas 的 手风琴 特效 附 源码 抖 音 很 火 的 华为 太空人 表盘 附 源码 基于 javascript 页面 动态 验证码 附 源码 基于 javascript 的 拖动 滑块 拼图 验证 附 源码 基于 javascript 的 幸运 大转盘 附 源码 抖 音 很 火 的 罗盘 时钟 附 源码 基于 javascript 的 俄罗斯方块 小游戏 附 源码 基于 javascript 的 贪吃蛇 游戏 附 源码 基于 javascript 的 拼图游戏 附 源码 用 javascript 给 女儿 做的 烟花 特效 附 源码 老父亲 给 女儿 做的 下雪 特效 满足 女儿 看 雪 的 愿望 附 源码 雷达 扫描 特效 附 源码 香港黄金 配角 吴孟达 去世 后 程序员 以 轮播 图 来 悼念 达 叔 达 叔 一路 走好 附 源码 仿 抖 音 刷新 进度条 附 源码 仿 头条 方形 刷新 进度条 附 源码 仿 加速 球 水波 评分 特效 附 源码 基于 canvas 的 刮刮卡 附 源码 原生 js 写 的 左侧 飞入 拼图 特效 你 是 喜欢 美女 单飞 还是 双飞 附 源码 用 js 写 的 旋转 木马 在 新年 献给 各位 刚 登基 的 皇帝 让 你 的 后宫 转起来 程序员 就是 可以 为所欲为 为 附 源码 用 js 写 的 轮播 图 八位 女明星 你 翻 谁 的 牌 程序员 就是 可以 为所欲为 附 源码 原生 js 实现 美女 拼图 把 美女 老婆 抱 回家 个 美女 够不够 程序员 就是 可以 为所欲为 附 源码 用 js 仿 探探 拖拽 卡片 的 效果 飞 卡片 的 效果 感觉 挺 酷 最后 有 美女 看 哦 附 源码 老婆 说 程序员 不懂 浪漫 程序员 默默 拿 起了 键盘 这就 亲手 带你 去看 流星雨 女人 真的 会 影响 拔刀 的 速度 附 源码 学生 成绩 管理 系统 有 源码 你 的 毕 设 我 的 心 附 源码 