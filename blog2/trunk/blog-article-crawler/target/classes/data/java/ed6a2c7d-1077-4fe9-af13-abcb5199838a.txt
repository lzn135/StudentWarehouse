用 javascript 写 抖 音 很 火 的 罗盘 时钟 附 源码 原生 js 制作 在 抖 音 上 很 火 的 罗盘 布局 时钟 代码 带 日期 月份 星期 时分秒 圆盘 时钟 效果 图个 构造 函数 文本 构造 函数 文字 的 构造 函数 functiontext o thisxx 坐标 thisyy 坐标 thisdisxx 坐标 偏移量 thisdisyy 坐标 偏移量 thistext 内容 thisfontnull 字体 对齐 方式 thisinit o o for varkeyino context this obj ctxbeginpath ctxtranslate objxobjy if objangle 根据 旋转 角度 来 执行 旋转 ctxrotate objanglemathpi if objfont objtextalign objfill 是否 填充 objfillstyle nullctxfilltext if objstroke 是否 描 边 objstrokestyle ctxrestore returnthis 线段 构造 函数 直线 的 构造 functionline o thisxx 坐标 thisyy 坐标 thisstartx 开 始点 x 位置 thisstarty 开 始点 y 位置 thisendx 结束 点 x 位置 thisendy 结束 点 y 位置 thisthinfalse 设置 变细 系数 thisinit o o for varkeyino ctx innerrender this obj ctxsave ctxbeginpath ctxtranslate objxobjy if objthin ctxtranslate if objlinewidth 设定 线宽 objstrokestyle 划线 ctxmoveto ctxlineto objendxobjendy ctxstroke ctxrestore returnthis 圆 构造 函数 构造 函数 functioncircle o thisx 圆心 x 坐标 thisy 圆心 y 坐标 thisr 半径 thisstartangle 开始 角度 thisendangle 结束 角度 顺时针 逆时针 方向 指定 thisstrokefalse 是否 描 边 thisfillfalse 是否 填充 thisscalex 缩放 x 比例 thisscaley 缩放 y 比例 o 初始化 o for varkeyino thiskeyokey 绘制 context varctxcontext 获取 上下文 ctxsave ctxbeginpath ctxtranslate thisxthisy if thisfill ctxmoveto ctxmoveto thisxthisy ctxscale 设定 缩放 ctxarc 画圆 if thislinewidth 线宽 thisfill 是否 填充 thisfillstyle nullctxfill if thisstroke 是否 描 边 thisstrokestyle nullctxstroke ctxrestore returnthis 绘制 绘制 年 绘制 年 绘制 年 年 绘制 星期 绘制 星期 绘制 月份 绘制 月 每次 递增 角度 angle 初始 for variilti indexiif angle thismonthindex indexthismonth 月 if indexthismonth 当前 设置成 白色 其他 为 灰色 month 绘制 日期 绘制 日 每次 递增 角度 angle 初始 for variilti indexiif indexltthisdate angle thisdateindex indexthisdate 日 if indexthisdate 当前 设置成 白色 其他 为 灰色 date 目前 的 效果 绘制 小时 绘制 小时 每次 递增 角度 angle 初始 for variilti if iltthishour angle thishouri ithishour 到 就 切 换成 content contentlength content content 时 if ithishour 当前 设置成 白色 其他 为 灰色 hour 绘制 分钟 绘制 分钟 每次 递增 角度 angle 初始 for variilti if iltthisminute angle thisminutei ithisminute 到 就 切 换成 content contentlength content content 分 if ithisminute 当前 设置成 白色 其他 为 灰色 minute 绘制 秒钟 绘制 秒钟 坐标 ythishy 坐标 disxx 方向 偏移 disyy 方向 偏移 varangleincre 每次 递增 角度 angle 初始 for variilti 角度 是 份 每份 为 度 当前 是 thissecond 所以 thissecond 的 角度 应该是 大于 它 的 是 从 开始 递增 依次是 计算 thissecondi angleincre 小于 它 的 是 依次 递减 依次是 计算 ithissecond angleincreif iltthissecond 小于 当前 秒 则 angle thissecondi angleincreelse 大于 当前 秒 angle ithissecond 到 就 切 换成 content contentlength content content 秒 if ithissecond 当前 设置成 白色 其他 为 灰色 fillstylecolor 创建 秒 secondnewtext second 此时 的 效果 加入 指示 线 线 绘制 多条 圆弧 绘制 圆 xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle cilclenewcircle xx 圆心 x 坐标 yy 圆心 x 坐标 r 半径 startangle 开始 角度 endanglemathpi 结束 角度 是否 描 边 cilcle 此时 图形 已经 基本完成 加入 定时 任务 让 它 转起来 秒钟 转动 开始 转动 毫秒 执行 一次 setinterval this 秒钟 转动 计数器 递增 thistimecount 毫秒 执行 一次 所 以次 才是 秒 if thistimecount 计数器 生效 thistimecount 计数器 清零 secondflagtrue 秒钟 标记 thissecond 秒钟 if thissecond 到达 以后 设置 为 this doupdatecall this 秒钟 updateeach item if secondflag 秒钟 计数 生效 if 秒 秒 角度 旋转 itemangle 因 itemangleincre 是 除以 会有 小数 这里 采取 乘 再 除以 的 方式 来 操作 达到 最大 角度 则 重置 角度 if itemanglelt itemangle itemangle thisrender 分钟 转动 分钟 转动 thisminute each item if 分 分 角度 旋转 达到 最大 角度 则 重置 角度 if itemanglelt thisrender 时钟 转动 时钟 转动 thishour each item if 时 时 达到 最大 角度 则 重置 角度 if itemanglelt 日期 转动 日 转动 日期 递增 更新 周 几 if 大于 本月 最大 天数 就 切 换到 日 更新 月份 更 新日 当 月月 最大 天数 重新 获取 月份 的 最大 天数 计算 两月 之间 天数 的 差值 each item if 日 旋转 角度 dateupdateflag 本月 的 最后 一天 可能要 更新 if 当前 月 天数 不等于 则 表示 要 多 旋转 角度 比如 当月 总共 天 今天是 号 则 直接 跳 转到 号 号 被 跳过 超过 最新 天数 的 要 隐藏 比如 当月 总共 天 今天是 号 号 要被 隐藏 if 达到 最大 角度 则 重置 角度 if itemanglelt 星期 变更 更新 星期 几 thisday 大于 则 重置 if thisdaygt thisday 数组 中 获取 周 几 月 转动 月 转动 thismonthgt each item if 月 旋转 角度 达到 最大 角度 则 重置 角度 if itemanglelt 年 更 新年 转动 年 源码 下载 不要 积分 兄弟们 给 个 三连 咯 