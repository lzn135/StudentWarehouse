仿 360 水波 评分 特效 加速 球 特效 水波 动态 加载 动画 可 改 造成 圆形 进度条 很 丝 滑 先看 一下 最终 效果 正弦曲线 正弦曲线 公式 yasin bxc d 振幅 是 aa 值 越大 曲线 更 陡峭 b 值 越大 周期 越短 c 水平 位移 垂直 位移 是 d 控制 曲线 上下 移动 实现 思路 首 先来 绘制 曲线 定义 构造 函数 和 初始化 方法 sin 曲线 构造 函数 functiondrawsin option thisinit option 初始化 o thisa 振幅 thisb 周期 thisc 水平 位移 thisdh 垂直 位移 thiscolororange 填充 颜色 thisspeed 移动 速度 thispercent 百分比 thisoffsetx 开始 x 坐标 for varkeyino 循环 new 时候 传入 的 参数 如果 存在 则 覆盖 没有 传 则 使用 默认 if thiskeyokey 添加 一个 render 绘制 函数 绘制 曲线 c csave cbeginpath varyfor 正弦曲线 公式 yasin bxc d 振幅 是 aa 值 越大 曲线 更 陡峭 b 值 越大 周期 越短 c 水平 位移 垂直 位移 是 d 控制 曲线 上下 移动 ythisamathsin thisb xthisoffsetx thisc thisdclineto xy clineto wh clineto h cclosepath crestore returnthis 生成 一根 正弦曲线 abcdhcolorff render ctx 看一下 现在 的 效果 加上 流动 代码 thiscthisspeed 设定 横向 移动 递增 functionmove 执行 动画 帧 move 清理 画布 ctxclearrect wh 更新 sinupdate 绘制 sinrender ctx move 加上 颜色 裁 剪成 圆形 draw functiondraw 画圆 ctxarc whmathpitrue ctxstroke ctxclip 效果 如下 加上 百分比 this 显示 的 百分比 functiontext val if inputclick e 阻止 冒泡 if div if return 显示 pstyledisplay 隐藏 处理 百分比 editpercent 执行 动画 pinnertext pinnertext 控制 文本 输入 functiondoinput obj dg if objvalue objvalue if valuegt objvalueelseif valuelt objvalue 百分比 点击 事件 clickdoclick clickdoclick 看下 效果 加多 一条 曲线 百分比 可以 编辑 就 完 成了 换 其他 图形 试试 三角形 长方形 心 形 全部 代码 this percent canvas d 控制 百分比 内容 是否 可以 被 更新 draw functiondraw 画圆 ctxarc whmathpitrue ctxstroke ctxclip drawtriangle 画 三角形 ctxmoveto w ctxlineto ctxlineto ctxclosepath ctxstroke ctxclip drawrect 画 方形 ctxrect ctxclosepath ctxstroke ctxclip drawheart 画 心 形 ctxmoveto w ctxstroke ctxclip sin 曲线 构造 函数 functiondrawsin option thisinit option 初始化 o thisa 振幅 thisb 周期 thisc 水平 位移 thisdh 垂直 位移 thiscolororange 填充 颜色 thisspeed 移动 速度 thispercent 百分比 thisoffsetx 开始 x 坐标 页面 加载 时 是否 执行 移动 动画 thismove 定义 移动 动画 的 相关 参数 start 开始 位置 end 结束 位置 total 总 高度 dis 距离 画布 底部 的 高度 speed 美 移动 动画 速度 for varkeyino 循环 new 时候 传入 的 参数 如果 存在 则 覆盖 没有 传 则 使用 默认 if thiskeyokeyif thismoveflag 如果有 移动 标示 则 sin 曲线 的 y 位置 更新 为 初始 位置 否则 执行 更新 函数 thisupdate thiscthisspeed 设定 横向 移动 递增 if 这个 是 修改 百分比 执行 的 更新 块 计算 当前 百分比 应该 占用 总 高度 的 实 值 计算 应该 处于 的 位置 if 水波 往下 执行 到 位置 后 释放 相关 参数 设置 结束 位置 设定 最终 百分比 如果 没有 执行 到 终点 就 继续 执行 设定 百分比 thismovetotal 显示 百分比 text thispercent 绘制 曲线 c csave cbeginpath varyfor 正弦曲线 公式 yasin bxc d 振幅 是 aa 值 越大 曲线 更 陡峭 b 值 越大 周期 越短 c 水平 位移 垂直 位移 是 d 控制 曲线 上下 移动 ythisamathsin thisb xthisoffsetx thisc thisdclineto xy clineto wh clineto h cclosepath crestore returnthis 显示 的 百分比 functiontext val if inputclick 创建 sin 曲线 render ctx 创建 sin 曲线 render ctx functionmove 执行 动画 帧 move 清理 画布 ctxclearrect wh 更新 sinupdate 绘制 sinrender ctx sinupdate sinrender ctx move functiondoclick e 阻止 冒泡 if div if return 显示 pstyledisplay 隐藏 处理 百分比 editpercent 执行 动画 pinnertext pinnertext 控制 文本 输入 functiondoinput obj dg if objvalue objvalue if valuegt objvalueelseif valuelt objvalue 百分比 点击 事件 clickdoclick clickdoclick 给 个 三连 吧 大佬 们 谢谢 