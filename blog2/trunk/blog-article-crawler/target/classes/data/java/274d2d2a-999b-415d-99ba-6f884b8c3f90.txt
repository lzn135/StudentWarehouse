英特尔 加入 gpu 战局 终 用上 6nm 工艺 作者 老 石 来源 老 石 谈 芯 头 图 csdn 付费 下载 自 东方 ic 在 月 中旬 结束 的 英特尔 架构 日 活动 里 英特尔 发布 了 包括 晶体管 工艺 fpga 路线图 oneapi 框架 等 一系列 最新 的 技术 进展 这些 技术 和 产品 涵 盖了 工艺 架构 存储 互连 安全 软件 六大 层面 这 也是 英特尔 首席 架构师 rajakoduri 一直在 主推 的 英特尔 全 栈 式 软硬件 架构 xegpu 是 英特尔 近年来 重点 研发 的 下一代 gpu 架构 和 英特尔 之前 的 集成 gpu 不同 xe 更多 的 是 一个 基础 gpu 架构 由此 可以 衍 生出 多种 针对 不同 应用领域 和 场景 的 gpu 产品 这次 正式 发布 的 xegpu 产品 系列 从 主 打 集成显卡 和 入门级 独立 显卡 的 xelp 到 针对 游戏 和 桌面 性能 进行 优化 的 xehpg 再到 主要 应用于 数据中心 和 ai 的 xehp 然后 还有 面向 高性能 计算 的 xehpc 一共 四大 系列 特别 值得注意 的 是 这 四类 xegpu 将使 用 不同 的 半导体 制作 工艺 进行 流 片 生产 其中 不仅 包含 英特尔 自家 的 纳米 工艺 以及 这次 发布 的 下一代 纳米 superfin 工艺 还 包 含了 来自 其他 代工厂 的 工艺 虽然在 发布 会上 没有 直接 点名 但 台 积 电 以 纳米 工艺 拿下 英特尔 数十万 片 芯片 订单 的 消息 早 就是 公开 的 秘密 了 在 今年 的 hotchips 大会上 英特尔 对 xe 架构 进行了 深入 介绍 可以 看到 xegpu 毫无疑问 被 英特尔 寄予厚望 xe 的 出现 正式 宣布 英特尔 进军 高性能 gpu 领域 也 完 成了 英特尔 的 四大 计算 类型 的 芯片 全 覆盖 在这 篇文章 中 我 将从 硬件 架构 软件 堆栈 应用 场景 等 领域 对 xegpu 进行 深入 的 技术 解析 我 用 思维 导 图 的 形式 总 结了 本文 涉及 的 全部 技术 要点 xe 架构 的 主要特点 xe 的 主要 设计 思路 有 三点 软件 先行 兼顾 扩展 全新 应用 这表明 xe 并非是 作为 一个 孤立 的 产品 出现 而是 会 结合 英特尔 完整 的 硬件 产品组合 以及 统一 的 软件开发 环境 而 协同 设计 raja 多次 强调 希望 使用 相同 的 软件 栈 相同 的 微 架构 设计 实现 多个 xe 产品 的 快速 扩展 这在 后面 的 文章 中 也 会 多次 提及 xe 的 主体 架构 基于 slice 实现 最多 有 个 subslice 共计 高达 个 euexecutionunit 能 提供 每 周期 次 浮点 运算 和 英特尔 的 前 一代 集 显 相比 xelp 几乎 重新 设计 了 自身 的 微 架构 特别是 最基本 的 运算 执行 单元 euxelp 的 eu 架构 示意图 如下 所示 在 英特尔 的 第 代 集 显 中 每个 eu 里 包含 个 用来 进行 算术 运算 的 流水线 为了 得到 更高 的 算术 运算 性能 xelp 将 eu 里 的 算术 运算 流水线 扩展 了 一倍 达到 条 这些 算术 运算 流水线 可以 执行 定点数 单精度 浮点数 和 双 精度 浮点数 运算 以及 复杂 数学 运算 和 可选 的 矩阵 运算 的 扩展 每条 流水线 的 宽度 都比 上一代 得 到了 增加 从 而将 int 和 int 的 性能 提 升了 一倍 事实上 为了 简化 实现 过程 xelp 将上 一代 集 显 的 两个 eu 单元 合并 在一起 并 共用 一个 线程 管理 模块 在 存储系统 方面 xelp 重新 设计 了 lcache 并将 lcache 的 容量 提升 到了 mb 此外 还将 显卡 内存 的 带宽 增加了 一倍 xelp 的 游戏 性能 xelp 主要 的 市场 定位 是 集成显卡 以及 入门级 独立 显卡 即便如此 xelp 也 对 游戏 性能 进行了 针对性 的 优化 下面 就是 一些 在 xelp 上 运行 的 游戏 截图 例如 xelp 可以 支持 战地 在 pfps 和 特效 全开 时 的 流畅 运 行在 具体 的 优化 方面 首先 就是在 保持 相同 性能 的 前提下 大幅 降 低了 功耗 例如 下图 展示 了 在 运行 战地 的 时候 英特尔 前 一代 gpu 和 xelp 的 画面 和 功耗 对比 可以 看到 在 画质 相似 的 情况下 前 一代 gpu 的 功耗 为 瓦 而 xelp 仅为 瓦 此外 xelp 还对 帧率 进行了 提升 这也 能 很大 程 度上 避 免掉 帧 使得 画质 表现 更为 细腻 在下 图中 坦克 的 履带 部分 也 能 较为 明显 的 看出来 正因如此 在 相同 功耗 条件下 xelp 可以 在 保证 稳定 帧数 的 同时 带来 更高 质量 的 画面 效果 下图 就 对 比了 前 一代 gpu 和 xelp 的 画面 渲染 能力 和 画质 可以 看到 xelp 的 细节 表现 能力 要 远超 于 前 一代 gpu 比 如对 阴影 部分和 车体 细节 的 刻画 等等 在 跑 分 方面 和 同级 别的 英伟 达 geforcemx 以及 amd 的 vega 相比 xelpgpu 跑 出了 更高 的 评分 见 下表 值得注意 的 是 这里 参与 跑 分 的 是 集成 在 tigerlake 里 的 集成 xegpu 但它 的 跑 分 竟 稍微 超 过了 英伟 达 的 独立 显卡 mx 要知道 后者 不仅 有 更高 的 频率 还有 gb 的 gddr 显存 这也 从 另外 一个 角度 印证 了 xe 的 性能 潜力 对 ai 运算 的 优化 在 英特尔 最新 的 tigerlake 架构 中 包 含了 名为 willowcore 的 全新 cpu 内核 单元 以及 xelp 的 集 显 版本 关于 tigerlake 和 willowcore 的 详细 技术 解读 将会 在下 篇文章 里 进行 深入 介绍 这里 想 提到 的 是 tigerlake 里 的 xelp 还对 ai 运算 进行了 一定 的 架构 优化 当 结合 openvino 工具包 和 英特尔 的 dlboost 技术 时 就可以 大幅 提升 ai 推断 的 算 力 如 下图 所示 当 运行 gigapixelai 进行 图像 增强 时 xelp 和 前 两代 gpu 相比 取得了 指数 级 的 算 力 提升 对 多媒体 和 显示 的 优化 xelp 对于 多媒体 和 显示 方面 的 优化 主要 的 受众 就是 广大 的 视频 和 图像 内容 创作者 这方 面的 优化 主要有 三个 主要 方向 即 提供 更多 的 像素 更多 色彩 以及 更低 的 功耗 具体来说 xelp 里 集 成了 多媒体 引擎 mediaengine 它 支持 kk 帧 视频 dolby 视界 hdr 等 一系列 超 高清 视频 标准 在编 解码 吞吐量 上达 到了 最 高倍 的 性能 提 升在 xelp 的 显示 引擎 displayengine 里 集 成了 条 像素 处理 流水线 使得 xelp 支持 包括 等 多种 视频 接口 以及 kuhdhdr 和 杜比 视界 等 多种 超 高清 视频 的 播放 关于 多媒体 引擎 和 显示 引擎 的 具体 架构 细节 可以 参见 xe 在 hotchips 上 的 幻灯片 已 上传 至 知识 星球 xegpu 的 软件 堆栈 xe 作为 一个 全新 的 gpu 产品 系列 它 的 一个 主要 优化 重点 就在于 软件 系统 的 设计 它 的 设计 重心 就是 为 现在 和 未来 的 xe 架构 使用 统一 的 驱动 协议 栈 这与 英特尔 oneapi 的 核心 思想 是 一致 的 oneapi 是 英特尔 在 软件 层面 最大 的 雄心 关于 oneapi 的 更多 内容 可以 看一下 老 石 之前 的 文章 oneapi 天下大同 相比 之前 的 集成显卡 系列 xegpu 对 软件 驱动 的 架构 做了 很多 大刀阔斧 的 改变 其中 最主要 的 有 三点 更 高效 的 编译器 全新 的 directx 驱动 以及 gpuprofile 见 下图 此外 xe 还 支持 对 特定 游戏 的 针对性 优化 名为 这种 优化 方式 会 自动 进行 不需要 进行 额外 的 驱动 更新 xegpu 的 产品 系列 和 制造 工艺 前面 介绍 的 xelp 主要 将 作为 tigerlakesoc 里 的 集成 gpu 面向市场 但 除此之外 xelp 还有 其他 两种 产品 形式 一个 称为 dg 另一个 称为 sg 其中 dg 是 英特尔 的 首个 独立 显卡 产品 它 主要 面向 的 是 基于 移动 平台 的 视频 和 图像 内容 创作者 sg 是 另一个 基于 xelp 架构 的 独立 显卡 产品 它 主要 面向 的 则是 数据中心 里 的 多媒体 内容 处理 和 相关 应用 对于 数据中心 更 广阔 的 应用 场景 xe 有 一款 名为 xehp 的 gpu 产品 专门 负责 和 xelp 相比 xehp 在 微 架构 上 专门 为 数据中心 做了 优化 以 提升 gpu 的 整体 性能 例如 xehp 的 eu 数量 从 xelp 的 几十个 直接 增加 到上 千个 运行 频率 比 xelp 上升 两倍 显存 带 宽和 ipc 也 比 集成显卡 提升 倍 等等 此外 xehp 还 特别 设计 了 数学 运算 单元 比如 增 强了 对 双 精度 浮点数 和 ai 相关 的 数学 运算 的 硬件 支持 更有 意思 的 是 xehp 还能 通过 直接 增加 tile 的 数量 实现 性能 的 线性 增长 例如 xehp 目前 有 三种 封装 形式 分别 包 含了 个个 和 个 tile 其中 每个 tile 就是 一个 完整 的 xegpu 子 芯片 从下 面的 实验室 测试 实例 可以 看到 当 增加 tile 的 数量 时 芯片 的 fp 峰值 算 力 从 tflops 线性 上 升到 tflops 和 tflops 这种 线性 扩展 的 最大 优势 在于 在 一次性 完成 单个 tile 的 软硬件 设计 之后 直接 通过 增加 tile 的 数量 就可以 成倍 提升 性能 而 无需 对 软硬件 做出 改变 或 重新 设计 事实上 这样 的 线性 扩展 并没有 看起来 这么 直接 这 其中 涉及 了 诸如 芯片 封装 互连 软硬件 架构 的 扩展性 设计 等 很多 方面 的 内容 这 和 英特尔 fpga 里 使用 的 通过 emib 和 aib 技术 将 fpga 的 可编程逻辑阵列 与 不同 收发器 模块 进行 互连 有着 异曲同工之妙 xe 的 第三个 产品 大类 名为 xehpg 它 专门 针对 游戏 和 高性能 桌面 应用 进行了 优化 比如 增加了 光线 追踪 raytracing 的 硬件 支持 等等 xehpg 预 计年 正式 出货 xe 的 最后 一个 产品 系列 就是 代 号为 pontevecchio 的 xehpc 它 主要 面向 高性能 计算 超级 计算机 等 领域 进行 优化 和 设计 前不久 英特尔 宣布 自家 的 纳米 工艺 遇到问题 并将 投产 时间 推 迟到 年 这也 造成了 英特尔 股价 暴跌 近 随后 英特尔 宣布 会 考虑 和 其他 芯片 代工厂 合作 并 外包 部分 芯片 产品 正如 本文 开头 提到 的 台 积 电 随后 获得了 英特尔 的 万片 纳米 芯片 订单 这些 订单 中 的 很大 一部分 就 来自 xegpu 系列 在 本次 发布 会上 英特尔 表示 将 会把 xehpg 和 hehpc 的 一部分 芯片 使用 外部 工艺 进行 生产 如 下图 所示 相信 这 势必会 加速 xegpu 的 面世 时间 相比之下 xelp 会 使用 英特尔 纳米 superfin 工艺 生产 xehp 会 使用 增强 的 superfin 工艺 生产 值得注意 的 是 最 高端 的 xehpc 将 使用 英特尔 的 foverosd 封装 技术 以及 coemib 互连 技术 并 采用 四种 不同 的 生产工艺 以 针对 不同 的 细分 领域 进行 优化 结语 从 xe 最初 的 传言 至今 xe 的 发展 和 动态 一直是 业界 关心 的 重点 xegpu 的 出 现从 多个 维度 补充 了 英特尔 当前 缺失 的 多个 产品 拼图 首先 它 正式 宣告 英特尔 进军 高性能 gpu 领域 并将 触角 一次性 伸向 移动 端 桌面 端 游戏 数据中心 高性能 计算 等 多个 领域 此外 xegpu 将 作为 英特尔 向量 计算 的 代表性 产品 进一步 补全 了 英特尔 的 ai 产品组合 如 下图 所示 从 架构 和 技术 的 角度 xe 采 用了 一种 通用 的 微 架构 并 在此基础上 实现 了 多个 系列 的 演变 和 快速 扩展 这 非常 符合 当前 领域 细分 的 芯片 设计 大趋势 根据 现有 的 跑 分 和 演示 来看 xe 和 其他 竞争对手 相比 也 有着 很强 的 竞争 优势 那么 究竟 xe 能否 帮助 英特尔 冲出重围 打下 一片 新 的 江山 我们 拭目以待 注 本文 图片 来自 intel 本文 仅代表 作者 个人观点 与 任职 单位 无关 更多 精彩 推荐 mate 成 麒麟 绝唱 光刻机 进厂 即 遭 抵押 北斗 指路 能否 解除 芯 痛 专属 程序员 的 浪漫 代码 每日 趣闻 云 计算 到底是 谁 发明 的 马斯克 脑 机 接口 brainos 相继 发布 不努力 也 能有 出路 了 从 dagger 到 hilt 谷歌 为何 执着 于 让我们 用 用 依赖 注入 以太 坊 layer 扩容 v 神 为什么 偏爱 zkrollup 点 分享 点点 赞 点 在看 