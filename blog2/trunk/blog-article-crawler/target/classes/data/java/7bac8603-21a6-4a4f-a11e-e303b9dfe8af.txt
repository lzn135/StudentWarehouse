2020-2021 年 java 实习 校 招 秋 招 春 招 后端 面试题 上 持续 更新 java 面试题 本 面试题 是 我 本人 亲自 整理 内包 含了 很多 自己 亲身经历 的 面试题 整理 不易 请勿 直接 转载 有用 的 连 支持 一波 上半 部分 分为 基础 jvmjavaee 框架 数据库 数据结构 与 算法 工具 计算机网络 操作系统 下半 部分 地址 跳转 java 开发 编程 规范 地址 跳转 一 java 基础 java 的 个 基本 数据类型 整形 longint 字节 shortbyte 浮点 型 doublefloat 字符 型 char 布尔 型 booleanamp 与 ampamp 区别 ampamp 之所以 称为 短路 运算 是因为 如果 ampamp 左边 的 表达式 的 值 是 false 右边 的 表达式 会被 直接 短路 掉 不会 进行 运算 最有 效率 的 乘 ltltstring 不能 被 继承 final 用法 修饰 类 表示 该类 不能 被 继承 修饰 方法 表示 方法 不能 被 重写 修饰 变量 表示 变量 只能 一次 赋值 以后 值 不能 被 修改 常量 多线程 操作 字符串 缓冲区 下 操作 大量 数据 stringbuffer 可变 字符串 效率 低 线程 安全 单线程 操作 字符串 缓冲区 下 操作 大量 数据 stringbuilder 可变 字符 序列 效率高 线程 不安全 try 里 有 一个 return 语句 那么 紧跟 在 这个 try 后 的 finally 里 的 代码 会不会 被执行 什么时候 被执行 在 return 前 还是 后 答 会 执 行在 方法 返回 调用者 前 执 行在 finally 中 改变 返回值 的 做法 是 不好 的 因为 如果 存在 finally 代码 块 try 中 的 return 语句 不会 立马 返回 调用者 而是 记 录下 返回值 待 finally 代码 块 执行 完毕 之后 再向 调用者 返回 其 值 然后 如果在 finally 中 修 改了 返回值 就会 返回 修改后 的 值 事务 的 acid 是 指 原子 性 atomicity 事务 是 原子 性 操作 由 一系列 动作 组成 事务 的 原子 性 确保 动作 要么 全部 完成 要么 完全 不起作用 一致性 consistency 一旦 所有 事务 动作 完成 事务 就 要被 提交 数据 和 资源 处于 一种 满足 业务 规则 的 一致性 状态 中 隔离 性 isolation 可能 多个 事务 会 同时 处理 相同 的 数据 因此 每个 事务 都应该 与其 他 事务 隔离 开来 防止 数据 损坏 持久性 durability 事务 一旦 完成 无论 系统 发生 什么 错误 结果 都不会 受到影响 通常情况下 事务 的 结果 被 写到 持久 化 存储器 中用 java 写 一个 冒泡 排序 for 外层 循环 控制 排序 趟 数 for 内层 循环 控制 每 一趟 排序 多少次 if arrjgtarrj 用 java 写 一个 二分 查找 非 递归 实现 intarrayinta lolthi mid lohi if arraymida returnmidelseif arraymidlta 递归 实现 if lolthi intmid lohi if aarraymid returnmidelseif agtarraymid returnsort arrayamidhi elsereturnsort arrayalomid return 什么 是 多态 所谓 的 多态 简单 的 理解 就是 对象 在 不同 情况下 的 不同 表现 具体 体现在 定义 和 功能 两个方面 简单 的 总结 一下 多态 可以用 三个 定义 和 两个 方法来 总结 三个 定义 分 别是 父 类 定义 子类 构建 接口 定义 实现 类 构 建和 抽象类 定义 实体类 构建 而 两个 方法 分 别是 方法 重载 和 方法 重写 什么 是 继承 继承 是 java 面向对象 编程技术 的 一块 基石 因为 它 允许 创建 分等级 层次 的 类 继承 就是 子类 继承 父 类 的 特征 和 行为 使得 子类 对象 实例 具有 父 类 的 实例 域 和 方法 或 子类 从父 类 继承 方法 使得 子类 具有 父 类 相同 的 行为 重写 override 和 重载 overload 重写 是 子类 对 父 类 的 允许 访问 的 方法 的 实现 过程 进行 重新 编写 返回值 和 形 参 都不能 改变 重载 overloading 是 在 一个 类 里面 方法 名字 相同 而 参数 不同 返回 类型 可以 相同 也 可以 不同 每个 重载 的 方法 或者 构造 函数 都必须 有 一个 独一无二 的 参数 类型 列表 接口 的 意义 用 三个 词 概括 规范 扩展 回 调和 equals 面试题 abc strstr strstr false 比较 地址 strequals str strequals str true 比较 值 strstr strstr false 地址 不同 strequals str strequals str true 值 相同 strstrintern strstrintern true 数组 array 和 列表 arraylist 有 什么区别 什么时候 应该 使用 array 而 不是 arraylistarray 可以 包含 基本 类型 arraylist 只能 包含 对象 类型 array 大小 是 固定 的 arraylist 的 大小 是 动态 变化 的 arraylist 提供 了 更多 的 方法 和 特性 比如 addall removeall iterator 等等 对于 基本 类型 数据 集合 使用 自动 装箱 来 减少 编码 工作量 但是 当 处 固定 大小 的 基本 数据类型 的 时候 这种 方式 相对 比较慢 java 有 几种 引用 级别 有 什么区别 特点 谈谈 你 的 理解 强 引用 强 引 用是 平常 中 使用 最多 的 引用 强 引 用在 程序 内存不足 oom 的 时候 也 不 会被 回收 使用 方式 str 直接 new 软 引用 软 引 用在 程序 内存不足 时 会被 回收 使用 方式 newstring str 可用 场景 创建 缓存 的 时候 创建 的 对象 放进 缓存 中 当 内存不足 时 jvm 就会 回收 早先 创建 的 对象 弱 引用 弱 引用 就是 只要 jvm 垃圾 回收 器 发现了 它就 会 将之 回收 使用 方式 str 可用 场景 java 源码 中 的 中 的 key 就是 使用 弱 引用 我 的 理解 就是 一旦 我 不需要 某个 引用 jvm 会 自动 帮我 处理 它 这样 我 就不 需 要做 其它 操作 虚 引用 虚 引用 的 回收 机制 跟 弱 引用 差不多 但是 它被 回收 之前 会被 放入 referencequeue 中 注意 哦 其它 引 用是 被 jvm 回收 后 才 被 传入 referencequeue 中 的 由于 这个 机制 所以 虚 引用 大多 被 用于 引用 销毁 前 的 处理工作 还有 就是 虚 引用 创建 的 时候 必须 带有 referencequeue 使用 例子 newstring str 可用 场景 对象 销毁 前 的 一些 操作 比如说 资源 释放 等 objectfinalize 虽然 也 可以 做 这类 动作 但是 这个 方式 即 不安全 又 低效 什么 是 浅 拷贝 和 深 拷贝 的 区别 浅 拷贝 是 按 位 拷贝 对象 它会 创建 一个 新 对象 这个 对象 有着 原始 对象 属性 值 的 一份 精确 拷贝 如果 属性 是 基本 类型 拷贝 的 就是 基本 类型 的 值 如果 属性 是 内存地址 引用 类型 拷贝 的 就是 内存地址 因此 如果 其中 一个 对象 改 变了 这个 地址 就会 影响到 另一个 对象 即 默认 拷贝 构造 函数 只是 对 对象 进行 浅 拷贝 复制 逐个 成员 依次 拷贝 即 只 复制 对象 空间 而 不 复制 资源 深 拷贝 被 复制 对象 的 所有 变量 都 含有 与 原来 的 对象 相同 的 值 而 那些 引用 其他 对象 的 变量 将 指向 被 复制 过 的 新 对象 而 不再是 原有 的 那些 被 引用 的 对象 换言之 深 拷贝 把 要 复制 的 对象 所 引用 的 对象 都 复制 了 一遍 实现 方法 类 继承 cloneable 重写 clone aab 与 ab 有 什么区别 吗 操作符 会 进行 隐 式 自动 类型 转换 此处 ab 隐 式 的 将 加 操作 的 结果 类型 强制 转 换为 持有 结果 的 类型 而 aab 则 不会 自动 进行 类型 转换 如 shortss 正确 ss 错误 右边 是 int 类型 为 关键字 final 为 用于 标识 常量 的 关键字 final 标识 的 关键字 存储 在 常量 池中 finalize 为 方法 finalize 方法 在 object 中进 行了 定义 用于 在 对象 消 失时 由 jvm 进行 调用 用于 对 对象 进行 垃圾 回收 类似于 c 中 的 析 构 函数 用户 自定义 时 用于 释放 对象 占用 的 资源 比如 进行 i 操作 finally 为 区块 标志 用于 try 语 句中 finally 用于 标识 代码 块 与 try 进行 配合 不论 try 中 的 代码 执行 完 或 没有 执行 完 这里 指 有 异常 该 代码 块 之中 的 程序 必定会 进行 jdbc 操作 的 步骤 加载 数据库 驱动 类 打开 数据库 连接 执行 sql 语句 处理 返回 结果 关闭 资源 接口 是否 可继承 extends 接口 抽象类 是否 可 实现 implements 接口 抽象类 是否 可继承 具体 类 concreteclass 接口 可以 继承 接口 而且 支持 多重 继承 抽象类 可以 实现 implements 接口 抽象类 可继承 具体 类 也 可以 继承 抽象类 了解 java 的 反射 吗 说说看 java 一般 通过 new 创建 对象 也 可以 通过 java 的 放射 创建 对象 有种 实现 方式 classforname 类 的 路径 类 名 class 对 象名 getclass 基本 类型 的 包装 类 可以 调用 包装 类 的 type 属性 来 获 得该 包装 类 的 class 对象 jdbc 加载 mysql 驱动 的 时候 就是 使用 反射 机制 来 实现 classforname 类 加载 后 可以 实现 java 反射 的 类 有 以 下种 class 表示 正在 运行 的 java 应用程序 中 的 类 和 接口 注意 所有 获取 对象 的 信息 都 需要 class 类 来 实现 field 提供 有关 类 和 接口 的 属性 信息 以及对 它 的 动态 访问 权限 constructor 提供 关于 类 的 单个 构造 方法 的 信息 以及 它 的 访问 权限 method 提供 类 或 接 口中 某个 方法 的 信息 可以 利用 class 对象 的 newinstance 或者 调用 constructor 对象 的 newinstance 来 进行 反射 动态 创建 对象 实例 获取 person 类 的 class 对象 使用 newinstane 方法 创建 对象 personp person 获取 构造 方法 并 创建 对象 创建 对象 并 设置 属性 personp person cnewinstance 李四 男 放射 虽然 能够 在 程序 运行 时候 动态 获取 类 的 实例 但是 比 new 的 效率 低 先找 查找 类 资源 使用 类 加载 器 创建 过程 比较 繁琐 classforname 和 的 区别 classforname classname 方法 内部 实际 调用 的 方法 是 classforname 第 个 boolean 参数 表示 类 是否 需要 初始化 classforname classname 默认 是 需要 初始化 一旦 初始化 就会 触发 目标 对象 的 static 块 代码 执行 static 参数 也 也 会被 再次 初始化 classname 方法 内部 实际 调用 的 方法 是 classnamefalse 第 个 boolean 参数 表示 目标 对象 是否 进行 链接 false 表示 不 进行 链接 由 上面 介绍 可以 不 进行 链接 意味着 不进 行 包括 初始化 等 一些 列 步骤 那么 静态 块 和 静态 对象 就不会 得到 执行 error 和 exception 的 区别 两者 继承 自 异常 分为 检查 移 仓 和 非 检查 异常 非 检查 异常 也 称 运行时 异常 和 其 子类 常见 有 npe 异常 数组 越界 异常 等 对于 运行时 异常 java 编译器 不 要求 必须 进行 异常 捕获 处理 或者 抛出 声明 另一种 是 检查 异常 编译 异常 也 称为 非 运行时 异常 java 编译器 强制 程序员 必须 进行 捕获 处理 常见 有 ioexception 等 后者 辨别 方法 就是 编译器 提示 要 trycatch 或者 是 程序 无法 处理 的 错误 大多数 错误 与 代码 编写者 执行 操作 无关 而 表示 代码 运行时 jvm 出现 的 问题 如 oom 等 二 jvm 类 的 实例 化 顺序 首先是 父 类 的 静态 变量 和 静态 代码 块 看 两者 的 书写 顺序 第二 执行 子类 的 静态 变量 和 静态 代码 块 看 两者 的 书写 顺序 第三 执行 父 类 的 成员 变量 赋值 第四 执行 父 类 的 构造 代码 块 第五 执行 父 类 的 构造 方法 第六 执行 子类 的 构造 代码 块 第七 执行 子类 的 构造 方法 总结 也就是说 虽然 客户端 代码 是 new 的 构造 方法 但是 构造 方法 确 实是 在 整个 实例 创 建中 的 最后 一个 调用 切记 切记 先是 父 类 再 是 子类 先是 类 静态 变量 和 静态 代码 块 再 是 对象 的 成员 变量 和 构造 代码 块 gt 构造 方法 记住 构造 方法 最后 调用 成员 变量 优先 构造 代码 块 优先 构造 方法 内存 泄漏 和 内存 溢出 的 区别 内存 泄漏 分配 出去 的 内存 无法 回收 可达 却 无用 的 对象 无法 被 gc 回收 内存 溢出 程序 要求 的 内存 超 出了 系统 能 分配 的 范围 如 栈 满 进 栈 栈 空出 栈 了解 jvm 吗 java 源文件 经 编译成 字节 码 程序 通过 jvm 将 每 一条 指令 翻译成 不同 平台 机器码 通过 特定 平台 运行 jvm 体系结构 类 装载 器 classloader 用来 装载 class 文件 执行 引擎 执行 字节 码 或者 执行 本地 方法 运行时 数据 区 方法 区 堆 java 栈 程序 计数器 本地 方法 栈 简述 类 被 加 载到 虚拟 机内 存到 卸 载出 内存 的 过程 加载 重点 加载 阶段 是 类 加载 机制 中 的 一个 阶段 这个 阶段 通常 也 被称作 装载 根据 一个 类 的 全 限 定名 来 读取 此类 的 二进制 字节 流到 jvm 中 然后 转 换为 一个 与 目标 类 对应 的 javalangclass 对象 实例 验证 验证 是 链接 阶段 的 第一步 这一步 主要 的 目的 是 确保 class 文件 的 字 节流 中 包含 的 信息 符合 当前 虚拟机 的 要求 并且 不会 危害 虚拟机 自身 安全 验证 阶段 主要 包括 四个 检验 过程 文件 格式 验证 元 数据 验证 字节 码 验证 和 符号 引用 验证 准备 准备 阶段 是 正式 为 类 变量 分配 内存 并 设置 类 变量 初始值 零 值 的 阶段 这些 内存 都 将在 方法 区 中 进行 分配 这个 阶段 中有 两个 容易 产生 混淆 的 知识点 首先是 这时候 进行 内存 分配 的 仅 包括 类 变量 static 修饰 的 变量 而 不包括 实例 变量 实例 变量 将会 在 对象 实例 化时 随着 对象 一起 分 配在 java 堆 中 解析 解析 阶段 是 虚拟机 常量 池内 的 符号 引用 替 换为 直接 引用 的 过程 初始化 类 加载 最后 阶段 若 该类 具有 超 类 则 对 其 进行 初始化 执行 静态 初始化 器 和 静态 初始化 成员 变量 如 前面 只 初始 化了 默认值 的 static 变量 将会 在 这个 阶段 赋值 成员 变量 也 将被 初始化 使用 卸载 你 了解 类 加载 器 吗 知道 什么 是 双亲 委派 加载 机制 吗 类 加载 分类 启动 类 加载 器 加载 jrelibrtjar 扩展 类 加载 器 加载 jrelibextjar 应用程序 类 加载 器 加载 classpath 上 指定 的 类 库 双亲 委派 机制 双亲 委派 机制 是 指 当 一个 类 加载 器 收到 一个 类 加载 请求 时 该类 加载 器 首先 会把 请求 委 派给 父 类 加载 器 每个 类 加载 器 都是 如此 只有 在 父 类 加载 器 在 自己 的 搜索 范围内 找不到 指定 类 时 子类 加载 器 才会 尝试 自己 去 加载 双亲 委派 模型 工作 工程 当 收到 一个 类 加载 请求 时 他 首先 不会 自己 去 尝试 加载 这个 类 而是 将 这个 请求 委 派给 父 类 加载 器 去 完成 当 收到 一个 类 加载 请求 时 他 首先 也 不会 自己 去 尝试 加载 这个 类 而是 将 请求 委 派给 父 类 加载 器 去 完成 如果 加载 失败 在 ltjavahomegtlib 中 未找到 所需 类 就会 让 尝试 加载 如果 也 加载 失败 就会 使用 加载 如果 也 加载 失败 就会 使用 自定义 加载 器 去 尝试 加载 如果 均 加载 失败 就会 抛出 异常 三 javaeeservlet 的 运行 过程 web 容器 加载 servlet 并将 其 实例 化 后 servlet 生命周期 开始 容器 运行 其 init 方法 进行 servlet 的 初始化 请求 到达 时 调用 servlet 的 service 方法 service 方 法会 根据需要 调用 与 请求 对应 的 doget 或 dopost 等 方法 当 服务器 关闭 或 项目 被 卸载 时 服务器 会将 servlet 实例 销毁 此时 会 调用 servlet 的 destroy 方法 转发 forward 和 重定向 redirect 的 区 别答 forward 是 容器 中 控制权 的 转向 是 服务器 请求 资源 服务器 直接 访问 目标 地址 的 url 把 那个 url 的 响应 内容 读取 过来 然后 把 这些 内容 再 发给 浏览器 浏览器 根本 不知道 服务器 发送 的 内容 是 从 哪儿 来 的 所以 它 的 地址栏 中 还是 原来 的 地址 redirect 就是 服务器端 根据 逻辑 发送 一个 状态 码 告诉 浏览 器重 新去 请求 那个 地址 因此 从 浏览器 的 地址栏 中 可以 看到 跳转 后 的 链接 地址 很明显 redirect 无法访问 到 服务器 保护 起来 资源 但是 可以 从一 个 网站 redirect 到 其他 网站 forward 更加 高效 所以在 满足需要 时 尽量 使用 forward 通过 调用 对象 的 forward 方法 该 对象 可以 通过 servletrequest 对象 的 方法 获得 并且 这样 也有 助于 隐藏 实际 的 链接 在 有些 情况下 比如 需要 访问 一个 其它 服务器 上 的 资源 则 必须 使用 重定向 通过 对象 调用 其 sendredirect 方法 实现 jsp 有 哪些 内置 对象 作用 分别 是什么 答 jsp 有 个 内置 对象 request 封装 客户端 的 请求 其中 包含 来自 get 或 post 请求 的 参数 response 封装 服务器 对 客户端 的 响应 pagecontext 通过 该 对象 可以 获取 其他 对象 session 封装 用户 会话 的 对象 application 封装 服务器 运行 环境 的 对象 out 输出 服务器 响应 的 输出 流 对象 configweb 应用 的 配置 对象 pagejsp 页面 本身 相当于 java 程序 中 的 thisexception 封装 页面 抛出 异常 的 对象 tomcat 容器 是 如何 创建 servlet 类 实例 用 到了 什么 原 理当 容器 启动 时会 读取 在 webapps 目 录下 所有 的 web 应用 中 的 webxml 文件 然后 对 xml 文件 进行 解析 并 读取 servlet 注册 信息 然后 将 每个 应用 中 注册 的 servlet 类 都 进行 加载 并 通过 反射 的 方式 实例 化 有时候 也是 在 第一次 请求 时 实例 化 在 servlet 注册 时 加上 如果 为 正数 则在 一开始 就 实例 化 如果 不 写 或为 负数 则 第一次 请求 实例 化 四 框架 mybatis 和 的 区别 是什么 是 预 编译 处理 是 字符串 替换 mybatis 在 处理 时 会将 sql 中 的 替 换为 号 调用 的 set 方法来 赋值 mybatis 在 处理 时 就是 把 替换成 变量 的 值 使用 可以 有效 的 防止 sql 注入 提高 系统 安全性 一对 多多 对 一多 对 多 mybatis 的 mapper 编写 一对 多 就是在 resultmap 标签 中 配置 标签 用来 存储 查询 到 的 文章 列表 mybatis 的 mapper 编写 多 对 一 就是在 resultmap 标签 中 配置 标签 关联 所属 的 用户 实体 shiroshiro 架构 个 核心 组件 subject 正与 系统 进行 交互 的人 或 某一个 第三方 服务 所有 subject 实例 都被 绑定 到 且 这是 必须 的 一个 securitymanager 上 架构 的 心脏 用来 协调 内部 各 安全 组件 管理 内部 组件 实例 并 通过 它 来 提供 安全 管理 的 各种 服 务当 shiro 与 一个 subject 进行 交互 时 实质上 是 幕后 的 securitymanager 处理 所有 繁重 的 subject 安全 操作 realms 本质上 是 一个 特定 安全 的 dao 当 配置 shiro 时 必须 指定 至少 一个 realm 用来 进行 身份验证 和 或 授权 shiro 提供 了 多种 可用 的 realms 来 获取 安全 相关 的 数据 如 关系 数据库 jdbc ini 及 属性 文件 等 也 可以 定义 自己 realm 实现 来 代表 自定义 的 数据源 shiro 认证 过程 应用 程序代码 调用 subjectlogin 方法 传递 创 建好 的 包含 终端用户 的 principals 身份 和 credentials 凭证 的 实例 subject 实例 通常 为 或 子类 委托 应用程序 的 securitymanager 通过 调用 token 开始 真正 的 验证 subjectmanager 接收 token 调用 内部 的 authenticator 实例 调用 token authenticator 通常是 一个 实例 支持 在 身份验证 中 协调 一个 或 多个 realm 实例 如果 应用程序 中 配置 了 一个 以上 的 实例 将 利用 配置 好 的 来 启动 multirealm 认证 尝试 在 realms 被 身份验证 调用 之前 期间 和 以后 被 调用 使其 能够 对 每个 realm 的 结果 作出反应 每个 配置 的 realm 用来 帮助 看 它 是否 支持 提交 的 如果 支持 那么 支持 realm 的 方法 将会 伴随着 提交 的 token 被 调用 方法 有效地 代表 一个 特定 realm 的 单一 的 身份验证 尝试 流程 用户 发送 请求 至 前端 控制器 收到 请求 后 调用 handlermapping 处理器 映射器 请求 获取 handle 处理器 映射器 根据 请求 url 找到 具体 的 处理器 生成 处理器 对象 及 处理器 拦截器 如果有 则 生成 一并 返回 给 调用 handleradapter 处理器 适配器 handleradapter 经过 适配 调用 具体 处理器 handler 也 叫 后端 控制器 handler 执行 完成 返回 将 handler 执行 结果 modelandview 返回 给 将 modelandview 传给 viewresolver 视图 解析器 进行 解析 viewresolver 解析 后 返回 具体 对 view 进行 渲染 视图 即将 模型 数据 填充 至 视 图中 响应 用户 springmvc 怎么 和 ajax 相互 调用 的 通过 jackson 框架 就可以 把 java 里面 的 对象 直接 转化成 js 可以 识别 的 json 对象 具体步骤 如下 加入 jacksonjar 在 配置文件 中 配置 json 的 映 射在 接受 ajax 方法 里面 可以 直接 返回 objectlist 等 但 方法 前面 要 加上 responsebody 注解 如何 实现 接口 的 自定义 异常 处理器 通过 使用 来 进行 统一 异常 处理 来 指定 捕获 的 异常 这个 异常 的 处理 是 全局 的 所有 类似 的 异常 都会 跑到 这个 地方 处理 spring 每一次 http 请求 都会 产生 一个 新 的 bean 该 bean 仅在 当前 httpsession 内有效 globalsession 全局 session 作用 域 仅 仅在 基于 portlet 的 web 应用 中 才有 意义 spring 中 已经 没有 了 portlet 是 能够 生成 语义 代码 例如 html 片段 的 小型 javaweb 插件 它们 基于 portlet 容器 可以 像 servlet 一样 处理 http 请求 但是 与 servlet 不同 每个 portlet 都有 不同 的 会话 将 一个 类 声 明为 spring 的 bean 的 注解 有 哪些 我们 一般 使用 autowired 注解 去 自动 装配 bean 而 想 要把 一个 类 标识 为 可以用 autowired 注解 自动 装配 的 bean 可以 采用 以下 的 注解 实现 component 注解 通用 的 注解 可 标注 任意 类 为 spring 组件 如果 一个 bean 不知道 属于 哪一个 层 可以 使用 component 注解 标注 repository 注解 对应 持久 层 即 dao 层 主要 用于 数据库 相关 操作 service 注解 对应 服务 层 即 service 层 主要 涉及 一些 复杂 的 逻辑 需要 用到 dao 层 注入 controller 注解 对应 springmvc 的 控制 层 即 controller 层 主要 用于 接受 用户 请求 并 调用 service 层 的 方法 返回 数据 给 前端 页面 你 知道 事务 有 哪些 属性 谈谈 你 对 事务 的 理解 事务 属性 的 种类 传播 行为 隔离 级别 只读 事务 超时 和 回 滚 规则 a 事务 传播 行为 指 的 就是 当 一个 事务 方法 被 另一个 事务 方法 调 用时 这个 事务 方法 应该 如何 进行 有种 例如 methoda 事务 方法 调用 methodb 事务 方法 时 methodb 是 继续 在 调用者 methoda 的 事务 中 运行 呢 还是 为 自己 开启 一个 新 事务 运行 这 就是 由 methodb 的 事务 传播 行为 决定 的 transactional b 隔离 级 别在 操作 数据 时 可能 带 来个 副作用 分 别是 脏 读 不可重复读 幻 读 为了 避免 这 中副 作用 的 发 生在 标准 的 sql 语 句中 定义 了 种 隔离 级别 分 别是 未 提交 读 已 提交 读 可 重 复读 可 序列化 而在 spring 事务 中 提供 了 种 隔离 级 别来 对 应在 sql 中 定义 的 种 隔离 级别 transactional c 只读 如果在 一个 事务 中所 有 关于 数据库 的 操作 都是 只读 的 也就是说 这些 操作 只 读取 数据库 中 的 数据 而 并不 更新 数据 那么 应将 事务 设为 只读 模式 readonlymarker 这样 更有 利于 数据库 进行 优化 因为 只读 的 优化 措施 是 事务 启动 后由 数据库 实施 的 因此 只有 将 那些 具有 可能 启动 新 事务 的 传播 行为 的 方法 的 事务 标 记成 只读 才有 意义 如果 使用 hibernate 作为 持久 化 机制 那么 将 事务 标 记为 只读 后 会将 hibernate 的 flush 模式 设置 为 fulshnever 以 告诉 hibernate 避免 和 数据库 之间 进行 不必要 的 同步 并将 所有 更新 延 迟到 事务 结束 transactional readonlytrue d 事务 超时 如果 一个 事务 长时间 运行 这时 为了 尽量 避免 浪费 系统资源 应为 这个 事务 设置 一个 有效 时间 使其 等待 数秒 后 自动 回 滚 与 设置 只读 属性 一样 事务 有效 属性 也 需 要给 那些 具有 可能 启动 新事物 的 传播 行为 的 方法 的 事务 标 记成 只读 才有 意义 transactional timeout e 回 滚在 默认设置 下 事务 只 在 出现 运行时 异常 时 回 滚 而在 出现 受 检查 异常 时 不回 滚 不过 可以 声明 在 出现 特定 受 检查 异常 时 像 运行时 异常 一样 回 滚 同样 也 可以 声明 一个 事务 在 出现 特定 的 异常 时 不回 滚 即使 特定 的 异 常是 运行时 异常 指定 单一 异常 类 transactional 指定 多个 异常 类 transactional spring 中 autowrite 注解 和 resource 的 区别 resource 的 作用 相当于 按 bytype 自动 注入 而 resource 默认 按 byname 自动 注入 不过 可以 声明 在 出现 特定 受 检查 异常 时 像 运行时 异常 一样 回 滚 同样 也 可以 声明 一个 事务 在 出现 特定 的 异常 时 不回 滚 即使 特定 的 异 常是 运行时 异常 自动 装配 有 什么 局限 覆盖 的 可能性 您 始终 可以 使用 和 设置 指定 依赖 项 这将 覆盖 自动 装配 基 本元 数据类型 简单 属性 如 原 数据类型 字符串 和 类 无法 自动 装配 令人困惑 的 性质 总是 喜欢 使用 明确 的 装配 因为 自动 装配 不太 精确 有 何 区别 component 这将 java 类 标 记为 bean 它是 任何 spring 管理 组件 的 通用 构 造型 spring 的 组件 扫描 机制 现在 可以 将其 拾取 并 将其 拉入 应用程序 环境 中 controller 这将 一个 类 标 记为 springwebmvc 控制器 标有 它 的 bean 会 自动 导入到 ioc 容器 中 service 此 注解 是 组件 注解 的 特化 它不 会对 component 注解 提供 任何 其他 行为 您 可以 在 服务 层 类 中 使用 service 而 不是 component 因为 它以 更好 的 方式 指定 了 意图 repository 这个 注解 是 具有 类似 用途 和 功能 的 component 注解 的 特化 它为 dao 提供 了 额外 的 好处 它将 dao 导入 ioc 容器 并 使 未经 检查 的 异常 有 资格 转 换为 五 数据库 数据库 个 优化 选取 最适合 的 字段 属性 创建 表 字段 时 宽度 设得 尽可能 小 例如 邮编 字段 设置 char 对于 文本 字段 例如 汉族 少数民族 性别 男女 可以用 enum 类型 数据库 会当 作 数据 来 处理 速度快 字段 设置 notnull 查询 时 数据库 不 用去 比较 使用 join 来 代替 子 查询 因为 mysql 不需 要在 内存 中 创建 临时 表 来 完成 这个 逻辑 上 的 需要 两个 步骤 的 查询 工作 使用 联合 union 来 代替 手动 创建 的 临时 表 在 客户端 的 查询 会话 结束 的 时候 临时 表 会被 自动 删除 从而 保证 数据库 整齐 高效 使用 union 来 创建 查询 的 时候 我们 只需 要用 union 作为 关键字 把 多个 select 语句 连接起来 就可以 了 要注意 的 是 所有 select 语 句中 的 字段 数目 要想 同 事务 防止 需要 执行 一组 sql 时 出现 一些 不可避免 的 意外 而 导致 的 表 中 的 数据 不一致 或 不完整 破坏 预想 的 业务 逻辑 锁定 表 尽管 事务 是 维护 数据库 完整性 的 一个 非常好 的 方法 但却 因为 它 的 独占性 有时会 影响 数据库 的 性能 尤其是 在 很大 的 应用 系统 中 由于 在 事务 执行 的 过程中 数据库 将 会被 被 锁定 因此 其它 的 用户 请求 只能 暂时 等待 直到 该 事务 结束 如果 一个 数据库系统 只有 少数 几个 用户 来使 用 事务 造成 的 影响 不会 成为 一个 太大 的 问题 但 假设有 成千上万 的 用户 同时 访问 一个 数据库系统 例如 访问 一个 电子商务 网站 就会 产生 比较严重 的 响应 延迟 其实 有些 情况下 我们 可以 通过 锁定 表 的 方法来 获得 更好 的 性能 下面 的 例子 就用 锁定 表 的 方法来 完成 前面 一个 例子 中 事务 的 功能 这里 我们 用 一个 select 语句 取出 初始 数据 通过 一些 计算 用 update 语句 将 新 值更 新到 表 中 包含 有 write 关键字 的 locktable 语句 可以 保证 在 unlocktables 命令 被执行 之前 不会有 其它 的 访 问来 对 inventory 进行 插入 更新 或者 删除 的 操作 使用 外 键 保证 每 一条 新增 记录 都 指向 某个 表 中 已 存在 的 keyid 使得 没有 不合法 的 记录 被 更新 或 插入 使用 索引 索引 应 建立 在那些 将 用于 joinwhere 判断 和 orderby 排序 的 字段 上 尽量 不要 对 数据库 中 某个 含有 大量 重复 的 值 的 字段 建立 索引 对于 一个 enum 类型 的 字段 来说 出现 大量 重复 值 是 很有 可能 的 情况 优化 查询 语句 函数 数据库 外 键 约束 当 取值 为 noaction 或者 restrict 时 则 当在 父 表 即 外 键 的 来源 表 中 删除 对应 记录 时 首先 检查 该 记录 是否 有 对应 外 键 如果有 则不 允许 删除 当 取值 为 noaction 或者 restrict 时 则 当在 父 表 即 外 键 的 来源 表 中 更新 对应 记录 时 首先 检查 该 记录 是否 有 对应 外 键 如果有 则不 允许 更新 当 取值 为 cascade 时 则 当在 父 表 即 外 键 的 来源 表 中 删除 对应 记录 时 首先 检查 该 记录 是否 有 对应 外 键 如果有 则 也 删 除外 键 在 子表 即 包含 外 键 的 表 中 的 记录 当 取值 为 cascade 时 则 当在 父 表 即 外 键 的 来源 表 中 更新 对应 记录 时 首先 检查 该 记录 是否 有 对应 外 键 如果有 则 也 更新 外 键 在 子表 即 包含 外 键 的 表 中 的 记录 当 取值 为 setnull 时 则 当在 父 表 即 外 键 的 来源 表 中 删除 对应 记录 时 首先 检查 该 记录 是否 有 对应 外 键 如果有 则 设置 子表 中 该 外 键值 为 null 不过 这就 要求 该 外 键 允许 取 null 当 取值 为 setnull 时 则 当在 父 表 即 外 键 的 来源 表 中 更新 对应 记录 时 首先 检查 该 记录 是否 有 对应 外 键 如果有 则 设置 子表 中 该 外 键值 为 null 不过 这就 要求 该 外 键 允许 取 nullmyisam 和 innodb 不同点 mysql 以后 默认 使用 innodb 为 搜索引擎 myisam 是 表 锁 不支持 事务 和 主外 键 innodb 默认 可以 创建 个 索引 innodb 支持 事务 myisam 不支持 事务 对于 innodb 每 一条 sql 语言 都 默认 封装 成 事务 自动 提交 这样 会 影响 速度 所以 最 好把 多条 sql 语言 放到 begin 和 commit 之间 组成 一个 事务 innodb 支持 外 键 而 myisam 不支持 对 一个 包含 外 键 的 innodb 表 转成 myisam 表 会 失败 innodb 是 聚集 索引 数据文件 和 索引 绑 定在 一块 必须 要有 主键 通过 主键 索引 效率 很高 但是 辅助 索引 需要 两次 查询 先 查询 到 主键 然后 在 通过 主键 查询 到 数据 因此 主键 不应该 过大 主键 过大 的 时候 其它 索引 也 会 很大 而 myisam 是非 聚集 索引 数据 和 文件 是 分离 的 索引 保存 的 是 数据文件 的 指针 主键 索引 和 辅助 索引 是 独立 的 innodb 不支持 全文 检索 而 myisam 支持 全文 检索 查询 效率 上 myisam 要高 六 数据结构 与 算法 你 知道 哪些 排序 算法 种 插入排序 直接 插入排序 希尔 排序 选择 排序 简单 选择 排序 堆排序 交换 排序 冒泡 排序 快速 排序 归并 排序 基数排序 hashmap 在 和 以上 的 区 别在 jdk 之前 hashmap 的 实 现是 数组 链表 但是 即使 哈希 函数 取得 再好 也 很难 做到 所有 元素 均匀分布 当 hashmap 中有 大量 的 元素 都 存 放到 同一个 桶 中 时 这个 桶 下有 一条 长长的 链表 这个 时候 hashmap 就 相当于 一个 单 链表 假如 单 链表 有 n 个 元素 遍历 的 时间 复杂度 就是 o n 完全 失去了 它 的 优势 所以在 jdk 版本 后 java 对 hashmap 做了 改 进在 链表 长度 大于 的 时候 将 后面 的 数据 存在 红 黑 树 中 查找时间 复杂度 为 o logn 以 加快 检索 速度 hashmap 为什么 长度 为 才 转 化为 红 黑 树 当 链表 长度 为时 使 用以 红 黑 树 代替 链表 红 黑 树 的 结点 是 链表 长度 的 两倍 当 比 较短 的 时候 使用 红 黑 树 的 效率 其实 并不 高 根据 泊 松 分布 公式 的 统计 结 果在 结 点数 达 到时 适合 使用 红 黑 树 补充 红 黑 树 转为 链表 的 阈值 长度 lt 插入 结点 默 认为 红 结点 红 黑 树 的 见解 每个 节点 非 红 即 黑 根 节点 总是 黑色 的 如果 节点 是 红色 的 则 它 的 子 节点 必须 是 黑色 的 反之 不一定 每个 叶子 节点 都是 黑色 的 空 节点 nil 节点 从 根 节 点到 叶 节点 或 空子 节点 的 每条 路径 必须 包含 相同 数目 的 黑色 节点 即 相同 的 黑色 高度 七 工具 git 资料 地址 linux 一般 自己 下载 的 软件 放在 opt 一般 自己 的 文件 放在 home 自己 用户 名下 一般 用户 应用程序 放 usr 用完 就 丢 的 文件 放 tmp 日志 文件 放 varsync 将 数据 从 内存 同步 到 硬盘 shutdownh 十分钟 后 关机 rmrf 删 库 跑路 危险 命令 touchmkdir 创建 文件 目录 修改 权限 例子 为 所有 用户 可 读写 执行 正向 阅读 方向 阅读 带 行号 正向 阅读 morefilename 分页 空格 下一 页 回车 下一 行 不可 往前 翻页 lessfilename 分页 上 下键 可 翻页 退出 q 显示 头尾 xx 行 的 内容 硬 链接 允许 一个 文件 拥有 多个 路径 防止 误删 软 链接 类似 win 的 快捷方式 删除 源文件 则 快捷方式 访问 不 了 useraddm 用户 创建 用户 passwd 用户 修改 密码 名 在 root 账号 下 修改 若 普通用户 则 直接 输入 passwduserdelr 用户 删除 用户 su 用户名 切换 用户 psaux 查询 所有 进程 psauxgrepjava 查找文件 中 符合 条件 的 字符串 grep 管道 符 命令 表示 过滤 后 的 进程 信息 pstreepu 进程 树 kill 进程 号 杀死 进程 八 计算机网络 网络 分层 tcp 三次 握手 次 挥手 画图 确认 序号 标志 ack 当 ack 时 确认 字段 才 有效 当 ack 时 确认 号 无效 tcp 规 定在 连接 建立 后 所有 传送 的 报 文段 都必须 把 ack 置 同步 序号 syn 在 连接 建 立时 用来 同步 序号 当 syn 而 ack 时 表明 这是 一个 连接 请求 报 文段 对方 若 同意 建立 连接 则 应在 响应 的 报 文段 中使 syn 和 ack 故 syn 置 为 就 表示 这是 一个 连接 请 求和 连接 接收 报文 序列号 seq 当 发送 一个 数据 时 数据 是 被 拆成 多个 数据包 来 发送 序列号 就是 对 每个 数据包 进行 编号 这样 接受 方才 能对 数据包 进行 再次 拼接 下一个 数据包 的 编号 ack 这也 就是 为什么 第二 请求 时 ack 是 seqfinfinish 标志 用于 释放 连接 整个 流程 为 建立 连接 时 客户端 发送 syn 包 seqx 然后 进入 synsend 状态 等待 服务器 确认 确认 客户端 具有 发送 功能 服务器 收到 syn 包 必须 确认 客户 的 synackx 同时 自己 也 发送 一个 syn 包 seqy 即 synack 包 进入 synrecv 状态 这个 状态 被称为 半 连接 状态 确认 服务端 具有 接收 和 发送 功能 客户端 再 进行 一次 确认 收到 服务器 的 synack 包 向 服务器 发送 确认 包 ackacky 此 包 发送 完毕 客户端 和 服务器 进入 established 状态 确认 客户端 具有 接收 功能 整个 过程 为 客户端 发送 一个 报文 给 服务端 没有 数据 其中 fin 设置 为 用来 关闭 client 到 server 的 数据 传送 客户端 进入 finwait 状态 客户端 client 发送 fin 用来 关闭 client 到 server 的 数据 传送 服务端 收到 来自 客户端 的 fin 发送 一个 ack 给 客户端 确认 序 号为 收到 序号 与 syn 相同 一个 fin 占用 一个 序号 服务端 进入 closewait 状态 此时 tcp 链接 处于 半 关闭 状态 即 客户端 已经 没有 要 发送 的 数据 了 但 服务端 若 发送 数据 则 客户端 仍要 接收 服务端 发送 一个 fin 给 客户端 用来 关闭 服务端 到 客户端 的 数据 传送 服务端 进入 lastack 状态 服务端 server 发送 一个 fin 用来 关闭 server 到 client 的 数据 传送 客户端 收到 fin 后 进入 timewait 状态 接着 发送 一个 ack 给 服务端 确认 序 号为 收到 序号 最后 客户端 和 服务端 都 进入 closed 状态 地址栏 中 输入 url 会 发生 什么 在这 整个 过程中 大致 可以 分为 以下 几个 过程 dns 域名解析 浏览器 本身 是 一个 客户端 当你 输入 url 的 时候 首先 浏览器 会去 请求 dns 服务器 从 近 及 远 浏览器 缓存 操作系统 缓存 路由器 缓存 ips 服务器 缓 存根 域名 服务器 缓存 迭代 查询 通过 dns 获取 相应 的 域名 对应 的 iptcp 连接 然后 通过 ip 地址 找到 ip 对应 的 服务器 后 要求 建立 tcp 连接 http 请求 浏览器 发送 完 httprequest 请求 包 后 服务器 接 收到 请求 包 之后 才 开始 处理 请求 包 服务器 处理 请求 返回 http 响 应在 服务器 收到 请求 之后 服务器 调用 自身 服务 返回 httpresponse 响应 包 浏览器 页面 渲染 客户端 收到 来自 服务器 的 响应 后 开始 渲染 这个 response 包 里 的 主体 body 关闭 连接 等 收到 全部 的 内容 随后 断开 与 该 服务器 之间 的 tcp 连接 cookie 和 session 的 区别 cookie 是 由 服务器 发送给 客户端 的 特殊 信息 以 文本 的 形式 存放在 客户端 客户端 再次 请求 时 会把 cookie 回 发 服务器 接 收到 后会 解析 cookie 生成 与 客户 端相 对应 的 内容 session 服务器端 的 机制 在 服务器 上 保存 的 信息 解析 客户端 请求 并 操作 sessionid 按需 保存 状态 信息 请 简单 解释 下 arp 协 议和 arp 攻击 地址 解析 协议 目的 是 实现 ip 地址 到 mac 地址 的 转换 arp 攻击 的 第一步 就是 arp 欺骗 通过 监听 广播 p 与 p 广播 通信 p 攻击者 接收 不属于 发送给 自己 的 广播 数据 然后 连续不断 的 做出 回应 让 p 广播 发起者 误认为 攻击 对 象是 p 目标 对象 于是 建立 p 和 p 的 arp 缓存 条目 以后 当 pc 给 pc 发送 信息 的 时候 pc 依据 osi 模型 从 上至 下在 网络 层 给 数据 封装 目的 ip 为 ip 的 包头 在 链路层 通过 查询 arp 缓存 表 封装 目的 mac 为 mac 的 数据 帧 送至 交换机 根据 查询 cam 表 发现 mac 对应 的 接口 为 port 就这样 把 信息 交付 到了 pc 完 成了 一次 arp 攻击 简 单说 一下 路 路由器 和 交换机 的 区别 路由器 在 网络 层 路由器 根据 ip 地址 寻址 路由器 可以 处理 tcpip 协议 交换机 不可以 交换机 在 中继 层 交换机 根据 mac 地址 寻址 九 操作系统 进程 和 线程 以及 他们 的 区别 进程 是 对 运行时 程序 的 封装 是 系统 进行 资源 调度 和 分配 的 基本单位 实现 了 操作系统 的 并发 线程 是 进程 的 子 任务 是 cpu 调度 和 分派 的 基本单位 用于 保证 程序 的 实时 性 实现 进程 内部 的 并发 一个 程序 至少 一个 进程 一个 进程 至少 一个 线程 线程 依赖于 进程 而 存在 进程 拥有 独立 的 内存 单元 而 线程 共享 进程 的 内存 单元 死锁 预防 打破 死锁 四个 必要条件 中 的 一个 就可以 了 打破 互斥 条件 允许 进程 同时 访问 某些 资源 但是 某些 资源 因为 自身 属性 问题 不能 被 同时 访问 所以 这种 方法 实用性 不大 打破 占用 并 等待 条件 可以 实行 资源 先 分配 策略 进程 在运 行前 一次 性向 系统 申请 它 需要 的 全部 资源 若 所需 全部 资源 得不到 满足 则不 分配 任何 资源 此 进程 暂不 运行 只 有当 系统 能 满足 当前 线程 所需 全部 资源 时 才 一次性 将 所需 资源 全部 分配给 该 进程 或者 只允许 进程 在 没有 占用 资源 时间 才 允许 申请 资源 一个 进程 可以 申请 一些 资源 并 使用 他们 但是在 当前 进程 申请 更多 资源 之前 它 必须 全部 释放 当前 所 占用 的 资源 但是 这种 策略 也 存在 一些 缺点 很多 情况下 无法 预知 一个 进程 所 需要 的 全部 资源 因为 进程 是 动态 运行 的 不可 预知 同 时会 降低 资源 的 利用 效率 降低 进程 的 并 发性 打破 非 抢占 条件 允许 某个 进程 在 资源 得不到 满足 时 强行 从 其他 进程 那里 获取 资源 实现 起来 困难 会 降低 系统 性能 打破 循环 等待 条件 实行 资源 有序 分配 策略 对 所有 资源 排序 编号 所有 进程 对 资源 的 请求 必须 严格 按照 资源 序号 递增 的 顺序 提出 即 只有 占 用了 小号 资源 才能 占用 大号 资源 这样 就不 产生 回 环路 预防 死锁 如何 根据 逻辑 地址 查到 物理地址 已知 某个 分页 系统 页面 大小 为 k 即 字节 某一个 作业 有 个 页面 分别 装入 到 主存 的 第 块 中 求 逻辑 地址 对应 的 物理地址 解 第一步 求 该 逻辑 地址 的 页号 整除 第二步 求 它 的 页 内 偏移量 取 余 第三步 根据 题目 产生 页 表 页号 页 框 号 帧 号 第四步 根据 逻辑 地址 的 页号 查出 物理地址 的 页 框 号 帧 号 如上图 逻辑 地址 的 第 页 对应 物理地址 的 第 块 第五步 求出 物理地址 十 中间件 一 redis 面试题 使用 redis 有 哪些 好处 速度快 因为 数据 存在 内存 中 类似于 hashmaphashmap 的 优势 就是 查找 和 操作 的 时间 复杂度 都是 o 支持 丰富 数据类型 支持 等 支持 事务 操作 都是 原子 性 所谓 的 原子 性 就是 对 数据 的 更改 要么 全部 执行 要么 全部 不 执行 丰富 的 特性 可 用于 缓存 消息 按 key 设置 过期 时间 过期 后 将会 自动 删除 redis 有 什么 持久 化 的 机制 吗 rdb 是 redis 默认 的 持久 化 方式 按照 一定 的 时间 周期 策略 把 内存 的 数 据以 快照 的 形式 保 存到 硬盘 的 二进制 文件 即 snapshot 快照 存储 对应 产生 的 数据文件 为 dumprdb 通过 配置文件 中 的 save 参 数来 定义 快照 的 周期 快照 可 以是 其所 表示 的 数据 的 一个 副本 也 可 以是 数据 的 一个 复制品 aofredis 会将 每一个 收到 的 写 命令 都 通过 write 函数 追 加到 文件 最后 类似于 mysql 的 binlog 当 redis 重启 是 会通 过 重新 执行 文件 中 保存 的 写 命令 来 在 内存 中 重建 整个 数据库 的 内容 当 两种 方式 同时 开启 时 数据 恢复 redis 会 优先选择 aof 恢复 能 谈谈 什么 是 缓存 雪崩 么 我们 可以 简单 的 理解为 由于 原有 缓存 失效 新 缓存 未到 期间 例如 我们 设置 缓存 时 采 用了 相同 的 过期 时间 在 同一 时刻 出现 大面积 的 缓存 过期 所有 原本 应该 访问 缓存 的 请求 都去 查询 数据库 了 而对 数据库 cpu 和 内存 造成 巨大 压力 严重 的 会 造成 数据库 宕机 从而 形成 一系列 连锁反应 造成 整个 系统 崩溃 解决办法 大多数 系统 设计者 考虑 用 加锁 最多 的 解决方案 或者 队列 的 方式 保证 来 保证 不会有 大量 的 线程 对 数据库 一次性 进行 读写 从而 避免 失效 时 大量 的 并发 请求 落到 底层 存储系统 上 还有 一个 简单 方案 就是 将 缓存 失效 时间 分 散开 知道 什么 是 缓存 穿透 吗 缓存 穿透 是 指 用户 查询 数据 在 数据库 没有 自然 在 缓存 中 也 不会有 这样 就 导致 用户 查询 的 时候 在 缓存 中 找不到 每次 都 要去 数据库 再 查询 一遍 然后 返 回空 相当于 进行了 两次 无用 的 查询 这样 请求 就 绕过 缓存 直接 查 数据库 这 也是 经常 提 的 缓存 命中率 问题 解决办法 最常 见 的 则是 采 用布 隆 过滤器 将 所有 可能 存在 的 数据 哈希 到 一个 足 够大 的 bitmap 中一 个 一定 不存在 的 数据 会被 这个 bitmap 拦 截掉 从而 避免了 对 底层 存储系统 的 查询 压力 另外 也有 一个 更为 简单 粗暴 的 方法 如果 一个 查询 返回 的 数据 为 空 不管是 数据 不存在 还是 系统故障 我们 仍然 把 这个 空 结果 进行 缓存 但它 的 过期 时间 会 很短 最长 不 超过 五分钟 通过 这个 直接 设置 的 默认值 存 放到 缓存 这样 第二次 到 缓冲 中 获取 就有 值了 而 不会 继续 访问 数据库 这种 办法 最 简单 粗暴 tb 的 硬 盘上 放 满了 数据 请 写 一个 算法 将 这些 数据 进行 排 重 如果 这些 数据 是 一些 bit 大小 的 数据 该 如 何解 如果是 bit 的 呢 对于 空间 的 利用 到达 了 一种 极致 那就是 bitmap 和 布 隆 过滤器 bloomfilter bitmap 典型 的 就是 哈希 表 缺点 是 bitmap 对于 每个 元素 只能 记录 bit 信息 如果 还想 完成 额外 的 功能 恐怕 只能靠 牺牲 更多 的 空间 时间 来 完成 了 了解 布 隆 过滤器 吗 就是 引 入了 k kgt 个 相互 独立 的 哈希 函数 保证 在 给定 的 空间 误判 率 下 完成 元素 判 重 的 过程 它 的 优点 是 空间 效率 和 查询 时间 都 远远 超过 一般 的 算法 缺点 是 有 一定 的 误 识别率 和 删除 困难 bloomfilter 算法 的 核心 思想 就是 利用 多个 不同 的 hash 函 数来 解决 冲突 hash 存在 一个 冲突 碰撞 的 问题 用 同一个 hash 得到 的 两个 url 的 值 有 可能 相同 为了 减少 冲突 我们 可以 多 引入 几个 hash 如果 通过 其中 的 一个 hash 值 我们 得出 某 元素 不在 集合 中 那么 该 元素 肯定 不在 集合 中 只有 在所 有的 hash 函数 告诉 我们 该 元素 在 集合 中 时 才能 确定 该 元素 存在于 集合 中 这便是 bloomfilter 的 基本思想 bloomfilter 一般 用于 在 大 数据量 的 集合 中 判定 某 元素 是否 存在 如何 解决 秒杀 开始 场景 的 高 并发 问题 缓存 预热 缓存 预热 这个 应该是 一个 比较 常见 的 概念 相信 很多 小伙伴 都应该 可以 很 容易 的 理解 缓存 预热 就是 系统 上线 后 将 相关 的 缓存 数据 直接 加 载到 缓存 系统 这样 就可以 避免 在 用户 请求 的 时候 先 查询 数据库 然后 再将 数据 缓存 的 问题 用户 直接 查询 事先 被 预热 的 缓存 数据 解决 思路 直接 写个 缓存 刷新 页面 上线 时 手工操作 下 数据量 不大 可以 在 项目 启动 的 时候 自动 进行 加载 定时 刷新 缓存 缓存 更新 除了 缓存 服务器 自带 的 缓存 失效 策略 之外 redis 默认 的 有种 策略 可供 选择 我们 还 可以 根据 具体 的 业务 需求 进行 自定义 的 缓存 淘汰 常见 的 策略 有 两种 定时 去 清理 过期 的 缓存 懒 性 删除 当 有 用户 请求 过 来时 再 判断 这个 请求 所 用到 的 缓存 是否 过期 过期 的话 就去 底层 系统 得到 新 数据 并 更新 缓存 两者 各有 优劣 第一种 的 缺点 是 维护 大量 缓存 的 key 是 比较 麻烦 的 第二种 的 缺点 就是 每次 用户 请求 过来 都要 判断 缓存 失效 逻辑 相对 比较复杂 具 体用 哪种 方案 大家 可以 根据 自己 的 应用 场景 来 权衡 什么 是 缓存 降级 当 访问量 剧增 服务 出现问题 如 响应 时间 慢 或 不响应 或 非核 心 服务 影响到 核心 流程 的 性能 时 仍然 需要 保证 服务 还是 可用 的 即使是 有损 服务 系统 可以 根据 一些 关键 数据 进行 自动 降级 也 可以 配置 开关 实现 人工 降级 降级 的 最终 目的 是 保证 核心 服务 可用 即使是 有损 的 而且 有些 服务 是 无法 降级 的如 加入 购物车 结算 以 参考 日志 级别 设置 预案 一般 比如 有些 服务 偶尔 因为 网络 抖动 或者 服务 正在 上线 而 超时 可以 自动 降级 警告 有些 服务 在 一段 时间内 成功率 有 波动 如在 之间 可以 自动 降级 或 人工 降级 并 发送 告警 错误 比如 可 用率 低于 或者 数据库 连接池 被 打爆 了 或者 访问量 突然 猛 增到 系统 能 承受 的 最大 阀值 此时 可以 根据 情况 自动 降级 或者 人工 降级 严重错误 比如 因为 特殊 原因 数据 错 误了 此时 需要 紧急 人工 降级 服务 降级 的 目的 是为了 防止 redis 服务 故障 导致 数据库 跟着 一起 发生 雪崩 问题 因此 对于 不重要 的 缓存 数据 可以 采取 服务 降级 策略 例如 一个 比较 常见 的 做法 就是 redis 出现问题 不去 数据库 查询 而是 直接 返回 默认值 给 用户 热点 数据 和 冷 数据 是什么 热点 数据 缓存 才有 价值 对于 冷 数据 而言 大部分 数据 可能 还没有 再次 访 问到 就 已经 被 挤出 内存 不仅 占用 内存 而且 价值 不大 频繁 修改 的 数据 看情况 考虑 使用 缓存 举 两个 反例 寿星 列表 导航 信息 都 存在 一个 特点 就是 信息 修改 频率 不高 读取 通常 非常 高 的 场景 对于 热点 数据 比如 我们 的 某 im 产品 生日 祝福 模块 当天 的 寿星 列表 缓存 以后 可能 读取 数十 万次 再 举个 例子 某 导航 产品 我们 将 导航 信息 缓存 以后 可能 读取 数百 万次 数据 更新 前 至少 读取 两次 缓存 才有 意义 这个 是 最基本 的 策略 如果 缓存 还没有 起作用 就 失效 了 那就 没有 太大 价 值了 那 存 不存在 修改 频率 很高 但是 又不 得不 考虑 缓存 的 场景 呢 有 比如 这个 读取 接口 对 数据库 的 压力 很大 但是 又是 热点 数据 这个 时候 就需要 考虑 通过 缓存 手段 减少 数据库 的 压力 比如 我们 的 某 助手 产品 的 点 赞 数 收藏 数 分享 数 等 是 非常 典型 的 热点 数据 但是 又 不断 变化 此时 就需要 将 数据 同步 保 存到 redis 缓存 减少 数据库 压力 单线程 的 redis 为什么 这么 快 一 纯 内存 操作 二 单线程 操作 避免了 频繁 的 上下文切换 三 采 用了 非 阻塞 io 多路复用 机制 redis 中有 事务 吗 有的 redis 事务 功能 是 通过 和 watch 四个 原语 实现 的 multi 命令 用于 开启 一个 事务 它 总是 返回 okmulti 执行 之后 客户端 可以 继续 向 服务器 发送 任意 多条 命令 这些 命令 不会 立即 被执行 而是 被 放到 一个 队列 中 当 exec 命令 被 调 用时 所有 队列 中 的 命令 才会 被执行 exec 执行 所有 事务 块 内 的 命令 返回 事务 块 内 所有 命令 的 返回值 按 命令 执行 的 先后顺序 排 列当 操作 被 打断 时 返 回空 值 nil 通过 调用 discard 客户端 可以 清空 事务 队列 并 放弃 执行 事务 并且 客户端 会 从 事务 状态 中 退出 watch 命令 可 以为 redis 事务 提供 checkandsetcas 行为 可以 监控 一个 或 多个 键 一旦 其中有 一个 键 被 修改 或 删除 之后 的 事务 就不会 执行 监控 一直 持续 到 exec 命令 redis 的 同步 机制 了解 么 redis 可以 使用 主从 同步 从 从 同步 第一次 同步 时 主 节点 做 一次 bgsave 即 做 rdb 文件 备份 并 同时 将 后续 修改 操作 记 录到 内存 buffer 待 完成后 将 rdb 文件 全 量 同步 到 复制 节点 复制 节点 接受 完成后 将 rdb 镜像 加 载到 内存 加载 完成后 再 通知 主 节 点将 期间 修改 的 操作 记录 同步 到 复制 节点 进行 重放 就 完 成了 同步 过程 redis 集群 最大 节点 个数 是 多少个 redis 的 内存 用 完了 会 发生 什么 如果 达到 设置 的 上限 redis 的 写 命令 会 返回 错误信息 但是 读 命令 还 还 可以 正常 返回 或者 你 可以 将 redis 当 缓存 来 使用 配置 淘汰 机制 当 redis 达到 内存 上限 时会 冲 刷掉 旧 的 内容 mysql 里 有 w 数据 redis 中 只 存 w 的 数据 如何 保证 redis 中 的 数据 都是 热点 数据 redis 内存 数据 集 大小 上 升到 一定 大小 的 时候 就会 施行 数据 淘汰 策略 相关 知识 redis 提供 种 数据 淘汰 策略 volatilelru 从 已设置 过期 时间 的 数据 集 中 挑选 最近 最少 使用 的 数据 淘汰 volatilettl 从 已设置 过期 时间 的 数据 集 中 挑选 将要 过期 的 数据 淘汰 volatilerandom 从 已设置 过期 时间 的 数据 集 中 任意 选择 数据 淘汰 allkeyslru 从 数据 集 serverdbidict 中 挑选 最近 最少 使用 的 数据 淘汰 allkeysrandom 从 数据 集 serverdbidict 中 任意 选择 数据 淘汰 noenviction 驱逐 禁止 驱逐 数据 假如 redis 里面 有 亿个 key 其中有 w 个 key 是以 某个 固定 的 已知 的 前缀 开头 的 如果 将 它们 全部 找出来 使用 keys 指令 可以 扫出 指定 模式 的 key 列表 对方 接着 追问 如果 这个 redis 正 在给 线上 的 业务 提供 服务 那 使用 keys 指令 会有 什么问题 这个 时候 你 要回答 redis 关键 的 一个 特性 redis 是 单线程 的 keys 指令 会 导致 线程 阻塞 一段时间 线上 服务 会 停顿 直到 指令 执行 完毕 服务 才能 恢复 这个 时候 可以 使用 scan 指令 scan 指令 可以 无 阻塞 的 提 取出 指定 模式 的 key 列表 但是 会有 一定 的 重复 概率 在 客户端 做 一次 去 重 就可以 了 但是 整体 所 花费 的 时间 会比 直接 用 keys 指令 长 使 用过 redis 分布式 锁 么 它是 什么 回 事先 拿 setnx 来 争抢 锁 抢到 之后 再用 expire 给 锁 加 一个 过期 时间 防止 锁 忘 记了 释放 这时候 对方 会 告诉 你 说 你 回答 得 不错 然后 接着 问 如果在 setnx 之后 执行 expire 之前 进程 意外 crash 或者 要 重启 维护 了 那会 怎么样 这时候 你 要 给予 惊讶 的 反馈 唉 是 喔 这个 锁 就 永远 得不到 释 放了 紧接着 你 需要 抓 一抓 自己 得 脑袋 故作 思考 片刻 好像 接下来 的 结果是 你 主动 思考 出来 的 然后 回答 我 记得 set 指令 有 非常复杂 的 参数 这个 应该是 可以 同时 把 setnx 和 expire 合成 一条 指令 来用 的 对方 这 时会 显露 笑容 心里 开始 默念 摁 这小子 还 不错 二 rabbitmq 面试题 什么 是 rabbitmq 采用 amqp 高级 消息 队列 协议 的 一种 消息 队列 技术 最大 的 特点 就是 消费 并不需要 确保 提供方 存在 实现 了 服务 之间 的 高度 解 耦 为什么 要 使用 rabbitmq 在 分布式 系统 下 具备 异步 削 峰 负载 均衡 等 一系列 高级 功能 拥有 持久 化 的 机制 进程 消息 队列 中 的 信息 也 可以 保存 下来 实现 消费者 和 生产者 之间 的 解 耦 对于 高 并发 场景 下 利用 消息 队列 可以 使得 同步 访问 变为 串行 访问 达到 一定量 的 限流 利于 数据库 的 操作 可以 使用 消息 队列 达到 异步 下单 的 效果 排队 中 后台 进行 逻辑 下单 使用 rabbitmq 的 场景 服务 间 异步 通信 顺序 消费 定时 任务 请求 削 峰 如何 保证 rabbitmq 不被 重复 消费 答 先说 为什么 会 重复 消费 正常 情况下 消费者 在 消费 消息 的 时候 消费 完毕 后会 发送 一个 确认 消息 给 消息 队列 消息 队列 就 知道该 消息 被 消 费了 就会 将该 消息 从 消息 队列 中 删除 但是 因为 网络 传输 等等 故障 确认 信息 没有 传 送到 消息 队列 导致 消息 队列 不知道 自己 已经 消费 过 该 消息 了 再次 将 消息 分 发给 其他 的 消费者 针对 以上 问题 一个 解决 思路 是 保证 消息 的 唯一性 就算是 多次 传输 不 要让 消息 的 多次 消费 带来 影响 保证 消息 等 幂 性 比如 让 每个 消息 携带 一个 全局 的 唯一 id 即可 保证 消息 的 幂 等 性 具体 消费 过程 为 消费者 获 取到 消息 后 先 根据 id 去 查询 redisdb 是否 存在 该 消息 如果 不存在 则 正常 消费 消费 完毕 后 写入 redisdb 如果 存在 则 证明 消息 被 消费 过 直接 丢弃 