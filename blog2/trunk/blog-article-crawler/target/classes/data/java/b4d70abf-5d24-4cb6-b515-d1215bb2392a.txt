震惊 不到 两年 技能 树 就能 达到 如此 境界 建议 收藏 作者 异名 用 代码 是 实现 想法 努力 成长 为 一个 可靠 的 工程师 写在 前面 因为 公司 的 业务 需求 近期 学习 了 cocoscreator 这款 游戏 引擎 的 开发 也 基 于此 上线 了 一款 游戏 因此 写 这 系列 文章 记录 一下 我 从 入门 到 项目 发布 的 学习 过程 相对于 web 开发 像 cocoscreator 和 egret 这种 界面 化 的 游戏 引擎 最大 的 区别 就是 可视化 的 ui 编辑 以及 像 动画 编辑 物理 引擎 资源管理 系统 等 一系列 高度 封装 集成 的 工具 集 所以 第一 篇文章 我 主要 会 介绍 一下 我 从 web 端 开发 转向 游戏 开发 这个 过程中 我 对 cocos 的 工作 流程 的 一些 认识 尽管 文档 上有 介绍 但是 新手 上路 很多 东西 一开始 被我 忽略 掉了 随着 项目 的 进展 我 断断续续 地 从 文档 社区 中学 到了 一些 能 提高 效率 的 小 方法 和 配置 在此 记录 一下 主 要给 其他 新人 做 参考 熟悉 编辑器 因为 游戏 的 界面 编辑 都是 通过 编辑器 来 完成 的 所以 编辑器 的 一些 基本功能 和 操作 说明 我们 需要 通过 文档 去 理解 熟悉 我 这里会 记录 几个 我 新建 一个 项目 必须 会用 的 设置 配置 项目 设置 在 开始 做 项 目前 别忘了 要在 项目 项目 设置 中 先 设置 下面 几个 配置 后续 的 新建 场景 都会 默认 使用 这些 配置 后面 就不 需要 每 建 一个 场景 都要 设置 一 下了 初始 预览 场景 指定 某一个 场景 当前 打开 场景 我 一般 设置 后者 设计 分辨率 引擎 默认 的 是 适配 模式 调整 编辑器 布局 在工作中 因为 我们 绑定 资源 脚本 和 变量 的 过程 都是 通 过把 它们 拖拽 到 属性 面板 来 实现 的 而 引擎 的 默认 启动 界面 把 属性 面板 放到 最 右侧 那 当 我们 需要 绑定 操作 的 时候 就需要 把 物体 从 最左 侧 面板 拖拽 到 最右 侧 面板 其实 这段 超长 的 操作 距离 是 非常 影响 效率 的 所以 大部分 的 开发者 其实 都会 选择 经典 布局 像 下图 这样 把 属性 面板 通过 拖拽 放在 左侧 和 层级 管理器 放在 一起 这样 绑定 变量 和 资源 的 操作 效率 就会 相对 高一 点 熟悉 常用 的 界面 快捷键 cocoscreator 的 快捷键 支持 是 比 较弱 的 但是 它 还是 提供 了 几个 高频 操作 的 快捷键 通过 这四个 快捷键 我们 能 快速 切换 这四个 高频 工具 很 大地 提高 效率 w 移动 工具 e 旋转 工具 r 缩放 工具 t 矩形 变换 工具 还有 就是 用过 d 模式 的 都 知道 在 d 模式 下 调整 相机 视角 和 位置 的 操作 是 相对来说 比较 困难 的 之前 的 项 目中 也 实现 过 一个 d 的 场景 所以 也 这里 也 分享 两个 快捷键 一个 就是 调整 物体 的 时候 点击 住 屏幕 在 视图 左上角 会 出现 wasd 上下左右 的 提示 可以 通过 键 盘上 wasd 这四个 按键 来 微调 方向 相对来说 会 便捷 很多 还有 一个 就是 调整 相机 的 角度 如果 我们 根据 预览 效果 去 调整 相机 的 位置 实际操作 起来 有 一定 的 麻烦 有 一个 隐藏 的 组合 快捷键 controlshiftf 可以 把 我们 场景 编辑器 的 画面 同步 成 相机 的 预览 它 可以 让我们 更 直观 得 调整 相机 效果 ui 开发 和 web 端 的 开发 不一样 cocos 的 ui 是 不用 写 样式 的 界 面上 所有 的 元素 都是 用 图片 堆积起来 的 对 我 来说 这个 转变 过程 挺有 意思 的 把 样式 编写 去 掉了 可以 省掉 我们 一些 布局 的 时间 我 在 开发 项目 过程中 也 发现了 一些 比较好 的 实践 方法 精准 还原 设计 稿 的 窍门 因为 我们 在 可视化 的 编辑器 中 都是 通过 拖拽 来 实现 图片 的 定位 的 我们 不 写 样式 文件 但是 我 在 第一个 项目 的 时候 思维 又 还没 转换 过来 还是 习惯 web 端 那种 开发 模式 我 每次 布局 的 时候 都 会去 翻 一下 设计 稿 测 一下 物体 的 位置 然后 再在 属性 面板 上 输入 正确 的 position 信息 这样 做 当然是 没问题 的 但是 效率 真是太 低了 后来 我 看到 一位 前辈 的 开发 过程 后 才 恍然大悟 改正过来 他 是 这样 做的 在 设计 稿 那里 截 一张 完整 的 界面 图 然后 把 它 当成 一个 底层 的 节点 这 样子 我们 就有 一个 和 设计 稿 一模一样 的 背景图 了 我们 布局 的 时候 再把 一个个 物体 放到 它 正确 的 位置 上 完事 之后 只需 要把 那个 底层 的 节点 删除 就可以 了 这 样子 布局 的 的 效率 提升 可是 质 的 飞跃 把 ui 按 模块 拆分 管理 在 项 目中 我们 的 一个 场景 里面 的 内容 可能会 很多 比如 我 这个 场景 里面 有 n 个 弹窗 如果 我们 把 所有 的 弹窗 的 内容 按 他们 的 真实 位置 塞到 canvas 节 点中 那 真的 是 一件 很 糟糕 的 事情 因为 一个个 物体 们 会 重叠 在一起 后期 我们 将 很难 进行 选中 操作 所以 我们 在做 ui 管理 的 时候 需要 一个 窍门 就是 把 ui 按 模块 拆分 并且 移位 管理 如 下图 我 并不 会把 弹窗 一和 弹窗 二 的 内容 叠 加到 主 界面 上 当然 一开始 我们 可以 这样 做 因为 我们 可能 需要 根据 背景图 来 确定 每个 物体 的 位置 但是 当 我们 完成 布局 之后 可以 像我 一样 把 他们 的 父 节点 移出 主 界面 之外 我 这里 的 父 节点 是 通过 widget 做了 拉伸 的 完全 适配 窗口 的 大小 当 父 节点 被 移出 其实 就是 position 做了 偏移 后续 在 代码 里面 控制 弹窗 出现 的 时候 我们 只需要 多 写 一行 代码 把 父 节点 的 position 设置 为 就可以 了 这 样子 在 后续 维护 的 过程中 我们 的 ui 界面 也 能 一目了然 如果 用了 widget 也 别忘了 在 代码 调用 的 时候 去 手动 更新 widget 的 位置 ccwidget 利 用好 自定义 控件 自定义 控件 库 其实 就是 给 常用 的 prefab 增加了 一个 入口 当然 可以 直接 把 prefab 拖拽 到 层级 管理器 里面 直接 用 但是 其实 还是 一个 效率 的 问题 当你 的 prefab 多了 之后 先 不说 你 要去 翻 资源管理器 里面 的 文件夹 当你 打开 prefab 所在 的 文件夹 之后 一眼 看过去 是 比较 难 找到 自己 需要 的 控件 的 自定义 控件 不仅仅 额外 给 了 一个 入口 而且 它 可以 给 prefab 增加 一个 图标 和 控件 名称 对 高频 的 复用 控件 的 使用 来说 这 真的 太有 必 要了 打开 面板 一下 就能 找到 你 所 需要 的 控件 然后 直接 拖拽 使 用了 代码 开发 配置 vscode 虽然 这块 文档 里面 有 写 但是 因为 我 是 从 写 web 端 转来 做 游戏 的 以为 自己 很熟悉 vscode 又 因为 项目 的 原因 要 急于 上手 就 选择 性地 忽略 了 这一 块 仅 仅只 使 用了 代码 提示 这个 工作流 等到 看到 社 区内 的 前辈 们 的 日常 操作 之后 才 发现 配置 好 vscode 的 工作流 其实 也是 一大 效率 神器 它 包括 四块 东西 代码 智能 提示 设置 文件 搜索 范围 手动 触发 编译 配合 chromedebug 插件 在 编译器 内 debug 代码 提示 和 文件 搜索 我 就不 提了 在 正常 情况下 我们 修 改了 代码 只有 回到 cocos 界面 才能 触发 项目 实时 热 更新 而 我们 在 vscode 上 配置 好 编译 的 task 并且 设置 启动 task 的 快捷键 我 设置 的 快捷键 是 cmdr 我们 就可以 在 vscode 上 通过 快捷键 触发 项目 的 热 更新 它 可以 让我们 在 写 代码 的 时候 更 专注 在 代码 上 具体 的 配置 步骤 可以 查看 文档 vscodetasksjson 配置 vscode 任务 配置 任务 启动 快捷键 还有 一个 就是 chromedebug 插件 这块 的 流程 只 在 的 文档 中 才有 后续 的 文档 中 虽然能 搜索 出来 但是 无法 阅读 它 支持 你 在 vscode 中 唤醒 chrome 并在 vscode 中 进行 debug 也是 一大 效率 神器 参数 绑 定在 处理 复杂 界面 的 时候 因为 页 面上 的 元素 较多 就算 我们 尽可能 地 拆分 脚本 但是在 一个 脚本 里面 需要 绑定 的 变量 还是 不可避免 的 增多 然后 代码 里面 就会 有 一 大串 property 声明 的 变量 所以 新手 们 需要 充分利用 的 类型 比如 我 有 个 只是 单纯 用于 的 显示 和 隐藏 的 node 节点 就可以 通过 声明 一个 node 数组 节 点来 绑定 这 样子 我 在 代码 里面 显 式 声明 的 变量 就会 少 很多 还有 一种 常见 的 情况 就是 一个 物体 它有 两种 甚至 多种 状态 当我 刚 上路 的 时候 我 对 cocos 的 内置 对象 还 不熟 然 我 因为 我们 界 面上 的 基本 组成 单元 是 sprite 图 我 就 做了 一个 很 蠢 的 操作 就是 有 多少 状态 我 就 创建 多少 sprite 节点 状态 切换 的 时候 就 切换 相应 节点 的 显 隐 但是 这种 情况下 其实 好 的 做法 是 通过 一个 spriteframe 的 数组 变量 去 存储 不同 状态 的 spriteframe 然后 状态 切换 的 时候 去 更新 相应 的 ccspriteframe 切换 不同 的 状态 ccsprite ccsprite ccsprite 当然 这样 也 不是 最佳 实践 因为 后续 接手 我们 代码 的人 通过 代码 根本 就看 不出 数组 不同 下标 对应 的 spriteframe 是 哪一个 他 还得 通过 界面 去 查看 绑定 的 资源 所以 最佳 的 实践 应该是 把 该 一个 物体 不同 状态 图片 生成 图集 图集 里面 的 每个 图片 可以 精确 命名 当 需要 切换 状态 的 时候 我们 就可以 通过 精确 的 名称 获 取到 对应 的 spriteframe 虽然 这 样子 我们 就需要 多 维护 一个 图集 但是 它是 一个 相对 更 规范 的 实践 方式 property ccspriteatlas 切换 不同 的 状态 ccsprite takeoffstate ccsprite readystate ccsprite reststate ccsprite firestate 第三方 工具 我 目前 用到 的 第三方 工具 主要 有这 下面 几个 利用 texturepacker 生成 图集 虽然 引擎 在 打包 阶段 给 我们 提供 了 自动 合 图 功能 但是 为 方便 资源 的 维护 代码 变量 的 管理 以及 后面 性能 优化 上 很 重要 的 drawcall 优化 处理 等等 我们 还是 很有 必 要在 开发 阶段 就要 有意识 地 去做 图集 管理 shoebox 异常 强大 的 ps 插件 我 目前 用得 最多 的 就是 拆分 图集 gif 图 拆解 生成 位图 字体 合成 gif 图 它也 可以 合成 图集 但是 我 觉得 texturepacker 在这 方面 更好 维护 拆分 图集 gif 图 拆解 这两个 功能 我 主要 用来 获取 一些 游戏 的 公共资源 最 简单 的 像 一些 金币 的 动画 我 需要 它 的 序列帧 如果 设计师 那边 有 现成 可用 的 固然 好 如果 没有 的话 特意 让 人家 去做 一份 也没有 很大 的 必要 我 比较 常去 爱 给 网 翻 一些 cc 版权 的 资源 来用 比如 下面 我 需要 用到 一张 合 图里 面的 某一 张 图片 我 就会 利用 shoebox 拆 分合 图 游戏 当中 不可避免 的 会 用到 一些 卡 通点 的 字体 比如 数字 由 到 组成 是 我们 设计师 独出心裁 设计 的 需要 应用到 游戏 当中 应该 会有 部分 的 前端 像我 一样 是 做 web 开发 的 以前 没有 接触 过 游戏 开发 那要 实现 这个 需求 就 一脸 懵 逼 总不能 让 我 用 一个个 sprite 去 代替 吧 其实 还 真的 是 位图 字体 的 做法 就是 将会 使 用到 的 每个 文字 对应 的 字体 做成 位图 生成 文字 内容 和 位图 的 映射 游 戏中 动态 的 调用 显示 位图 这样 即在 游 戏中 呈现 了 漂亮 的 字体 又 节 省了 资源 位图 字体 是 由 一张 png 的 图片集 和 一个 fnt 配置文件 组成 的 其中 png 图片 集中 包括 了 所有 会使 用到 的 位图 fnt 配置文件 里 描述 了 这些 位图 应该 怎么 从 png 图片集 中切 分出来 下面 就是 利用 shoebox 制作 位图 字体 的 过程 sketch 我 司 的 设计 工具 之前 做 web 端 开发 的 时候 我 和 设计师 的 交付 都是 通过 sketch 的 导出 的 网页 或者 通过 蓝 湖 但是 做了 游戏 项目 之后 我 发现 开发 这边 对 稿子 的 调整 还是 挺多 的当 稿子 已经 基本 交付 过来 之后 我们 这边 有 小 的 调整 的话 能够 自己 搞定 的话 也 没必要 再去 麻烦 人家 所以 像 切 图 去 色 通过 变换 工具 减少 九宫格 图片 的 多余 面积 等 一些 基本 又 高频 的 操作 能不 麻烦 设计师 就 自己 搞定 吧 同时 还有 一些 特殊 交互 动画 需 要对 切 图 有 一定 的 拆分 处理 如果 自己 能 搞定 的话 也 能 省去 沟通 以及 交付 的 成 本字 蛛 这个 其实 用得 相对 低频 还是 回到 游 戏中 的 字体 需求 如果 我 希望 界 面上 的 用 的 字体 比较 符合 整个 ui 的 风格 比如 我 要 一个 圆体 但是 用户 的 系统 字体 默认 是 那种 瘦 体 ui 上 看起来 肯定是 体验 不好 的 设计师 同事 也 不可 能给 每 个字 都 做成 位图 字 的 圆体 中文 字体库 起码 几 m 以上 我们 又不 可能 全部 当成 资源 引入 所以 我们 需 要做 字体库 的 切割 我们 的 游戏 里面 用到 哪些 字 就用 只 提取 那些 字 切割 后 的 字体库 只有 几 k 那就 可以 满足 我们 的 生产 环境 使 用了 具体 的 用法 可以 去官 网 查看 因为 每次 都 需要 启动 服务 我 很早 之 前嫌 麻烦 做过 一个 小工具 mac 下载 window 下载 下面 基于 它 做一个 演示 总结 以上 就是 这篇 文章 的 全部内容 了 主要 记录 一下 我 从新 手 开始 做 游戏 开发 后 一些 后知后觉 才 学会 的 能够 提高 工作效率 的 工作流 和 配套 小工具 因为 是 在 公司 内 做 第一个 螃蟹 的人 团队 内部 还没有 这块 的 沉淀 加上 这些 小经验 要么 在 文档 中被 我 忽略 而过 要么 就 零零散散 在 论坛 中所 以后 面会 尝 试做 一些 小结 沉淀 下来 后面 我 如果 发现 还有 别的 能 提高 效率 的 工作 流程 我 也 会在 这里 更新 除了 上面 这些 新手 上路 的 絮絮叨叨 外 还有 一些 在 真实 项 目中 遇到 的 坑 以及 解决方案 我 也 觉得 比较 有意思 后面 也 会 尝试 做成 一系列 的 总结 沉淀 下来 让我们 不见不散 原文 地址 感谢 打 赏 您 的 支持 是 作者 创作 的 最大 动力 一个 游戏 多 份 收益 助力 开发者 技术 精进 副业 变现 我 是 工程师 经纪人 张 晓 衡 欢迎 加我 微 信 感谢 大家 的 支持 求 转发 求 在看 晓 衡 在线 等 你们 一 起来 助力 开发者 副业 增收 不是 一句 口号 实战 微 信 小游戏 球 球 要 回家 视频 开 讲了 这位 程序 猿 做了 全世界 程序 猿 都想 做的 事情 微 信 引擎 插件 会对 小游戏 带来 怎样 的 利好 creatorprimer 篇 教程 汇总 creator 星球 教程 文章 分类 导航 盘点 creator 星球 上 的 几大 开源 工具包 我 就 知道 你 在看 