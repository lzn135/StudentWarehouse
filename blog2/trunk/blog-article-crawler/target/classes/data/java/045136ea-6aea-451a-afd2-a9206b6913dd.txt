用 javascript 写 的 俄罗斯方块 小游戏 很简单 很 详细 效果 编写 外部 框架 分数 时间 classbuttongt 开始 classbuttongt 结束 效果 添加 内部 画布 以及 绘制地图 首先 创建 线 的 构造 函数 ctxo thisxx 坐标 thisyy 坐标 thisstartx 开 始点 x 位置 thisstarty 开 始点 y 位置 thisendx 结束 点 x 位置 thisendy 结束 点 y 位置 thisthinfalse 设置 变细 系数 o o for varkeyino innerrender this obj ctxbeginpath ctxtranslate objxobjy if objthin ctxtranslate if objlinewidth 设定 线宽 objstrokestyle 划线 ctxmoveto ctxlineto objendxobjendy ctxstroke ctxrestore returnthis 设定 参数 执行 绘制 等 相关 方法 functiongame el thisrenderarr 待 渲染 对象 存储 数组 thisalivemodel 用来 存 到底 的 model 组合 thisscore 分数 thistime 时间 thismovecount 计时 控制器 elscoretime if el canvas 创建 画布 设置 样式 varwcanvaswidth 设置 宽度 设置 高度 elappendchild canvas 添加到 指定 的 dom 对象 中 d 每个 格子 的 x 方向 大小 thisdisy 每个 格子 的 y 方向 大小 thismaxxx 方向 格子 总数 thismaxyy 方向 格子 总数 thiscontrol thisdraw 绘制 绘制地图 variiltmaxyi 行 varlinenewline renderarrpush line for variiltmaxxi 列 varlinenewline renderarrpush line thiscreatemap 绘制地图 thisrender 渲染 此时 游戏 区域 的 格子 以及 绘制 如下 再来 绘制 模型 模型 定义 分 别是 一 字形 田 字形 二 字形 种 七 字形 种 凸 字形 等 共 种 变形 定义 字形 可以 变形 种田 字形 不能 变形 其他 的 都可以 变形 种 模型 的 组成 模型 是 有 个 小方块 来 组成 每个 模型 里面 有 数组 blocks 来 存取 个 小方块 的 xy 坐标 然后 绘制 出来 就是 模型 了 模型 的 变形 变形 的 时候 就 只要 切换 每个 方块 的 xy 坐标 就可以 达到 变形 的 效果 下面 来 创建 模型 的 构造 函数 模型 构造 函数 functionmodel o thisblocks 存储 方块 的 数组 绘制 的 时候 根据 数组 来 绘制 thistype 模型 的 形状 默认 是 一 字形 共 种 thisdir 方向 默 认为 总共 种 其中 一 字形 为 种田 字形 为 种 其他 为 种 thisxx 坐标 只 传入 第一个 x 根据 这个 x 来 生成 其他 的 xthisyy 坐标 只 传入 第一个 y 根据 这个 y 来 生成 其他 的 ythisinit o 初始化 o for varkeyino thiskeyokey 举例 添加 一个 创建 七 字形 的 方法 因为 七 字形 有种 摆放 方式 所以有 dir 来 区分 怎么 摆放 创建 七 字形 thisdir caseblockspush xxyy blockspush xxyy blockspush xxyy blockspush xxyy xxyy blockspush xxyy blockspush xxyy blockspush xxyy xxyy blockspush xxyy blockspush xxyy blockspush xxyy xxyy blockspush xxyy blockspush xxyy blockspush xxyy break 创建 一个 七 字形 试试 传入 的 xy 是 第一个 放个 的 位置 创建 字 model 当前 的 模型 编写 变形 方法 每一次 变形 都是 按 前 一个 模样 逆时针 旋 转度 修改 每个 小方块 xy 来 修改 就行 gtgtgt 左边 这个 图形 要 变成 右边 的 图形 需要 怎么 变更 呢 gtgtgt 标上 号码 就很 容易 明白 还是 对应 的 还是 对应 的 以此类推 只不过 xy 变了 方块 只要 x 就可以 移到 指定 的 位置 方块 xy 都 需要 加 方块 y 就可以 方块 x 和 y 即可 其他 都是 一样 的 道理 来写 一下 变形 的 方法 七 变形 thisdir case 竖着 的 tran 横着 的 tran 竖着 的 tran 横着 的 tran 变成 横着 的 for blockblocksiif i blockxelseif i i blockyelseif i 竖着 的 for blockblocksiif i i blockyelseif i blockxelseif i 变成 横着 的 for blockblocksiif i blockxelseif i i elseif i 竖着 的 for blockblocksiif i i i blockxelseif i blocky 给 w 和 向上 键 添 加为 变形 事件 同时 左 移动 右 移动 下 加速 也 添加 好 事件 按键 的 控制 keydownfunction e if thattimmer returnswitch ekeycode casewcase 上 变形 breakcasescase 下 d 移动 breakcaseacase 左 l 移动 breakcasedcase 右 r 移动 break 测 试用 记得 删除 thatrender 接下来 变形 试试 添加 移动 方法 移动 dir dirrdirld diselseif dirl diselseif dird dirdis val if dirddirld 到底 了 pushapply 放到 已 到底 的 组合 中 当前 模型 弹出 消除 绘制 一个 新 图形 return 如果 返回 true 则 不能 再往 这个 方向 移动 if resdisgt disresdis 更新 每一个 block 的 位置 for blockblocksiif dirddirld 加入 边界 判断 和 碰撞检测 边界检测 比较简单 碰撞检测 在 快进 的 时候 要注意 处理 一下 看 代码 吧 停止 移动 dirdis blockblocksiif dirddirld if blockygtmaxy 到底 了 dirr if blockxgtmaxx 到 右 边界 了 dirl if blockxlt 到 左 边界 了 returnvaltrue 碰撞检测 tempthiscollide blockdisdir if tempval returntempif resresresdis 检查 当前 模型 是否 与其 他 存底 的 模型 相 触 碰 blockdisdir dirr 向右 判断 for item continueif dirl 向左 判断 for item continueif 向下 判断 if for item continueif itemxblockx 下方 有 存在 的 方块 if itemyblocky dis resdistempelse 下发 不存在 方块 if dis resdistempelse 第一个 模型 if dis 到底 后 的 处理 给 当前 的 游戏 对象 的 alivemodel 数组 存取 当前 到底 的 模型 所 对应 的 个 小方块 执行 render 方法 的 时候 就 绘制 出来 在 renderarr 数组 中 此 模型 要 删除 每次 触底 需要 加入 消除 判断 符合 条件 就 消除 绘制 一个 新 的 模型 绘制 触底 的 模型 方块 绘制 存底 的 图形 each item if item contextrect contextrestore 消除 行 积分 以及 下降 消除 行 将 y 相同 的 放在 一起 itemindex if item if rowobjitemy index rowobj rownumeach keysfunction k rowrowobjkif rowlengthgtmaxx 消除 这行 each rowfunction r rundefined 先用 undefined 代替 num 行数 计数器 thatdown k 清楚 当 前行 完成 消除 for if alivemodeli consolelog i varscoreswitch num casescore 行 分 breakcasescore 行 分 breakcasescore 行 分 breakcasescore 行 分 break 积分 thiscalcuscore score 消除 后 的 下降 ynum item if itemynum 自动 往下 移动 更新 显示 时间 分数 显示 分数 s 分数 thisscore 显示 时间 if thismovecount 时间 向下 移动 dir if endflag thisstop thisrender 更新 ld 给 开始 结束 按钮 加入 事件 maindiv score time gameinit functionstart gamestart functionstop gamestop if thistimmer returnif thishasend 如果是 结束 则 需要 重新开始 暂停 的话 就 继续 游戏 thisrestart thismovebind this 开始 定时 任务 重新开始 thisrenderarr 待 渲染 对象 存储 数组 thisalivemodel 用来 存 到底 的 model 组合 thisscore 分数 thistime 时间 thismovecount 计时 控制器 thisclearcanvas thisdraw 停止 任务 if thistimmer thistimmer 清除 定时 任务 thistimmernull 结束 itemampampitemy alert 结束 了 给 个 三连 吧 兄弟们 源码 下载方式 完整 代码 下载方式 关注 下方 公众 号 回复 下载 代码 基于 javascript 的 幸运 大转盘 附 源码 抖 音 很 火 的 罗盘 时钟 附 源码 基于 javascript 的 俄罗斯方块 小游戏 附 源码 基于 javascript 的 贪吃蛇 游戏 附 源码 基于 canvas 的 手风琴 特效 附 源码 抖 音 很 火 的 华为 太空人 表盘 附 源码 基于 javascript 页面 动态 验证码 附 源码 基于 javascript 的 拖动 滑块 拼图 验证 附 源码 基于 javascript 的 拼图游戏 附 源码 用 javascript 给 女儿 做的 烟花 特效 附 源码 老父亲 给 女儿 做的 下雪 特效 满足 女儿 看 雪 的 愿望 附 源码 雷达 扫描 特效 附 源码 香港黄金 配角 吴孟达 去世 后 程序员 以 轮播 图 来 悼念 达 叔 达 叔 一路 走好 附 源码 仿 抖 音 刷新 进度条 附 源码 仿 头条 方形 刷新 进度条 附 源码 仿 加速 球 水波 评分 特效 附 源码 基于 canvas 的 刮刮卡 附 源码 原生 js 写 的 左侧 飞入 拼图 特效 你 是 喜欢 美女 单飞 还是 双飞 附 源码 用 js 写 的 旋转 木马 在 新年 献给 各位 刚 登基 的 皇帝 让 你 的 后宫 转起来 程序员 就是 可以 为所欲为 附 源码 用 js 写 的 轮播 图 八位 女明星 你 翻 谁 的 牌 程序员 就是 可以 为所欲为 附 源码 原生 js 实现 美女 拼图 把 美女 老婆 抱 回家 个 美女 够不够 程序员 就是 可以 为所欲为 附 源码 用 js 仿 探探 拖拽 卡片 的 效果 飞 卡片 的 效果 感觉 挺 酷 最后 有 美女 看 哦 附 源码 老婆 说 程序员 不懂 浪漫 程序员 默默 拿 起了 键盘 这就 亲手 带你 去看 流星雨 女人 真会 影响 拔刀 的 速度 附 源码 学生 成绩 管理 系统 有 源码 你 的 毕 设 我 的 心 附 源码 