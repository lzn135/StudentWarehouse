feign 使用 hystrix 无效 原因 及 解决方法 最近 项目 重构 使 用了 springboot 和 springcloud 这两者 结合 确实 给 项目 带 来了 方便 同时 也 遇 到了 一些问题 其中 使用 feign 作为 服务 消费 但是 断路器 hystrix 一直 不起作用 让 人 很 费解 最终 经过 重重 查找 终于 找到 原因 以及 解决方法 问题 产生 原因 首先 使用 springcloud 搭建 微 服务 的 过程 大部分 是 根据 网上 的 教程 来 的 由于 网上 教程 的 时间 较早 而 springcloud 更新 迭代 较快 会 造成 依赖 上 的 一些问题 教程 中 的 springcloud 的 依赖 是 而我 自己 使用 idea 搭建 项目 使用 的 是 较 新 的 依赖 发现 两者 的 区别 了吗 对 就是 依赖 版本 不同 教程 中 的 版 本是 brixtonrelease 而我 使用 的 版 本是 dalstonrelease 探究 过程 根据 这个 关系 顺藤摸瓜 找 到了 netflix 的 依赖 版本 接着 去了 官 网 找到 对应 的 版本 查看 文档 和 api 在 文档 中会 看到 这个 意思 就说 feign 默认 是 启用 hystrix 的 如果 要 禁用 的话 需要 加 配置 语句 但是 种种迹象表明 feign 中 并没有 有 启用 hystrix 看到 这里 当时 我 就很 疑惑 但是 发现了 hystrix 在 feign 中 的 开关 还是 有所 收获 的 我 抱着 试一试 的 心态 照着 上面 的 描述 在 配置文件 中加 上了 配置 将 false 改 为了 true 结果 神奇 般 的 起了 作用 虽然 问题解决 了 为什么 官方 文档 还是 有 错误 的 在这里 吐 槽 一句 tmd 挺 萌 的 抱着 追根求源 的 心态 查 看了 netflix 的 源码 看看 什么时候 修 改了 默认 配置 点击 上 图中 的 api 就可以 看到 源 github 上 的 源码 了 里面 这 两段 代码 就是 管理 默认 配置 的 为什么 要 默认 关闭 hystrix 呢 请看 这里 至此 终于 知道了 产生 错误 的 原因 以及 为什么 要 默认 关闭 hystrix 解决方案 如果是 yml 文件 请在 文件 中 加入 如果是 properties 文件 请在 文件 中 加入 重启 服务 大功告成 本文 首发 地址 转 载于 