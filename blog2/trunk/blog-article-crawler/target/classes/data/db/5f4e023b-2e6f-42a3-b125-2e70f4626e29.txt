stm32 中断 优先级 的 讲解 一 优先级 的 排序 stm cortexm 中有 两个 优先级 的 概念 抢占 式 优先级 和 响应 优先级 有人 把 响应 优先级 称作 亚 优先级 或 副 优先级 每个 中断 源 都 需 要被 指定 这两种 优先级 具有 高 抢占 式 优先级 的 中断 可以 在 具有 低 抢占 式 优先级 的 中断 处理 过程 中被 响 应即 中断 嵌套 或者说 高 抢占 式 优先级 的 中断 可以 嵌套 低 抢占 式 优先级 的 中断 当 两个 中断 源 的 抢占 式 优先级 相 同时 这两个 中断 将 没有 嵌套 关系 当 一个 中断 到来 后 如果 正在 处理 另一个 中断 这个 后 到来 的 中断 就要 等到 前 一个 中断 处 理完 之后 才能 被 处理 如果 这两个 中断 同时 到达 则 中断 控制器 根据 他们 的 响应 优先级 高低 来 决定 先 处理 哪一个 如果 他们 的 抢占 式 优先级 和 响应 优先级 都 相等 则 根据 他们 在 中断 表 中 的 排位 顺序 决定 先 处理 哪一个 二 优先级 分组 既然 每个 中断 源 都 需 要被 指定 这两种 优先级 就需要 有 相应 的 寄存器 位 记录 每个 中断 的 优先级 在 cortexm 中 定义 了 个 比特 位 用于 设置 中断 源 的 优先级 这个 比特 位在 nvic 应用 中断 与 复位 控制 寄 丛 器 aircr 的 中断 优先级 分组 域中 可以 有种 分配 方式 如下 所有 位 用于 指定 响应 优先级 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 cortexm 允许 具有 较少 中断 源 时 使用 较少 的 寄存器 位 指定 中断 源 的 优先级 因此 stm 把 指定 中断 优先级 的 寄存器 位 减少 到位 aircr 高四 位 这个 寄存器 位 的 分组 方式 如 下第 组 所有 位 用于 指定 响应 优先级 第 组 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 第 组 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 第 组 最 高位 用于 指定 抢占 式 优先级 最 低位 用于 指定 响应 优先级 第 组 所有 位 用于 指定 抢占 式 优先级 可以 通过 调用 stm 的 固件 库 中 的 函数 选择 使用 哪种 优先级 分组 方式 这个 函数 的 参数 有 下列 种 选择 第 组 选择 第 组 选择 第 组 选择 第 组 选择 第 组 中断 优先级 分组 是为了 给 抢占 式 优先级 和 响应 优先级 在 中断 优先级 寄 丛 器 的 高四 位 分配 各个 优先级 数字 所占 的 位数 在 一个 程序 中 只能 设定 一次 