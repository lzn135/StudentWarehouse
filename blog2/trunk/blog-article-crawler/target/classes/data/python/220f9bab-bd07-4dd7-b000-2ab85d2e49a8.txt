python 每日 一练 20 用 python 制作 mini 翻译器 目录 实例 描述 技术 要点 有道 词典 这样 的 js 混淆 加密 应该 怎么 破 代码 实现 实例 描述 在 平时 编程 的 过程中 会经 常在 网上 翻译 一些 单词 本文 使用 python 制作 一款 翻译 小工具 不仅 可以 自己 用 还 可以 嵌入 到 程序 当中 运行 程序 效果 如 下图 所示 在 文本框 输入 英文 或 中文 单击 翻译 按钮 即可 翻译 并将 翻译 内容 显示 在下 面的 文本框 中 单击 保存 按钮 将 输入 内容 和 翻译 内容 保 存到 文本文件 中 以便 日后 复习 单击 清空 按钮 将 清除 文本框 中 的 内容 技术 要点 利用 requests 模块 获取 有道 词典 web 页面 的 post 信息 获取 需要 的 内容 通过 tkinter 模块 生成 窗口 界面 使用 文件 读写 方法 将 内容 保 存到 文本文件 中 有道 词典 这样 的 js 混淆 加密 应该 怎么 破 嘿嘿嘿 本文 需要 说说 一些 爬虫 过程中 需要 斗智斗勇 的 事情 了 这次 咱们 就来 说说 关于 一些 js 混淆 加密 的 事 所谓 js 就是 javascript 一种 前端 的 脚本语言 一般 情况下 每个 网站 都 需要 js 来 做 一些 数据 交互 页面 渲染 等 一些 异步 操作 当然 对于 反 爬 的人 来说 js 的 用处 还可 以 用来 对 一些 数据 进行 加密 今天 咱们 就以 有道 词典 这个 在线翻译 的 网站 为 例 看看 他们 是 如何 加密 请求 数据 的 以及 笔者 是 如何 通过 python 模拟 请求 从而 获得 关键 数据 的 点击 此处 打开 有道 翻译 的 网站 输入 中文 然后 点击 翻译 按钮 就会 翻译 出来 英文 比如 接着 我们 打开 开发者 工具 按 下 f 来抓 一下 数据 当 我们 点击 翻译 的 时候 可以 看到 有 了 一个 请求 点 进 去看 可以 发现 post 请求 的 地址 是 我们 再来 看一下 请求 过去 携带 的 参数 是 啥 可以 看到 还是 需要 挺多 参数 的 其中 的 i 就是 我们 要 翻译 的 内容 那 简单 啊 想要 得到 翻译 后 的 数据 那么 我们 直接 把 请求 头 和 所需 参数 的 值 复制 一下 然 后用 requests 请求 一波 不就 搞定 了 运行 一波 返回 的 是 错误码 我们 再 点多 几次 翻译 按钮 然后就 可以 看到 有 多次 请求 可以 发现 每一次 的 请求 中 的 saltsignltsbv 参数 是 会 一直 变化 的 我们 回到 network 我们 看到 initiator 这一 栏 可以 看到 它 请求 到了 fanyiminjs 这个 js 文件 我们 就 点 fanyiminjs 进去 看看 牛 的 一比 直接 看不懂 还好 左下角 有 一个 可以 点 一下 发现有 惊喜 直接 帮 我们 把 压缩 的 js 代码 格式化 牛 逼 不 行号 都给 我们 显示出 来了 不过 到了 这里 依然 懵 逼 我们 还是 不知道 怎么 拿到 saltsignltsbv 这些 参数 的 值 咋办 恩 chrome 浏览器 的 打 断点 功能 在 这个 时候 就要 派上用场 那么 如何 使用 断点 功能 呢 我们 看到 chrome 的 右边 是 这样 的 看到 这个 没在 这里 我们 可以 添加 url 根据 请求 这个 url 打 断点 而 我们 要 打的 断点 就是 一开始 获 取到 的 请求 点击 右边 的 号 然后 把 链接 复制 进去 这时候 再 点击 翻译 按钮 突然 你 的 屏幕 一 灰 表示 好事 将近 我们 成功 打上 了 断点 也就是说 现在 我们 可以 在 请求 之前 做 一些 骚 操作 这时候 我们 将 右边 的 callstack 展 开点 ttranslate 进去 这些 就是 我们 在 点击 翻译 按钮 之后 会调 用到 js 里面 的 方法 从 这里 下手 来 寻找 参数 是 被 如何 加密 的 代码 实 现用 python 制作 mini 翻译器 的 具体步骤 如下 首先 安装 requests 模块 使用 pip 命令 安装 命令 如下 导入 相关 模块 代码 如下 定义 翻译 函数 代码 如下 defgetts 获取 时间 戳 return 时间 returnstr int timetime defgetbv 获取 app 版本 并 通过 md 加密 return 加密 后 的 字符串 windowsntwow applewebkit khtmllikegecko mupdate utf defgetsalt ts returnstr ts str int randomrandom defgetsign salt strtextget 定义 一个 变量 用来 接收 输入 文本框 的 值 mupdate strdataencode utf defgetformdata strtextget 定义 一个 变量 用来 接收 输入 文本框 的 值 tsgetts saltgetsalt ts salt signgetsign salt tstsbvgetbv 定义 翻译 函数 deftranslate windowsntwow applewebkit khtmllikegecko headersheaders end 清空 输出 文本框 textinsert 将 翻译 结果 添加到 输出 文本框 中 定义 写入 文本 txt 的 函数 代码 如下 定义 写入 文本 txt 的 函数 defwrite fopen translatetxta fwrite textget textget tkend 定义 清空 文本框 的 函数 代码 如下 定义 清空 文本框 的 函数 defdelete textdelete end 从 第一 行 清除 到最后 一行 textdelete end 窗口 界面设计 代码 如下 创建 window 窗口 topmost 置顶 windowtitle amoxiangmini 翻译器 定义 窗口 名称 windowresizable 决定 框体 大小 是否 能够 调整 texttkentry 在 窗体 上 添加 一个 输入 文本框 并 设置 尺寸 和 颜色 texttktext 在 窗体 上 添加 一个 输出 文本框 并 设置 尺寸 和 颜色 textgrid rowstickywpadx textgrid row 添加 一个 按钮 用于 触发 翻译 功能 tbuttontkbutton windowtext 翻译 宋体 添加 一个 按钮 用于 触发 清空 输入 文本框 buttontkbutton windowtext 保存 font 宋体 添加 一个 按钮 用于 触发 清空 输出 文本框 buttontkbutton windowtext 清空 font 宋体 添加 背景图片 fileamogif labeltklabel 完成 界面 布局 设置 各个 控件 的 位置 tbuttongrid rowcolumnpadx buttongrid rowcolumnpadx buttongrid rowcolumnpadx labelgrid tkmainloop 至此 今天 的 案例 就 到此结束 了 笔者 在这里 声明 笔者 写文章 只是 为了 学习 交流 以及 让 更多 学习 python 基础 的 读者 少 走 一些 弯路 节省时间 并不 用做 其他 用途 如有 侵权 联系 博 主 删除 即可 编写 不易 请 大家 手 留 余香 