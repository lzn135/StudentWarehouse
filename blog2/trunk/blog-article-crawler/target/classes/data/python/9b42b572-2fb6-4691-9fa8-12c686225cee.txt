linux 下 调试 core dump 方式 汇总 工作 必备 技能 缘起 调试 是 开发 流程 中一 个 非常重要 的 环节 每个 程序员 都应 具备 调试 代码 的 能力 尤其 对于 从事 linux 下 的 开发 的 读者 从事 linux 下 后台 开发 有时候 会 遇到 程序 突然 崩溃 的 情况 也没有 任何 日志 这会 让 你 不知所措 今天 给 大家 介绍 一个 core 文件 用 这个 文件 我们 可以 找出 对应 出错 的 代码 行 感觉 是不是 很 神奇 透着 树荫 看着 朦胧 的 太阳 晒 着 日光浴 感觉 还 不错 先 学 完 这篇 我们 再去 欣赏 风景 什么 是 coredump 对于 程序 由于 各种 异常 或者 bug 导致 在 运行 过程中 并且在 满足 一定 条件下 产生 一个 叫做 core 的 文件 通常情况下 core 文件 会 包 含了 程序 运行时 的 内存 寄存器 状态 堆栈 指针 内存 管理 信息 还有 各种 函数 调用 堆栈 信息 等 许多 程序 出错 的 时候 会 产生 一个 core 文件 通过 工具 分析 这个 文件 我们 可以 定位 到 程序 异常 退出 的 时候 对应 的 堆栈 调用 等 信息 打开 coredump 开关 看 一段 有 问题 的 代码 intpnullpprintf badn returnlinux 下 编译 和 执行 coredumped 上述 代码 一看 就有 错误 执 行会 产生 coredump 但是在 大型项目 中用 肉眼 就很 难 看了 下面 说明 一下 linux 下 调试 coredump 方法 dmesgaddrline 调试 先 介绍 个 linux 命令 dmesg 一种 程序 用于 检测 和 控制 内核 缓冲 程序 用来 帮助 用户 了解 系统 的 启动 信息 可以获得 出错 堆栈 地址 addrline 可以 将 指令 的 地址 和 可执行 映像 转换成 文件名 函 数名 或 源代码 的 工具 这种 功 能将 跟踪 地址 转换成 更有意义 的 内容 来说 很有 用在 调用 addrline 工具 时 要 使用 e 选项 来 指定 可执行 映像 使用 f 选项 可以 告诉 工具 输出 函 数名 linux 下 操作过程 先 通过 dmesg 找到 对应 出错 的 地址 再用 addrlinee 将 地址 解析 到 对应 的 代码 行 gdb 调试 gdb 想必 大家 都有 听说 linux 下面 一款 常用 的 的 调试 工具 gdb 编译器 通 常以 gdb 命令 的 形式 在 终端 中 使用 下面 学习 下 常用 调试 选项 bt 查看 堆栈 信息 ilocals 查看 当前 程序 栈 的 局部变量 iargs 查看 当前 程序 栈 的 参数 icatch 查看 当前 程序 中 栈 帧 的 异常 处理器 pa 打印 变量 的 值 iregister 查看 当前 寄存器 的 值 r 从 运行 程序 至 第一个 断点 没有 断点 则 一直 运行 完 quit 退出 gdb 调试 过程中 输入 rbtr 是 运行 aout 文件 bt 查看 堆栈 情况 我们 不需要 执行 gdbaout 这样 就 相当于 重新 运 行了 aout 文件 然 而在 实际 开发 中有 很多 问题 都是 概率 发生 的 所 以此 方法 不太 实用 linux 下 操作过程 省略 部分 gdb 介绍 信息 gdb btxinmain atmaincpp gdb 直接 执行 gdbaoutcore 不用 r 命令 避免 程序 重复 执行 使用 bt 命令 可以 看到 程序 出错 代码 行 straceaddrline 调试 strace 是 一个 集 诊断 调试 统计 与 一体 的 工具 我们 可以 使用 strace 对 应用 的 系统 调用 和 信号 传递 的 跟踪 结果 来 对 应用 进行 分析 以 达到 解决问题 或者是 了解 应用 工作 过程 的 目的 strace 的 简单 的 用法 就是 执行 一个 指定 的 命令 在 指定 的 命令 结束 之后 它 也就 退 出了 在 命令 执行 的 过程中 strace 会 记录 和 解析 命令 进程 的 所有 系统 调用 以及 这个 进程 所 接 收到 的 所有 的 信号 值 c 统计 每 一 系统 调用 的 所 执行 的 时间 次数 和 出错 的 次数 等 p 指定 进程 pidi 输出 系统 调用 的 入口 指针 linux 下 操作过程 省略 部分 加载 信息 xfd coredumped 絮叨 linux 调试 技巧 很 重要 平时 用到 的 也 会 很多 掌握 好 这些 很 关键 通过 这篇 文章 希望 读者 能对 coredump 调试 有 大致 的 了解 更多 linux 知识 和 linux 调试 相关 的 知识 我 下期 会给 大家 继续 更新 给 大家 推荐 一本 linux 学习 书籍 感觉 还 不错 专注 后台 开发 相关 技术 广度 深度 并存 干货 情怀 同在 微 信 搜索 晨 梦 思 雨 关注 这个 不一样 的 程序员 